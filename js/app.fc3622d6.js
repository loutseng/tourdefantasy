(function(){"use strict";var e={647:function(e,t,a){var l=a(5130),r=a(3367),s=a(6768);const n={id:"app"},o={id:"footer"},i=(0,s.Lk)("img",{src:"api_logo_cptblWith_strava_horiz_light.png",width:"10%/"},null,-1);function u(e,t,a,l,r,u){const c=(0,s.g2)("NavBar"),d=(0,s.g2)("AutoBot"),p=(0,s.g2)("router-view"),g=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",n,[(0,s.bF)(c),(0,s.bF)(d)]),(0,s.bF)(p),(0,s.Lk)("div",o,[(0,s.bF)(g,{to:"/bypass"},{default:(0,s.k6)((()=>[i])),_:1})])],64)}var c=a(144),d=a(4232),p=a(4373);const g=(0,r.nY)("auth",{state:()=>({user:{},isAuthenticated:!1}),actions:{async login(e){if(e){console.log("requesting jwt "+e);const t=await p.A.get(`https://www.tourdefantasy.com/callback?code=${e}`),{access_token:a}=t.data;localStorage.setItem("token",a)}const t=localStorage.getItem("token"),a=await p.A.get("https://www.tourdefantasy.com/user/me",{headers:{Authorization:`Bearer ${t}`}});this.user=a.data,this.isAuthenticated=!0},async impersonate(e){if(e){const t=await p.A.put(`https://www.tourdefantasy.com/bypass?user_id=${e}`,{}),{access_token:a}=t.data;localStorage.setItem("token",a)}const t=localStorage.getItem("token");console.log("getting user info "+t);const a=await p.A.get("https://www.tourdefantasy.com/user/me",{headers:{Authorization:`Bearer ${t}`}});this.user=a.data,this.isAuthenticated=!0},logout(){this.user={},this.isAuthenticated=!1,localStorage.removeItem("token")}}});a(4114),a(7072),a(4979),a(1678);const v=(0,r.nY)("racer",{state:()=>({allRacers:[],racers:[],draftList:[]}),actions:{async getRacerlist(e){const t=localStorage.getItem("token"),a=await p.A.get(`https://www.tourdefantasy.com/racer/race?race_url=${e}`,{headers:{Authorization:`Bearer ${t}`}}),l=k(),r=new Map;l.players.forEach((e=>{e.active_racers&&e.active_racers.forEach((t=>{r.set(t.url,e.player_strava_id)})),e.bench_racers&&e.bench_racers.forEach((t=>{r.set(t.url,e.player_strava_id)}))})),a.data.forEach((e=>{e.player=r.has(e.url)?r.get(e.url):null})),this.allRacers=a.data},async loadDraftlist(e){const t=localStorage.getItem("token"),a=await p.A.get(`https://www.tourdefantasy.com/racer/draftlist?race_url=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.racers=a.data},async updateDraftlist(e){const t=localStorage.getItem("token");await p.A.put(`https://www.tourdefantasy.com/racer/draftlist?race_url=${e}`,this.racers,{headers:{Authorization:`Bearer ${t}`}})},async getAllDraftlist(e){const t=localStorage.getItem("token"),a=await p.A.get(`https://www.tourdefantasy.com/racer/alldraftlists?league_id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),l=k(),r=l.players,s=a.data;s.forEach((e=>{e.racer_list.forEach((e=>{e.player=null}))})),this.draftList=[],r.forEach((e=>{this.draftList.push(s.find((t=>t.user_strava_id==e.player_strava_id)))}))},insertBefore(e,t){let a=this.racers.find((t=>t.name==e)),l=this.racers.find((e=>e.name==t)),r=this.racers.indexOf(l),s=this.racers.indexOf(a);console.log(a+" "+l+" "+r+" "+s),this.racers.splice(s,1),this.racers.splice(r,0,a)},move(e,t){if(0==e&&"up"==t)return;if(e==this.racers.length-1&&"up"!=t)return;let a=this.racers.splice(e,1);"top"==t?this.racers.splice(0,0,a[0]):this.racers.splice("up"==t?e-1:e+1,0,a[0])}}}),k=(0,r.nY)("league",{state:()=>({league:{},players:[],race:{},leaguePlayer:{},tradeList:[],scoresForStage:[],stagePlayers:[],announcements:[],allLeagues:[]}),actions:{resetData(){this.players=[],this.race={},this.leaguePlayer={},this.tradeList=[],this.scoresForStage=[],this.stagePlayers=[],this.announcements=[],this.allLeagues=[]},async getLeagueList(){const e=localStorage.getItem("token"),t=await p.A.get("https://www.tourdefantasy.com/league",{headers:{Authorization:`Bearer ${e}`}});this.allLeagues=t.data},getPlayerByStravaId(e){return this.players.find((t=>t.player_strava_id==e))},getPlayerPositionByStravaId(e){return this.players.indexOf(this.players.find((t=>t.player_strava_id==e)))},shuffle(){let e=this.players.length;while(0!=e){let t=Math.floor(Math.random()*e);e--,[this.players[e],this.players[t]]=[this.players[t],this.players[e]]}},async submitDraft(){const e=localStorage.getItem("token");await p.A.put("https://www.tourdefantasy.com/league/draftresult",this.players.slice().reverse(),{headers:{Authorization:`Bearer ${e}`}})},async join(e,t){if(e){const a=localStorage.getItem("token"),l=await p.A.put(`https://www.tourdefantasy.com/league/join?code=${e}&nickname=${t}`,{},{headers:{Authorization:`Bearer ${a}`}});this.league=l.data,this.resetData()}},async getRace(){const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/race/url?url=${this.league.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});this.race=t.data},getStageNameByURL(e){let t=this.race.days.find((e=>{e.url}));return t?t.name:"--"},async getRaceScoreByStage(e){const t=localStorage.getItem("token"),a=await p.A.get(`https://www.tourdefantasy.com/racerScore/search?stage=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.scoresForStage=a.data;let l=Map.groupBy(this.scoresForStage,(({racer:e})=>e));const r=v();let s=this.players.slice();s.forEach((t=>{t.stage_scores&&t.stage_scores.find((t=>t.stage_url==e))?t.stageRacers=t.stage_scores.find((t=>t.stage_url==e)).racers.slice():t.stageRacers=t.active_racers.slice(),t.stageRacers.forEach((e=>{e.scores=null,l.has(e.url)&&(e.scores=l.get(e.url),l.delete(e.url))}))}));const n={player_nickname:"N/A",stageRacers:[]};l.forEach(((e,t)=>{let a=structuredClone(r.allRacers.find((e=>e.url==t)));a.scores=e,n.stageRacers.push(a)})),s.push(n);let o=[0,0,20,30,50];s.forEach((e=>{e.stageScore=0,e.jerseys=[],e.stageRacers.forEach((t=>{t.scores&&t.scores.forEach((t=>{e.stageScore+=t.point,0==t.point&&e.jerseys.push(t.category)}))})),e.stageScore+=o[e.jerseys.length]})),this.stagePlayers=s},async submitStageScore(e){let t=0,a=null;console.log("Calculating score for players: "+this.players),this.players.forEach((l=>{let r={stage_url:e,total_score:l.stageScore,racers:l.stageRacers};l.stageScore>t&&(t=l.stageScore,a=l.player_nickname),l.stage_scores||(l.stage_scores=[]);let s=l.stage_scores.findIndex((t=>t.stage_url==e));-1!=s?l.stage_scores.splice(s,1,r):l.stage_scores.push(r),l.current_score=l.stage_scores.reduce(((e,{total_score:t})=>e+t),0);const n=localStorage.getItem("token");p.A.put("https://www.tourdefantasy.com/league/leagueplayers",l,{headers:{Authorization:`Bearer ${n}`}}),l.stageScore=0,l.stageRacers=[]})),console.log(this.race.days);let l="New scores are in! <strong>"+a+"</strong> scored "+t;const r=localStorage.getItem("token");await p.A.post("https://www.tourdefantasy.com/league/announcement",{message:l,expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${r}`}})},async loadLeague(e){const t=localStorage.getItem("token"),a=await p.A.get(`https://www.tourdefantasy.com/league/id/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.league=a.data,this.resetData()},async getLeaguePlayers(e){const t=localStorage.getItem("token"),a=await p.A.get(`https://www.tourdefantasy.com/league/${e}/players`,{headers:{Authorization:`Bearer ${t}`}}),l=g();this.leaguePlayer=a.data.find((e=>e.player_strava_id==l.user.strava_id));let r=[a.data.length];a.data.forEach((e=>{r[this.league.players.indexOf(e.player_strava_id)]=e,e.stage_scores&&e.stage_scores.sort(((e,t)=>parseInt(t.stage_url.substring(t.stage_url.lastIndexOf("-")+1))-parseInt(e.stage_url.substring(e.stage_url.lastIndexOf("-")+1))))})),this.players=r,console.log("Players retrieved: "+this.players)},moveRoaster(e,t){let a=this.leaguePlayer.active_racers.concat(this.leaguePlayer.bench_racers),l=a.find((t=>t.name==e));this.leaguePlayer.active_racers?this.leaguePlayer.active_racers=this.leaguePlayer.active_racers.filter((t=>(console.log(t.name==e),t.name!==e))):this.leaguePlayer.active_racers=[],this.leaguePlayer.bench_racers?this.leaguePlayer.bench_racers=this.leaguePlayer.bench_racers.filter((t=>t.name!==e)):this.leaguePlayer.bench_racers=[],"active"==t?this.leaguePlayer.active_racers.push(l):this.leaguePlayer.bench_racers.push(l)},async submitRoaster(){const e=localStorage.getItem("token"),t=await p.A.put("https://www.tourdefantasy.com/league/leagueplayers",this.leaguePlayer,{headers:{Authorization:`Bearer ${e}`}});console.log("submit roaster: "+t),await p.A.post("https://www.tourdefantasy.com/league/announcement",{message:"<strong>"+this.leaguePlayer.player_nickname+"</strong> updated roster!",expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${e}`}}),200==t.status&&alert("Roster change successful.")},async submitTrade(e,t){e.player=this.leaguePlayer.player_strava_id.toString();const a=localStorage.getItem("token"),l=await p.A.post(`https://www.tourdefantasy.com/league/trade?league_id=${this.league.id}`,{fromRacer:e,toRacer:t},{headers:{Authorization:`Bearer ${a}`}});this.tradeList=l.data,await p.A.post("https://www.tourdefantasy.com/league/announcement",{message:"<strong>"+this.leaguePlayer.player_nickname+"</strong> submitted a trade request!",expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${a}`}})},async getTradeRequests(){const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/league/traderequests?league_id=${this.league.id}`,{headers:{Authorization:`Bearer ${e}`}});let a=t.data.slice();a.sort(((e,t)=>{let a=e.toRacer.ranking-t.toRacer.ranking;if(0==a){let a=this.players.indexOf(this.players.find((e=>e.player_strava_id==t.player_strava_id))),l=this.players.indexOf(this.players.find((t=>t.player_strava_id==e.player_strava_id)));return l-a}return a}));const l=[],r=[];a.forEach((e=>{-1==l.findIndex((t=>t.url==e.toRacer.url))&&-1==r.indexOf(e.player_strava_id)&&(l.push(e.toRacer),r.push(e.player_strava_id),e.selected=!0)})),this.tradeList=a},async getMultiTradeRequests(){const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/league/traderequests?league_id=${this.league.id}`,{headers:{Authorization:`Bearer ${e}`}});let a=t.data.slice();const l=this.league.players.slice(),r=Map.groupBy(a,(({player_strava_id:e})=>e)),s=[];while(r.size>0)l.forEach((e=>{let t=r.get(e);if(t){while(t.length){let e=t.shift();if(!s.includes(e.toRacer.url)&&!s.includes(e.fromRacer.url)){s.push(e.fromRacer.url),s.push(e.toRacer.url),e.selected=!0;break}}0==t.length&&r.delete(e)}}));this.tradeList=a},async cancelTradeRequest(e){const t=localStorage.getItem("token");await p.A.delete(`https://www.tourdefantasy.com/league/canceltrade?id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),await this.getTradeRequests()},async completeTradeRequests(){let e=[],t=this.tradeList.filter((e=>e.selected));t.forEach((t=>{let a=this.players.find((e=>e.player_strava_id==t.player_strava_id)),l=-1==a.active_racers.findIndex((e=>e.url==t.fromRacer.url))?a.bench_racers:a.active_racers;l.splice(l.findIndex((e=>e.url==t.fromRacer.url)),1,t.toRacer),e.push(a)})),e.sort(((e,t)=>{this.league.players.indexOf(t.player_strava_id),this.league.players.indexOf(e.player_strava_id)})),e.forEach((e=>{this.players.splice(this.players.indexOf(e),1),this.players.push(e)}));const a=localStorage.getItem("token");await p.A.put("https://www.tourdefantasy.com/league/completetrade",{accepted:t,players:this.players},{headers:{Authorization:`Bearer ${a}`}});let l=t.length>0?"Trade results: <br>":"No trade completed.";t.forEach((e=>{l=l.concat("<strong>"+this.getPlayerByStravaId(e.player_strava_id).player_nickname+"</strong> acquired <strong>"+e.toRacer.name+"</strong><br>")})),await p.A.post("https://www.tourdefantasy.com/league/announcement",{message:l,expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${a}`}})},async getAnnouncements(){const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/league/newannouncements?league_id=${this.league.id}&expiration=${Date.now()}`,{headers:{Authorization:`Bearer ${e}`}});this.announcements=t.data},async getAllAnnouncements(){const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/league/announcements?league_id=${this.league.id}`,{headers:{Authorization:`Bearer ${e}`}});this.announcements=t.data},parseChunk(e){const t=e.split(/\r\n\r\n|\r\r|\n\n/g);if(0===t.length)return;const a=[];for(const l of t){let e="";const t=l.split(/\n|\r|\r\n/g);let r="";for(const a of t){const t=/([^:]+)(?:: ?(.*))?/.exec(a);if(t){const a=t[1],l=t[2]||"";switch(a){case"event":e=l;break;case"data":r+=l,r+="\n";break;case"id":l.includes("\0")||(this.lastEventId=l);break}}}""!==r&&("\n"===r[r.length-1]&&(r=r.slice(0,-1)),a.push({eventType:e,data:r}))}return a}}}),h={class:"navbar navbar-expand-lg bg-dark border-bottom border-body","data-bs-theme":"dark"},m={class:"container-fluid"},y=(0,s.Lk)("a",{class:"navbar-brand",href:"#"},"TourDeFantasy",-1),L=(0,s.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s.Lk)("span",{class:"navbar-toggler-icon"})],-1),f={class:"collapse navbar-collapse",id:"navbarSupportedContent"},b={class:"navbar-nav me-auto mb-2 mb-lg-0"},_={class:"nav-item"},w={class:"nav-item"},C={key:0,class:"nav-item dropdown"},E={class:"dropdown-menu"},x={key:1,class:"nav-item"},R={key:2,class:"nav-item"},A={key:3,class:"nav-item"},X={key:4,class:"nav-item dropdown"},S=(0,s.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Profile ",-1),I={class:"dropdown-menu"},T={key:5,class:"nav-item dropdown"},K=(0,s.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Admin ",-1),F={class:"dropdown-menu"},P={class:"nav-item"},$={key:6,class:"nav-item"};var B={__name:"NavBar",setup(e){const t=g(),a=k(),l=(0,c.KR)([]),r=async()=>{const e=localStorage.getItem("token"),a=await p.A.get("https://www.tourdefantasy.com/league/leagueplayers",{headers:{Authorization:`Bearer ${e}`}});l.value=a.data.slice().filter((e=>e.player_strava_id==t.user.strava_id))};return(0,s.sV)((()=>{})),(e,n)=>{const o=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",h,[(0,s.Lk)("div",m,[y,L,(0,s.Lk)("div",f,[(0,s.Lk)("ul",b,[(0,s.Lk)("li",_,[(0,s.bF)(o,{class:"nav-link",to:"/leaguehome"},{default:(0,s.k6)((()=>[(0,s.eW)("Home")])),_:1})]),(0,s.Lk)("li",w,[(0,s.bF)(o,{class:"nav-link",to:"/leaguepreview"},{default:(0,s.k6)((()=>[(0,s.eW)("League Preview")])),_:1})]),(0,c.R1)(t).isAuthenticated?((0,s.uX)(),(0,s.CE)("li",C,[(0,s.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:r}," Leagues "),(0,s.Lk)("ul",E,[(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/createleague"},{default:(0,s.k6)((()=>[(0,s.eW)("Create League")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/joinleague"},{default:(0,s.k6)((()=>[(0,s.eW)("Join League")])),_:1})]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e},[(0,s.bF)(o,{class:"dropdown-item",to:{path:"/joinleague",query:{leagueId:e.league_id,nickname:e.player_nickname}}},{default:(0,s.k6)((()=>[(0,s.eW)(" → "+(0,d.v_)(e.player_nickname),1)])),_:2},1032,["to"])])))),128)),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/livedraft"},{default:(0,s.k6)((()=>[(0,s.eW)("Draft Party")])),_:1})])])])):(0,s.Q3)("",!0),(0,c.R1)(t).isAuthenticated&&(0,c.R1)(a).leaguePlayer.active_racers?((0,s.uX)(),(0,s.CE)("li",x,[(0,s.bF)(o,{class:"nav-link",to:"/roster"},{default:(0,s.k6)((()=>[(0,s.eW)("Roster")])),_:1})])):(0,s.Q3)("",!0),(0,c.R1)(t).isAuthenticated?((0,s.uX)(),(0,s.CE)("li",R,[(0,s.bF)(o,{class:"nav-link",to:"/fullscores"},{default:(0,s.k6)((()=>[(0,s.eW)("Full Scores")])),_:1})])):(0,s.Q3)("",!0),(0,c.R1)(t).isAuthenticated&&[13,14,15,16,17,18,19,20,21].includes((new Date).getHours())?((0,s.uX)(),(0,s.CE)("li",A,[(0,s.bF)(o,{class:"nav-link",to:"/trade"},{default:(0,s.k6)((()=>[(0,s.eW)("Trade")])),_:1})])):(0,s.Q3)("",!0),(0,c.R1)(t).isAuthenticated&&"impersonate"!=(0,c.R1)(t).user.username?((0,s.uX)(),(0,s.CE)("li",X,[S,(0,s.Lk)("ul",I,[(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/profile"},{default:(0,s.k6)((()=>[(0,s.eW)("Info")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/stats"},{default:(0,s.k6)((()=>[(0,s.eW)("Stats")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/activities"},{default:(0,s.k6)((()=>[(0,s.eW)("Activities")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/routes"},{default:(0,s.k6)((()=>[(0,s.eW)("Routes")])),_:1})])])])):(0,s.Q3)("",!0),(0,c.R1)(t).isAuthenticated&&(0,c.R1)(t).user.roles.includes("admin")?((0,s.uX)(),(0,s.CE)("li",T,[K,(0,s.Lk)("ul",F,[(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/racecenter"},{default:(0,s.k6)((()=>[(0,s.eW)("Race Center")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/leaguecenter"},{default:(0,s.k6)((()=>[(0,s.eW)("League Center")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/rundraft"},{default:(0,s.k6)((()=>[(0,s.eW)("Run Draft")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/runtrade"},{default:(0,s.k6)((()=>[(0,s.eW)("Run Trade")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/runscore"},{default:(0,s.k6)((()=>[(0,s.eW)("Run Score")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/autocenter"},{default:(0,s.k6)((()=>[(0,s.eW)("Automation Center")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/createleague"},{default:(0,s.k6)((()=>[(0,s.eW)("Create League")])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(o,{class:"dropdown-item",to:"/runlivedraft"},{default:(0,s.k6)((()=>[(0,s.eW)("Run Draft Party")])),_:1})])])])):(0,s.Q3)("",!0),(0,s.Lk)("li",P,[(0,s.bF)(o,{class:"nav-link",to:"/about"},{default:(0,s.k6)((()=>[(0,s.eW)("Rules")])),_:1})]),(0,c.R1)(t).isAuthenticated?((0,s.uX)(),(0,s.CE)("li",$,[(0,s.bF)(o,{class:"nav-link",to:"/logout"},{default:(0,s.k6)((()=>[(0,s.eW)("Logout")])),_:1})])):(0,s.Q3)("",!0)])])])])}}};const D=B;var M=D,q=a(1387);const j=(0,r.nY)("auto",{state:()=>({tasks:[],currentTask:null,isAutoMode:!1}),actions:{flip(){this.isAutoMode=!this.isAutoMode},startTask(){if(this.currentTask)return null;let e=this.tasks.find((e=>!e.completed&&new Date>e.time));return e&&(this.currentTask=e,e.inProgress=!0),console.log("return "+e),e},completeTask(){this.currentTask.completed=!0,this.currentTask=null}}}),z={key:0,style:{color:"red"}},W=(0,s.Lk)("b",null,"Auto",-1),V=[W];var N={__name:"AutoBot",setup(e){const t=j(),a=(0,q.rd)(),l=(0,c.KR)(0),r=()=>{if(t.isAutoMode){let e=t.startTask();console.log("found task: "+e),e&&a.push(e.path)}};return(0,s.sV)((async()=>{let e=setInterval(r,3e5);console.log(`autobot ${e} is loaded.`),l.value=e})),(e,a)=>(0,c.R1)(t).isAutoMode?((0,s.uX)(),(0,s.CE)("h1",z,V)):(0,s.Q3)("",!0)}};const O=N;var H=O,Q={name:"App",components:{NavBar:M,AutoBot:H}},U=a(1241);const J=(0,U.A)(Q,[["render",u]]);var Y=J;const G=e=>((0,s.Qi)("data-v-61f91bf4"),e=e(),(0,s.jt)(),e),Z={id:"intro",class:"bg-image shadow-2-strong"},ee={class:"container d-flex align-items-center justify-content-center text-center h-100"},te={class:"card text-bg-dark w-50 w-md-50"},ae=G((()=>(0,s.Lk)("h2",{class:"card-header"},"Sign In",-1))),le={class:"card-body"},re=G((()=>(0,s.Lk)("img",{src:"btn_strava_connectwith_orange.png",class:"img-fluid"},null,-1))),se=[re];function ne(e,t,a,l,r,n){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[ae,(0,s.Lk)("div",le,[(0,s.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>n.login&&n.login(...e))},se)])])])])])}var oe={async created(){const e=localStorage.getItem("token");if(e)try{const e=g(),t=k();await e.login(),e.user.current_league_id?(await t.loadLeague(e.user.current_league_id),this.$router.push({name:"LeagueHome"})):this.$router.push({name:"JoinLeague"})}catch(t){console.error("Error during auto login:",t),localStorage.removeItem("token")}},methods:{login(){window.location.href="https://www.tourdefantasy.com/login"}}};const ie=(0,U.A)(oe,[["render",ne],["__scopeId","data-v-61f91bf4"]]);var ue=ie;const ce=(0,s.Lk)("p",null,"Logging in...",-1),de=[ce];function pe(e,t,a,l,r,n){return(0,s.uX)(),(0,s.CE)("div",null,de)}a(4603),a(7566),a(8721);var ge={async created(){const e=new URLSearchParams(window.location.search),t=e.get("code");if(t)try{const e=g(),a=k();await e.login(t),e.user.current_league_id?(await a.loadLeague(e.user.current_league_id),this.$router.push({name:"LeagueHome"})):this.$router.push({name:"JoinLeague"})}catch(a){console.error("Error during callback:",a)}}};const ve=(0,U.A)(ge,[["render",pe]]);var ke=ve;const he=(0,s.Lk)("h1",null,"My Activities",-1);function me(e,t,a,l,r,n){return(0,s.uX)(),(0,s.CE)("div",null,[he,(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.activities,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},(0,d.v_)(e.name),1)))),128))])])}var ye={data(){return{activities:[]}},async created(){const e=localStorage.getItem("token");if(e)try{const t=await p.A.get("https://www.tourdefantasy.com/activities",{headers:{Authorization:`Bearer ${e}`}});this.activities=t.data}catch(t){console.error("Error fetching activities:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const Le=(0,U.A)(ye,[["render",me]]);var fe=Le;const be=(0,s.Lk)("h1",null,"My Routes",-1),_e=(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Distance"),(0,s.Lk)("th",null,"Elevation")],-1);function we(e,t,a,l,r,n){return(0,s.uX)(),(0,s.CE)("div",null,[be,(0,s.Lk)("table",null,[_e,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.routes,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,d.v_)(e.name),1),(0,s.Lk)("td",null,(0,d.v_)(e.distance),1),(0,s.Lk)("td",null,(0,d.v_)(e.elevation_gain),1)])))),128))])])}var Ce={data(){return{routes:[]}},async created(){const e=localStorage.getItem("token");if(e)try{const t=await p.A.get("https://www.tourdefantasy.com/routes",{headers:{Authorization:`Bearer ${e}`}});this.routes=t.data}catch(t){console.error("Error fetching routes:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const Ee=(0,U.A)(Ce,[["render",we]]);var xe=Ee;const Re=(0,s.Lk)("h1",null,"My Stats",-1),Ae=(0,s.Lk)("td",null,"Longest distance",-1),Xe=(0,s.Lk)("td",null,"Most elevation",-1);function Se(e,t,a,l,r,n){const o=(0,s.g2)("RideTotal");return(0,s.uX)(),(0,s.CE)("div",null,[Re,(0,s.bF)(o,{title:"All Time",rideTotals:r.allTimeTotals},null,8,["rideTotals"]),(0,s.bF)(o,{title:"Last 4 Weeks",rideTotals:r.recentTotals},null,8,["rideTotals"]),(0,s.bF)(o,{title:"This year",rideTotals:r.yearTotals},null,8,["rideTotals"]),(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[Ae,(0,s.Lk)("td",null,(0,d.v_)(r.stats.biggest_ride_distance),1)]),(0,s.Lk)("tr",null,[Xe,(0,s.Lk)("td",null,(0,d.v_)(r.stats.biggest_climb_elevation_gain),1)])])])}const Ie=(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Activities"),(0,s.Lk)("th",null,"Distance"),(0,s.Lk)("th",null,"Elev Gain"),(0,s.Lk)("th",null,"Time")],-1);function Te(e,t,a,l,r,n){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("h3",null,(0,d.v_)(a.title),1),(0,s.Lk)("table",null,[Ie,(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,d.v_)(a.rideTotals.count),1),(0,s.Lk)("td",null,(0,d.v_)(a.rideTotals.distance),1),(0,s.Lk)("td",null,(0,d.v_)(a.rideTotals.elevation_gain),1),(0,s.Lk)("td",null,(0,d.v_)(a.rideTotals.moving_time),1)])])])}var Ke={props:{title:String,rideTotals:Object}};const Fe=(0,U.A)(Ke,[["render",Te]]);var Pe=Fe,$e={data(){return{stats:{},allTimeTotals:{},recentTotals:{},yearTotals:{}}},components:{RideTotal:Pe},async created(){const e=localStorage.getItem("token");if(e)try{const t=await p.A.get("https://www.tourdefantasy.com/stats",{headers:{Authorization:`Bearer ${e}`}});this.stats=t.data,this.allTimeTotals=t.data.all_ride_totals,this.recentTotals=t.data.recent_ride_totals,this.yearTotals=t.data.ytd_ride_totals}catch(t){console.error("Error fetching stats:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const Be=(0,U.A)($e,[["render",Se]]);var De=Be;const Me=(0,s.Lk)("p",null,"Logging out...",-1),qe=[Me];function je(e,t,a,l,r,n){return(0,s.uX)(),(0,s.CE)("div",null,qe)}var ze={async created(){const e=g();e.logout(),this.$router.push({name:"Login"})}};const We=(0,U.A)(ze,[["render",je]]);var Ve=We;const Ne=(0,s.Lk)("h1",null,"My Profile",-1),Oe=(0,s.Lk)("td",null,"User Name",-1),He=(0,s.Lk)("td",null,"First Name",-1),Qe=(0,s.Lk)("td",null,"Last Name",-1),Ue=(0,s.Lk)("td",null,"Location",-1),Je=(0,s.Lk)("td",null,"Roles",-1),Ye=(0,s.Lk)("td",null,"Roles",-1),Ge=["id","value"],Ze=["for"],et=(0,s.Lk)("td",null,"Profile Pic",-1),tt=["src"];var at={__name:"ProfileView",setup(e){const t=g(),a=(0,c.KR)(t.user),r=["user","super","admin"];return(0,s.sV)((()=>{})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[Ne,(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[Oe,(0,s.Lk)("td",null,(0,d.v_)(a.value.username),1)]),(0,s.Lk)("tr",null,[He,(0,s.Lk)("td",null,(0,d.v_)(a.value.firstname),1)]),(0,s.Lk)("tr",null,[Qe,(0,s.Lk)("td",null,(0,d.v_)(a.value.lastname),1)]),(0,s.Lk)("tr",null,[Ue,(0,s.Lk)("td",null,(0,d.v_)(a.value.city)+", "+(0,d.v_)(a.value.state),1)]),(0,s.Lk)("tr",null,[Je,(0,s.Lk)("td",null,(0,d.v_)(a.value.roles),1)]),(0,s.Lk)("tr",null,[Ye,(0,s.Lk)("td",null,[(0,s.Lk)("ul",null,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(r,(e=>(0,s.Lk)("li",{key:e.id},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:e,value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.roles=e),disabled:"disabled"},null,8,Ge),[[l.lH,a.value.roles]]),(0,s.Lk)("label",{for:e.id},(0,d.v_)(e),9,Ze)]))),64))])])]),(0,s.Lk)("tr",null,[et,(0,s.Lk)("td",null,[(0,s.Lk)("img",{src:a.value.profile_pic},null,8,tt)])])])]))}};const lt=at;var rt=lt;const st=(0,s.Lk)("h1",{class:"mt-4"},"Join League",-1),nt={class:"container px-4 text-center"},ot={class:"row gx-5 mb-3"},it={class:"col"},ut=(0,s.Lk)("label",{for:"inputPassword",class:"form-label"},"League Password",-1),ct={class:"row gx-5 mb-3"},dt={class:"col"},pt=(0,s.Lk)("label",{for:"exampleInputPassword1",class:"form-label"},"Nickname",-1),gt={class:"row gx-5"},vt={class:"col"};var kt={__name:"JoinLeagueView",setup(e){const t=g(),a=(0,q.rd)(),r=k(),n=(0,c.KR)(t.user),o=(0,c.KR)(""),i=(0,c.KR)(""),u=async()=>{await r.join(o.value,i.value,n.value.strava_id),a.push({name:"LeagueHome"})};return(0,s.sV)((async()=>{const e=new URLSearchParams(window.location.search).get("leagueId");if(e){const t=new URLSearchParams(window.location.search).get("nickname"),l=localStorage.getItem("token"),s=await p.A.get(`https://www.tourdefantasy.com/league/id/${e}`,{headers:{Authorization:`Bearer ${l}`}});await r.join(s.data.password,t,n.value.strava_id),a.push({name:"LeagueHome"})}})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[st,(0,s.Lk)("form",null,[(0,s.Lk)("div",nt,[(0,s.Lk)("div",ot,[(0,s.Lk)("div",it,[ut,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),class:"form-control",id:"inputPassword","aria-describedby":"emailHelp"},null,512),[[l.Jo,o.value]])])]),(0,s.Lk)("div",ct,[(0,s.Lk)("div",dt,[pt,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),class:"form-control",id:"exampleInputPassword1"},null,512),[[l.Jo,i.value]])])]),(0,s.Lk)("div",gt,[(0,s.Lk)("div",vt,[(0,s.Lk)("button",{onClick:(0,l.D$)(u,["prevent"]),class:"btn btn-success"},"Join")])])])])]))}};const ht=kt;var mt=ht;const yt=e=>((0,s.Qi)("data-v-0296de82"),e=e(),(0,s.jt)(),e),Lt={class:"mt-4"},ft=yt((()=>(0,s.Lk)("button",{type:"button",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," League Info ",-1))),bt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},_t={class:"modal-dialog"},wt={class:"modal-content"},Ct=yt((()=>(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"League Info"),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Et={class:"modal-body"},xt=yt((()=>(0,s.Lk)("td",null,"Id",-1))),Rt=yt((()=>(0,s.Lk)("td",null,"Name",-1))),At=yt((()=>(0,s.Lk)("td",null,"Password",-1))),Xt=yt((()=>(0,s.Lk)("td",null,"Active Race",-1))),St=["href"],It=yt((()=>(0,s.Lk)("h3",{class:"mt-4 text-success",style:{"text-decoration":"underline"}},"Newsfeed",-1))),Tt={key:0},Kt={class:"container w-75 h-50"},Ft={class:"announcements-container"},Pt=["innerHTML"],$t={class:"table mt-4"},Bt=yt((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"#"),(0,s.Lk)("th",{scope:"col"},"Username"),(0,s.Lk)("th",{scope:"col"},"Points")])],-1))),Dt={key:0},Mt={key:1};var qt={__name:"LeagueHome",setup(e){const t=k(),a=(0,c.KR)(t.league),l=(0,s.EW)((()=>{let e=t.players.slice();return e.sort(((e,t)=>t.current_score-e.current_score)),e})),r=(0,s.EW)((()=>t.announcements.slice().reverse())),n=t.getLeaguePlayers;return(0,s.sV)((()=>{n(a.value.id),t.getRace(),t.getAnnouncements()})),(e,n)=>{const o=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("h1",Lt,(0,d.v_)(a.value.name),1),ft,(0,s.Lk)("div",bt,[(0,s.Lk)("div",_t,[(0,s.Lk)("div",wt,[Ct,(0,s.Lk)("div",Et,[(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[xt,(0,s.Lk)("td",null,(0,d.v_)(a.value.id),1)]),(0,s.Lk)("tr",null,[Rt,(0,s.Lk)("td",null,(0,d.v_)(a.value.name),1)]),(0,s.Lk)("tr",null,[At,(0,s.Lk)("td",null,(0,d.v_)(a.value.password),1)]),(0,s.Lk)("tr",null,[Xt,(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:a.value.active_race_url,target:"prosite"},(0,d.v_)(a.value.activeRace),9,St)])])])])])])]),(0,s.bF)(o,{class:"nav-link text-decoration-none",to:"/newsfeed"},{default:(0,s.k6)((()=>[It])),_:1}),0!=r.value.length?((0,s.uX)(),(0,s.CE)("div",Tt,[(0,s.Lk)("div",Kt,[(0,s.Lk)("div",Ft,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"alert alert-success alert-dismissible fade show",role:"alert"},[(0,s.Lk)("span",{innerHTML:e.message},null,8,Pt)])))),128))])])])):(0,s.Q3)("",!0),(0,s.Lk)("table",$t,[Bt,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.player_strava_id},[(0,s.Lk)("td",null,(0,d.v_)(a+1),1),e.player_strava_id!=(0,c.R1)(t).leaguePlayer.player_strava_id?((0,s.uX)(),(0,s.CE)("td",Dt,[(0,s.bF)(o,{to:{path:"/rosterview",query:{userId:e.player_strava_id}}},{default:(0,s.k6)((()=>[(0,s.eW)((0,d.v_)(e.player_nickname),1)])),_:2},1032,["to"])])):((0,s.uX)(),(0,s.CE)("td",Mt,[(0,s.bF)(o,{to:{path:"/roster"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,d.v_)(e.player_nickname),1)])),_:2},1024)])),(0,s.Lk)("td",null,[(0,s.bF)(o,{to:{path:"/detailscore",query:{userId:e.player_strava_id}}},{default:(0,s.k6)((()=>[(0,s.eW)((0,d.v_)(e.current_score),1)])),_:2},1032,["to"])])])))),128))])])])}}};const jt=(0,U.A)(qt,[["__scopeId","data-v-0296de82"]]);var zt=jt;const Wt=e=>((0,s.Qi)("data-v-ed29272a"),e=e(),(0,s.jt)(),e),Vt={key:0},Nt={class:"table mt-4"},Ot=Wt((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"#"),(0,s.Lk)("th",{scope:"col"},"Username"),(0,s.Lk)("th",{scope:"col"},"Points")])],-1))),Ht=["data-bs-target"],Qt=["id"],Ut={class:"modal-dialog"},Jt={class:"modal-content"},Yt={class:"modal-header"},Gt={class:"modal-title fs-5",id:"exampleModalLabel"},Zt={class:"modal-body"},ea={class:"d-flex justify-content-center mt-3"},ta={class:"list-group"},aa={class:"d-flex align-items-center"},la=Wt((()=>(0,s.Lk)("div",{class:"image-parent"},[(0,s.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),ra={class:"content-wrapper"},sa=["href"],na={key:0},oa={key:1},ia={class:"list-group"},ua={class:"d-flex align-items-center"},ca=Wt((()=>(0,s.Lk)("div",{class:"image-parent"},[(0,s.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),da={class:"content-wrapper"},pa=["href"],ga={key:0},va={key:1},ka=Wt((()=>(0,s.Lk)("div",{class:"btn-group ms-2",role:"group","aria-label":"Basic example"},null,-1))),ha=["data-bs-target"],ma=["id"],ya={class:"modal-dialog"},La={class:"modal-content"},fa={class:"modal-header"},ba={class:"modal-title fs-5",id:"exampleModalLabel2"},_a=Wt((()=>(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),wa={class:"modal-body"},Ca=["href"],Ea={class:"table"},xa=Wt((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"Racer"),(0,s.Lk)("th",{scope:"col"},"Points Earned"),(0,s.Lk)("th",{scope:"col"},"How Earned")])],-1))),Ra={key:0},Aa={key:0},Xa=Wt((()=>(0,s.Lk)("img",{src:"/white.png",alt:"White Jersey",style:{width:"20px",height:"20px"}},null,-1))),Sa=[Xa],Ia={key:1},Ta=Wt((()=>(0,s.Lk)("img",{src:"/yellow.png",alt:"Yellow Jersey",style:{width:"20px",height:"20px"}},null,-1))),Ka=[Ta],Fa={key:2},Pa=Wt((()=>(0,s.Lk)("img",{src:"/green.png",alt:"Green Jersey",style:{width:"20px",height:"20px"}},null,-1))),$a=[Pa],Ba={key:3},Da=Wt((()=>(0,s.Lk)("img",{src:"/polkadot.png",alt:"Polka-dot Jersey",style:{width:"20px",height:"20px"}},null,-1))),Ma=[Da],qa={key:0},ja={key:0},za={key:1},Wa={key:0},Va={key:0},Na={class:"border-bottom border-2"},Oa=Wt((()=>(0,s.Lk)("th",{scope:"row"},"Total",-1))),Ha=Wt((()=>(0,s.Lk)("td",null,null,-1)));var Qa={__name:"LeaguePreviewPopup",props:{leagueId:{type:String,required:!0}},setup(e){const t=(0,c.KR)([]),a=(0,c.KR)({}),l=(0,s.EW)((()=>{let e=t.value.slice();return e.sort(((e,t)=>t.current_score-e.current_score)),e})),r=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/league/id/${k.leagueId}`,{headers:{Authorization:`Bearer ${e}`}});a.value=t.data},n=async()=>{const e=localStorage.getItem("token"),a=await p.A.get(`https://www.tourdefantasy.com/league/${k.leagueId}/players`,{headers:{Authorization:`Bearer ${e}`}});t.value=a.data},o=(0,c.KR)([]),i=(0,c.KR)(new Map),u=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});o.value=t.data;let l=Map.groupBy(o.value,(({stage:e})=>e));l.forEach(((e,t,a)=>{a.set(t,Map.groupBy(e,(({racer:e})=>e)))})),i.value=l},g=(0,c.KR)(null),v=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/race/url?url=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});console.log(t.data),g.value=Map.groupBy(t.data.days,(({url:e})=>e))};(0,s.sV)((async()=>{console.log("Mounted"),await r(),await n(),await u(),await v()}));const k=e;return(e,t)=>g.value?((0,s.uX)(),(0,s.CE)("div",Vt,[(0,s.Lk)("table",Nt,[Ot,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((a,l)=>((0,s.uX)(),(0,s.CE)("tr",{key:l},[(0,s.Lk)("td",null,(0,d.v_)(l+1),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{type:"button",class:"btn btn-link p-0 m-0","data-bs-toggle":"modal","data-bs-target":"#"+a.player_strava_id},(0,d.v_)(a.player_nickname),9,Ht)]),(0,s.Lk)("div",{class:"modal fade",id:a.player_strava_id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,s.Lk)("div",Ut,[(0,s.Lk)("div",Jt,[(0,s.Lk)("div",Yt,[(0,s.Lk)("h1",Gt,(0,d.v_)(a.player_nickname)+"'s Roster",1),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t)),"aria-label":"Close"})]),(0,s.Lk)("div",Zt,[(0,s.Lk)("div",ea,[(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",ta,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.active_racers,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,s.Lk)("div",aa,[la,(0,s.Lk)("div",ra,[(0,s.Lk)("a",{href:e.url,target:"prosite"},[(0,s.Lk)("strong",null,(0,d.v_)(e.name),1)],8,sa),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",na,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",oa," None"))])])])))),128))])])])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",ia,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.bench_racers,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center"},[(0,s.Lk)("div",ua,[ca,(0,s.Lk)("div",da,[(0,s.Lk)("a",{href:e.url,target:"prosite"},[(0,s.Lk)("strong",null,(0,d.v_)(e.name),1)],8,pa),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",ga,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",va," None"))])]),ka])))),128))])])])])])])])])])],8,Qt),(0,s.Lk)("td",null,[(0,s.Lk)("button",{type:"button",class:"btn btn-link p-0 m-0","data-bs-toggle":"modal","data-bs-target":"#"+a.id},(0,d.v_)(a.current_score),9,ha)]),(0,s.Lk)("div",{class:"modal fade",id:a.id,tabindex:"-1","aria-labelledby":"exampleModalLabel2","aria-hidden":"true"},[(0,s.Lk)("div",ya,[(0,s.Lk)("div",La,[(0,s.Lk)("div",fa,[(0,s.Lk)("h1",ba,"Scores for "+(0,d.v_)(a.player_nickname),1),_a]),(0,s.Lk)("div",wa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.stage_scores,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[(0,s.Lk)("h2",null,[(0,s.Lk)("a",{href:e.stage_url,target:"prosite"},(0,d.v_)(g.value.get(e.stage_url)[0].name),9,Ca)]),(0,s.Lk)("table",Ea,[xa,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.racers,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.url},[(0,s.Lk)("td",null,[(0,s.Lk)("b",null,(0,d.v_)(t.name),1),i.value.get(e.stage_url)?((0,s.uX)(),(0,s.CE)("span",Ra,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value.get(e.stage_url).get(t.url),(e=>((0,s.uX)(),(0,s.CE)("span",{key:e},["white"===e.category?((0,s.uX)(),(0,s.CE)("span",Aa,Sa)):(0,s.Q3)("",!0),"yellow"===e.category?((0,s.uX)(),(0,s.CE)("span",Ia,Ka)):(0,s.Q3)("",!0),"green"===e.category?((0,s.uX)(),(0,s.CE)("span",Fa,$a)):(0,s.Q3)("",!0),"polkadot"===e.category?((0,s.uX)(),(0,s.CE)("span",Ba,Ma)):(0,s.Q3)("",!0)])))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,[i.value.get(e.stage_url)?((0,s.uX)(),(0,s.CE)("div",qa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value.get(e.stage_url).get(t.url),(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?0!==e.point?((0,s.uX)(),(0,s.CE)("span",za,(0,d.v_)(e.point),1)):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",ja,(0,d.v_)(e.point),1))])))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,[i.value.get(e.stage_url)?((0,s.uX)(),(0,s.CE)("div",Wa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value.get(e.stage_url).get(t.url),(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",Va,(0,d.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1))])))),128))])):(0,s.Q3)("",!0)])])))),128)),(0,s.Lk)("tr",Na,[Oa,(0,s.Lk)("td",null,(0,d.v_)(e.total_score),1),Ha])])])])))),128))])])])],8,ma)])))),128))])])])):(0,s.Q3)("",!0)}};const Ua=(0,U.A)(Qa,[["__scopeId","data-v-ed29272a"]]);var Ja=Ua;const Ya={class:"container mt-4"},Ga=(0,s.Lk)("h1",{class:"mt-4"},"Preview",-1),Za={class:"row"},el={class:"card-body"},tl={class:"card-title"},al=(0,s.Lk)("td",null,"Active Race:",-1),ll=["href"],rl=(0,s.Lk)("td",null,"Number of Players:",-1);var sl={__name:"LeaguePreview",setup(e){const t=k(),a=(0,s.EW)((()=>t.allLeagues));return(0,s.sV)((()=>{t.getLeagueList()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",Ya,[Ga,(0,s.Lk)("div",Za,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"card",style:{width:"18rem"}},[(0,s.Lk)("div",el,[(0,s.Lk)("h5",tl,[(0,s.Lk)("strong",null,(0,d.v_)(e.name),1)]),(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[al,(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:e.active_race_url,target:"prosite"},(0,d.v_)(e.activeRace),9,ll)])]),(0,s.Lk)("tr",null,[rl,(0,s.Lk)("td",null,[(0,s.Lk)("p",null,(0,d.v_)(e.players.length),1)])])]),(0,s.Lk)("div",null,[(0,s.bF)(Ja,{leagueId:e.id},null,8,["leagueId"])])])])))),128))])]))}};const nl=sl;var ol=nl;const il=e=>((0,s.Qi)("data-v-05887c48"),e=e(),(0,s.jt)(),e),ul=il((()=>(0,s.Lk)("h1",{class:"mt-4"},"Draft List",-1))),cl={class:"d-flex justify-content-center mt-3"},dl={class:"list-group"},pl=["onDragstart","onDragenter"],gl={class:"d-flex align-items-center flex-grow-1"},vl=il((()=>(0,s.Lk)("div",{class:"image-parent"},[(0,s.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),kl={class:"content-wrapper"},hl=["href"],ml={key:0},yl={key:1},Ll={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},fl={class:"border-end"},bl=["onClick","disabled"],_l=["onClick","disabled"],wl=["onClick","disabled"];var Cl={__name:"DraftListView",setup(e){const t=k(),a=v(),r=(0,c.KR)(t.league),n=(0,s.EW)((()=>a.racers)),o=a.loadDraftlist,i=(0,c.KR)("");function u(e,t){i.value=t.name}function p(e,t){console.log("start dragging "+t.name),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("racerName",t.name)}function g(e){let t=e.dataTransfer.getData("racerName");i.value!=t&&a.insertBefore(t,i.value),i.value="",e.preventDefault()}function h(){a.updateDraftlist(r.value.active_race_url)}return(0,s.sV)((()=>{o(r.value.active_race_url)})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[ul,(0,s.eW)(" "+(0,d.v_)(i.value)+" ",1),(0,s.Lk)("div",cl,[(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:h},"Save")])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("div",{onDrop:t[0]||(t[0]=e=>g(e)),class:"drop-zone",onDragover:t[1]||(t[1]=(0,l.D$)((()=>{}),["prevent"]))},[(0,s.Lk)("ul",dl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:e,class:"list-group-item d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>p(t,e),onDragenter:t=>u(t,e)},[(0,s.Lk)("div",gl,[vl,(0,s.Lk)("div",kl,[(0,s.Lk)("a",{href:e.url,target:"prosite"},[(0,s.Lk)("strong",null,(0,d.v_)(e.name),1)],8,hl),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",ml,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",yl," None"))])]),(0,s.Lk)("div",Ll,[(0,s.Lk)("div",fl,[(0,s.Lk)("button",{onClick:e=>(0,c.R1)(a).move(t,"up"),type:"button",class:"btn btn-success",disabled:0===t},"↑",8,bl)]),(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:e=>(0,c.R1)(a).move(t,"down"),type:"button",class:"btn btn-success",disabled:t===n.value.length-1},"↓",8,_l)]),(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:e=>(0,c.R1)(a).move(t,"top"),type:"button",class:"btn btn-success",disabled:0===t},"top",8,wl)])])],40,pl)))),128))])],32)])])])])]))}};const El=(0,U.A)(Cl,[["__scopeId","data-v-05887c48"]]);var xl=El;const Rl=e=>((0,s.Qi)("data-v-ae7966f8"),e=e(),(0,s.jt)(),e),Al=Rl((()=>(0,s.Lk)("h1",{class:"mt-4"},"My Roster",-1))),Xl={class:"d-flex justify-content-center mt-3"},Sl=["disabled"],Il={class:"list-group"},Tl=["onDragstart"],Kl={class:"d-flex align-items-center"},Fl={class:"d-flex flex-column align-items-center"},Pl=["src"],$l={class:"text-muted text-center",style:{"font-size":"13px"}},Bl={class:"content-wrapper"},Dl={class:"card-title px-2"},Ml=["href"],ql={key:0,class:"card-text px-2"},jl={key:1,class:"card-text px-2"},zl={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},Wl=["onClick"],Vl={class:"list-group"},Nl=["onDragstart"],Ol={class:"d-flex align-items-center"},Hl={class:"d-flex flex-column align-items-center"},Ql=["src"],Ul={class:"text-muted text-center",style:{"font-size":"13px"}},Jl={class:"content-wrapper"},Yl={class:"card-title px-2"},Gl=["href"],Zl={key:0,class:"card-text px-2"},er={key:1,class:"card-text px-2"},tr={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},ar={class:"border-end"},lr=["onClick"];var rr={__name:"RosterView",setup(e){const t=k(),a=(0,s.EW)((()=>t.leaguePlayer.active_racers?t.leaguePlayer.active_racers:[])),r=(0,s.EW)((()=>t.leaguePlayer.bench_racers?t.leaguePlayer.bench_racers:[]));function n(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("racerName",t.name)}function o(e,a){const l=e.dataTransfer.getData("racerName");t.moveRoaster(l,a),e.preventDefault()}return(e,i)=>{const u=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[Al,(0,s.Lk)("div",Xl,[(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:i[0]||(i[0]=e=>(0,c.R1)(t).submitRoaster()),disabled:8!=a.value.length||(new Date).getHours()>5&&(new Date).getHours()<13},"Save",8,Sl),(0,s.bF)(u,{class:"btn btn-outline-success btn-lg mb-3",to:"/trade"},{default:(0,s.k6)((()=>[(0,s.eW)("Trade")])),_:1})])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("div",{onDrop:i[1]||(i[1]=e=>o(e,"active")),onDragover:i[2]||(i[2]=(0,l.D$)((()=>{}),["prevent"]))},[(0,s.Lk)("ul",Il,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>n(t,e)},[(0,s.Lk)("div",Kl,[(0,s.Lk)("div",Fl,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Pl),(0,s.Lk)("p",$l,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",Bl,[(0,s.Lk)("h5",Dl,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,Ml)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",ql,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",jl,"None"))])]),(0,s.Lk)("div",zl,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:a=>(0,c.R1)(t).moveRoaster(e.name,"bench"),type:"button",class:"btn btn-success"},"↓",8,Wl)])])],40,Tl)))),128))])],32)])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("div",{onDrop:i[3]||(i[3]=e=>o(e,"bench")),class:"drop-zone",onDragover:i[4]||(i[4]=(0,l.D$)((()=>{}),["prevent"]))},[(0,s.Lk)("ul",Vl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>n(t,e)},[(0,s.Lk)("div",Ol,[(0,s.Lk)("div",Hl,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Ql),(0,s.Lk)("p",Ul,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",Jl,[(0,s.Lk)("h5",Yl,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,Gl)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",Zl,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",er,"None"))])]),(0,s.Lk)("div",tr,[(0,s.Lk)("div",ar,[(0,s.Lk)("button",{onClick:a=>(0,c.R1)(t).moveRoaster(e.name,"active"),type:"button",class:"btn btn-success"},"↑",8,lr)])])],40,Nl)))),128))])],32)])])])])])}}};const sr=(0,U.A)(rr,[["__scopeId","data-v-ae7966f8"]]);var nr=sr;const or=e=>((0,s.Qi)("data-v-b3c3a2f2"),e=e(),(0,s.jt)(),e),ir=or((()=>(0,s.Lk)("h1",null,"League",-1))),ur=or((()=>(0,s.Lk)("td",null,"League Id",-1))),cr=or((()=>(0,s.Lk)("td",null,"League Name",-1))),dr=or((()=>(0,s.Lk)("td",null,"Active Race",-1))),pr=["href"],gr=or((()=>(0,s.Lk)("h2",null,"Player Draft Lists",-1))),vr=["disabled"],kr=["disabled"];var hr={__name:"RunDraftView",setup(e){const t=k(),a=v(),l=(0,c.KR)(t.league),r=(0,s.EW)((()=>t.players)),n=(0,s.EW)((()=>a.draftList)),o=a.getAllDraftlist;function i(){t.shuffle(),o(l.value.id),u.value=1}(0,s.sV)((()=>{o(l.value.id)}));const u=(0,c.KR)(1);function p(){if(13==u.value)return;const e=n.value,t=u.value%2==1?e:e.slice().reverse();t.forEach((e=>{let a=e.racer_list.find((e=>!e.player));t.forEach((t=>{let l=t.racer_list.find((e=>e.name==a.name));l.player=e.user_strava_id.toString()}))})),u.value++}function g(){const e=r.value,a=n.value;e.forEach(((e,t)=>{const l=a[t].racer_list.filter((t=>t.player==e.player_strava_id));console.log(e.player_nickname+": "+l.length),e.active_racers=l.slice(0,8),e.bench_racers=l.slice(8)})),t.submitDraft()}function h(e,t){return e.player?e.player==t.user_strava_id?"own":"taken":""}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[ir,(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[ur,(0,s.Lk)("td",null,(0,d.v_)(l.value.id),1)]),(0,s.Lk)("tr",null,[cr,(0,s.Lk)("td",null,(0,d.v_)(l.value.name),1)]),(0,s.Lk)("tr",null,[dr,(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:l.value.active_race_url,target:"prosite"},(0,d.v_)(l.value.activeRace),9,pr)])])]),gr,(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>i())},"Randomize Draft Order "),(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>p()),disabled:u.value>12},"Draft! "+(0,d.v_)(u.value),9,vr),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>g()),disabled:13!=u.value},"Submit Draft Result",8,kr),(0,s.Lk)("table",null,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("th",{key:e.player_strava_id},(0,d.v_)(e.player_nickname),1)))),128))])]),(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,(e=>((0,s.uX)(),(0,s.CE)("td",{key:e},[(0,s.Lk)("div",null,(0,d.v_)(e.user_strava_id),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.racer_list,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("span",{class:(0,d.C4)(h(t,e))},(0,d.v_)(t.name),3),(0,s.Lk)("span",null,"["+(0,d.v_)(t.player)+"]",1)])))),128))])))),128))])])])]))}};const mr=(0,U.A)(hr,[["__scopeId","data-v-b3c3a2f2"]]);var yr=mr;const Lr=e=>((0,s.Qi)("data-v-648ac316"),e=e(),(0,s.jt)(),e),fr={class:"d-flex justify-content-center mt-4"},br=Lr((()=>(0,s.Lk)("h1",null,"Trade Requests",-1))),_r={class:"list-group"},wr={class:"d-flex align-items-center flex-grow-1"},Cr={class:"image-parent"},Er=["src"],xr={class:"content-wrapper"},Rr=["href"],Ar={key:0},Xr={key:1},Sr={class:"text-end ms-3"},Ir=Lr((()=>(0,s.Lk)("div",null,"Requested by:",-1))),Tr={class:"fw-bold"},Kr={class:"ms-5"},Fr=["onClick"],Pr=Lr((()=>(0,s.Lk)("h1",{class:"text-center mt-4"},"Trade",-1))),$r={class:"container mt-3"},Br={class:"row justify-content-center align-items-center"},Dr={class:"col-md-6"},Mr={class:"text-center mb-3"},qr={class:"text-center"},jr=["disabled"],zr={class:"container"},Wr={class:"row"},Vr={class:"col-md-6"},Nr=Lr((()=>(0,s.Lk)("h2",null,"Your Roster",-1))),Or={class:"list-group"},Hr=["onClick"],Qr={class:"d-flex align-items-center flex-grow-1"},Ur={class:"d-flex flex-column align-items-center"},Jr=["src"],Yr={class:"text-muted text-center",style:{"font-size":"13px"}},Gr={class:"content-wrapper"},Zr={class:"card-title px-2"},es=["href"],ts={key:0,class:"card-text px-2"},as={key:1,class:"card-text px-2"},ls=["onClick"],rs={class:"d-flex align-items-center flex-grow-1"},ss={class:"d-flex flex-column align-items-center"},ns=["src"],os={class:"text-muted text-center",style:{"font-size":"13px"}},is={class:"content-wrapper"},us={class:"card-title px-2"},cs=["href"],ds={key:0,class:"card-text px-2"},ps={key:1,class:"card-text px-2"},gs={class:"col-md-6"},vs=Lr((()=>(0,s.Lk)("h2",null,"Available Racers",-1))),ks={class:"list-group"},hs=["onClick"],ms={class:"d-flex align-items-center flex-grow-1"},ys={class:"d-flex flex-column align-items-center"},Ls=["src"],fs={class:"text-muted text-center",style:{"font-size":"13px"}},bs={class:"content-wrapper"},_s={class:"card-title px-2"},ws=["href"],Cs={key:0,class:"card-text px-2"},Es={key:1,class:"card-text px-2"};var xs={__name:"TradeView",setup(e){const t=k(),a=(0,c.KR)(t.league),r=(0,s.EW)((()=>t.leaguePlayer.active_racers)),n=(0,s.EW)((()=>t.leaguePlayer.bench_racers)),o=v(),i=(0,s.EW)((()=>o.allRacers.filter((e=>!e.player)))),u=(0,c.KR)({}),p=(0,c.KR)({});function g(e){u.value=e}function h(e){p.value=e}const m=(0,s.EW)((()=>t.tradeList.slice().filter((e=>e.player_strava_id==t.leaguePlayer.player_strava_id))));return(0,s.sV)((async()=>{await o.getRacerlist(a.value.active_race_url),await t.getTradeRequests()})),(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",fr,[(0,s.bo)((0,s.Lk)("div",null,[br,(0,s.Lk)("ul",_r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,s.Lk)("div",wr,[(0,s.Lk)("div",Cr,[(0,s.Lk)("img",{src:e.toRacer.teamimg?e.toRacer.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Er)]),(0,s.Lk)("div",xr,[(0,s.Lk)("a",{href:e.toRacer.url,target:"prosite"},[(0,s.Lk)("strong",null,(0,d.v_)(e.toRacer.name),1)],8,Rr),e.toRacer.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",Ar,(0,d.v_)(e.toRacer.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",Xr,"None"))])]),(0,s.Lk)("div",Sr,[Ir,(0,s.Lk)("div",Tr,(0,d.v_)((0,c.R1)(t).getPlayerByStravaId(e.player_strava_id).player_nickname),1)]),(0,s.Lk)("div",Kr,[(0,s.Lk)("button",{type:"button",class:"btn btn-success",onClick:a=>(0,c.R1)(t).cancelTradeRequest(e.id)}," Cancel ",8,Fr)])])))),128))])],512),[[l.aG,m.value.length]])]),(0,s.Lk)("div",null,[Pr,(0,s.Lk)("div",null,"Your current trade priority is "+(0,d.v_)((0,c.R1)(t).league.players.indexOf((0,c.R1)(t).leaguePlayer.player_strava_id)+1)+" of "+(0,d.v_)((0,c.R1)(t).league.players.length),1),(0,s.Lk)("div",$r,[(0,s.Lk)("div",Br,[(0,s.Lk)("div",Dr,[(0,s.Lk)("div",Mr,[(0,s.Lk)("div",null,[(0,s.Lk)("strong",null,(0,d.v_)(u.value.name)+" >> "+(0,d.v_)(p.value.name),1)])]),(0,s.Lk)("div",qr,[(0,s.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:a[0]||(a[0]=e=>(0,c.R1)(t).submitTrade(u.value,p.value)),disabled:!(u.value.name&&p.value.name)},"Submit",8,jr)])])])]),(0,s.Lk)("div",zr,[(0,s.Lk)("div",Wr,[(0,s.Lk)("div",Vr,[Nr,(0,s.Lk)("ul",Or,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.name,class:(0,d.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":u.value===e}]),onClick:t=>g(e)},[(0,s.Lk)("div",Qr,[(0,s.Lk)("div",Ur,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Jr),(0,s.Lk)("p",Yr,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",Gr,[(0,s.Lk)("h5",Zr,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,es)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",ts,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",as,"None"))])])],10,Hr)))),128)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.name,class:(0,d.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":u.value===e}]),onClick:t=>g(e)},[(0,s.Lk)("div",rs,[(0,s.Lk)("div",ss,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,ns),(0,s.Lk)("p",os,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",is,[(0,s.Lk)("h5",us,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,cs)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",ds,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",ps,"None"))])])],10,ls)))),128))])]),(0,s.Lk)("div",gs,[vs,(0,s.Lk)("ul",ks,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.name,class:(0,d.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":p.value===e}]),onClick:t=>h(e)},[(0,s.Lk)("div",ms,[(0,s.Lk)("div",ys,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Ls),(0,s.Lk)("p",fs,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",bs,[(0,s.Lk)("h5",_s,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,ws)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",Cs,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",Es,"None"))])])],10,hs)))),128))])])])])])],64))}};const Rs=(0,U.A)(xs,[["__scopeId","data-v-648ac316"]]);var As=Rs;const Xs=e=>((0,s.Qi)("data-v-73cbd394"),e=e(),(0,s.jt)(),e),Ss=Xs((()=>(0,s.Lk)("h1",null,"Run Trade",-1))),Is=Xs((()=>(0,s.Lk)("td",null,"League Id",-1))),Ts=Xs((()=>(0,s.Lk)("td",null,"League Name",-1))),Ks=Xs((()=>(0,s.Lk)("td",null,"Active Race",-1))),Fs=["href"],Ps=Xs((()=>(0,s.Lk)("td",null,[(0,s.Lk)("h2",null,"Trade Requests")],-1))),$s=Xs((()=>(0,s.Lk)("span",null," >> ",-1)));var Bs={__name:"RunTrade",setup(e){const t=k(),a=(0,c.KR)(t.league),l=(0,s.EW)((()=>t.tradeList)),r=j(),n=(0,q.rd)();return(0,s.sV)((async()=>{await t.getMultiTradeRequests(),r.isAutoMode&&r.currentTask&&(t.tradeList.length>0&&await t.completeTradeRequests(),r.completeTask(),n.push("/autocenter"))})),(e,r)=>((0,s.uX)(),(0,s.CE)("div",null,[Ss,(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[Is,(0,s.Lk)("td",null,(0,d.v_)(a.value.id),1)]),(0,s.Lk)("tr",null,[Ts,(0,s.Lk)("td",null,(0,d.v_)(a.value.name),1)]),(0,s.Lk)("tr",null,[Ks,(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:a.value.active_race_url,target:"prosite"},(0,d.v_)(a.value.activeRace),9,Fs)])]),(0,s.Lk)("tr",null,[Ps,(0,s.Lk)("td",null,[(0,s.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>(0,c.R1)(t).completeTradeRequests&&(0,c.R1)(t).completeTradeRequests(...e))}," Finalize Trade ")])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:(0,d.C4)(e.selected?"own":"")},[(0,s.Lk)("span",null,(0,d.v_)(e.toRacer.name)+" ["+(0,d.v_)(e.toRacer.ranking)+"]",1),(0,s.eW)(),$s,(0,s.Lk)("span",null,(0,d.v_)(e.fromRacer.name)+" ["+(0,d.v_)(e.fromRacer.ranking)+"]",1),(0,s.eW)(" by "),(0,s.Lk)("span",null,(0,d.v_)((0,c.R1)(t).getPlayerByStravaId(e.player_strava_id).player_nickname),1),(0,s.Lk)("span",null," ["+(0,d.v_)((0,c.R1)(t).getPlayerPositionByStravaId(e.player_strava_id))+"]",1)],2)))),128))])])])]))}};const Ds=(0,U.A)(Bs,[["__scopeId","data-v-73cbd394"]]);var Ms=Ds;const qs=(0,s.Lk)("h1",null,"Score by Stage",-1),js=["value"],zs=(0,s.Lk)("h2",null,"Racer Scores",-1),Ws={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Vs={class:"modal-dialog"},Ns={class:"modal-content"},Os=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"League Info"),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Hs={class:"modal-body"},Qs=(0,s.Lk)("td",null,"Id",-1),Us=(0,s.Lk)("td",null,"Name",-1),Js=(0,s.Lk)("td",null,"Password",-1),Ys=(0,s.Lk)("td",null,"Active Race",-1),Gs=["href"],Zs={class:"table"},en=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"Cat"),(0,s.Lk)("th",{scope:"col"},"Racer"),(0,s.Lk)("th",{scope:"col"},"Points")])],-1),tn=(0,s.Lk)("h2",null,"Player scores",-1),an={style:{color:"red"}};var ln={__name:"RunScoresView",setup(e){const t=k(),a=v(),r=(0,c.KR)(t.league),n=t.getLeaguePlayers,o=(0,c.KR)(t.race.days),i=(0,c.KR)(""),u=t.getRaceScoreByStage,g=(0,s.EW)((()=>t.scoresForStage.slice())),h=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/pcs?url=${i.value}`,{headers:{Authorization:`Bearer ${e}`}});let a=document.createElement("html");a.innerHTML=t.data;let l=r.value.active_race_url,s=new Map;a.querySelectorAll(".restabs li").forEach((e=>s.set(e.childNodes[0].textContent,e.childNodes[0].getAttribute("data-id")))),s.get("Stage")||s.set("Stage",s.get(""));Array.from(a.querySelectorAll(".prevNextStageLink a")).slice(-1)[0].innerHTML.startsWith("next");let n=[];const o=Array.from(a.querySelectorAll('div[data-id="'+s.get("Stage")+'"] table.results thead th'),(({innerHTML:e})=>e));if(a.querySelectorAll('div[data-id="'+s.get("Stage")+'"] table.results tbody tr').forEach((e=>{if(e.firstChild.textContent&&e.children[10].textContent){let t={};t.racer=e.children[o.indexOf("Rider")].firstChild.children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=l,t.category=e.firstChild.textContent,t.point=e.children[o.indexOf("Pnt")].textContent,t.stage=i.value,n.push(t)}})),s.has("GC")){const e=Array.from(a.querySelectorAll('div[data-id="'+s.get("GC")+'"] table.results thead th'),(({innerHTML:e})=>e));let t={};t.racer=a.querySelector('div[data-id="'+s.get("GC")+'"] table.results tbody tr').children[e.indexOf("Rider")].firstChild.children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=l,t.category="yellow",t.point=0,t.stage=i.value,n.push(t);let r=[20,20,20,20,20,15,15,15,15,15,15,15,15,15,15,10,10,10,10,10];a.querySelector('div[data-id="'+s.get("GC")+'"] table.results').querySelectorAll("tbody tr").forEach(((t,a)=>{if(a<r.length){let s={};s.racer=t.children[e.indexOf("Rider")].firstChild.children[1].href,s.racer&&(s.racer=s.racer.replace(document.location.origin,"https://www.procyclingstats.com")),s.race=l,s.category="gc#"+(a+1),s.point=r[a],s.stage=i.value,n.push(s)}}))}if(s.has("Points")){const e=Array.from(a.querySelectorAll('div[data-id="'+s.get("Points")+'"] table.results thead th'),(({innerHTML:e})=>e));a.querySelector('div[data-id="'+s.get("Points")+'"] table.results').querySelectorAll("tbody tr").forEach((t=>{if(t.lastChild.firstChild.textContent.indexOf("-")<0){let a={};a.racer=t.children[e.indexOf("Rider")].firstChild.children[1].href,a.racer&&(a.racer=a.racer.replace(document.location.origin,"https://www.procyclingstats.com")),a.race=l,a.category="sprint",a.point=t.lastChild.firstChild.textContent.substring(1),a.stage=i.value,n.push(a)}}));let t={};t.racer=a.querySelector('div[data-id="'+s.get("Points")+'"] table.results tbody tr').children[e.indexOf("Rider")].firstChild.children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=l,t.category="green",t.point=0,t.stage=i.value,n.push(t)}if(s.has("KOM")){const e=Array.from(a.querySelectorAll('div[data-id="'+s.get("KOM")+'"] table.results thead th'),(({innerHTML:e})=>e));a.querySelector('div[data-id="'+s.get("KOM")+'"] table.results').querySelectorAll("tbody tr").forEach((t=>{if(t.lastChild.firstChild.textContent.indexOf("-")<0){let a={};a.racer=t.children[e.indexOf("Rider")].firstChild.children[1].href,a.racer&&(a.racer=a.racer.replace(document.location.origin,"https://www.procyclingstats.com")),a.race=l,a.category="KOM",a.point=t.lastChild.firstChild.textContent.substring(1),a.stage=i.value,n.push(a)}}));let t={};t.racer=a.querySelector('div[data-id="'+s.get("KOM")+'"] table.results tbody tr').children[e.indexOf("Rider")].firstChild.children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=l,t.category="polkadot",t.point=0,t.stage=i.value,n.push(t)}if(s.has("Youth")){let e={};const t=Array.from(a.querySelectorAll('div[data-id="'+s.get("Youth")+'"] table.results thead th'),(({innerHTML:e})=>e));e.racer=a.querySelector('div[data-id="'+s.get("Youth")+'"] table.results tbody tr').children[t.indexOf("Rider")].firstChild.children[1].href,e.racer&&(e.racer=e.racer.replace(document.location.origin,"https://www.procyclingstats.com")),e.race=l,e.category="white",e.point=0,e.stage=i.value,n.push(e),a.querySelector('div[data-id="'+s.get("Youth")+'"] table.results').querySelectorAll("tbody tr").forEach(((e,a)=>{if(a<5){let r={};r.racer=e.children[t.indexOf("Rider")].firstChild.children[1].href,r.racer&&(r.racer=r.racer.replace(document.location.origin,"https://www.procyclingstats.com")),r.race=l,r.category="youth#"+(a+1),r.point=15,r.stage=i.value,n.push(r)}}))}await p.A.put("https://www.tourdefantasy.com/racerScore/loadscores",n).then((function(e){console.log(e)})),u(i.value)},m=j(),y=(0,q.rd)();return(0,s.sV)((async()=>{await a.getRacerlist(r.value.active_race_url),await n(r.value.id),await t.getRace(),m.isAutoMode&&m.currentTask?(console.log("auto: "+m.currentTask),m.currentTask.data&&m.currentTask.data.stageURL&&(i.value=m.currentTask.data.stageURL,await u(i.value),await h(),await t.submitStageScore(i),m.completeTask(),y.push("/autocenter"))):(i.value=o.value[0].url,u(i.value))})),(e,a)=>((0,s.uX)(),(0,s.CE)("div",null,[qs,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),onChange:a[1]||(a[1]=e=>(0,c.R1)(u)(i.value))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value,(e=>((0,s.uX)(),(0,s.CE)("option",{value:e.url,key:e},(0,d.v_)(e.name),9,js)))),128))],544),[[l.u1,i.value]]),(0,s.Lk)("button",{type:"button",onClick:h}," Retrieve Scores"),zs,(0,s.Lk)("div",Ws,[(0,s.Lk)("div",Vs,[(0,s.Lk)("div",Ns,[Os,(0,s.Lk)("div",Hs,[(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[Qs,(0,s.Lk)("td",null,(0,d.v_)(r.value.id),1)]),(0,s.Lk)("tr",null,[Us,(0,s.Lk)("td",null,(0,d.v_)(r.value.name),1)]),(0,s.Lk)("tr",null,[Js,(0,s.Lk)("td",null,(0,d.v_)(r.value.password),1)]),(0,s.Lk)("tr",null,[Ys,(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:r.value.active_race_url,target:"prosite"},(0,d.v_)(r.value.activeRace),9,Gs)])])])])])])]),(0,s.Lk)("table",Zs,[en,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e},[(0,s.Lk)("td",null,(0,d.v_)(e.category),1),(0,s.Lk)("td",null,(0,d.v_)(e.racer),1),(0,s.Lk)("td",null,(0,d.v_)(e.point),1)])))),128))])]),tn,(0,s.Lk)("button",{onClick:a[2]||(a[2]=e=>(0,c.R1)(t).submitStageScore(i.value))},"Submit"),(0,s.Lk)("table",null,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,c.R1)(t).stagePlayers,(e=>((0,s.uX)(),(0,s.CE)("th",{key:e},(0,d.v_)(e.player_nickname),1)))),128))])]),(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,c.R1)(t).stagePlayers,(e=>((0,s.uX)(),(0,s.CE)("td",{key:e},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.stageRacers,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[(0,s.Lk)("div",null,[(0,s.Lk)("b",null,(0,d.v_)(e.name),1)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.scores,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},(0,d.v_)(e.category)+": "+(0,d.v_)(e.point),1)))),128))])))),128)),(0,s.Lk)("div",an,(0,d.v_)(e.stageScore),1),(0,s.Lk)("div",null,(0,d.v_)(e.jerseys),1)])))),128))])])])]))}};const rn=ln;var sn=rn;const nn=(0,s.Lk)("h1",null,"By Pass",-1),on={class:"container px-4 text-center"},un={class:"row gx-5 mb-3"},cn={class:"col"},dn=(0,s.Lk)("label",{for:"inputPassword",class:"form-label"},"User Id",-1),pn={class:"row gx-5"},gn={class:"col"};var vn={__name:"ByPass",setup(e){const t=g(),a=k(),r=(0,q.rd)(),n=(0,c.KR)(""),o=async()=>{await t.impersonate(n.value),t.user.current_league_id?(await a.loadLeague(t.user.current_league_id),r.push({name:"LeagueHome"})):r.push({name:"JoinLeague"})};return(0,s.sV)((()=>{})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[nn,(0,s.Lk)("form",null,[(0,s.Lk)("div",on,[(0,s.Lk)("div",un,[(0,s.Lk)("div",cn,[dn,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),class:"form-control",id:"inputPassword","aria-describedby":"emailHelp"},null,512),[[l.Jo,n.value]])])])]),(0,s.Lk)("div",pn,[(0,s.Lk)("div",gn,[(0,s.Lk)("button",{onClick:(0,l.D$)(o,["prevent"]),class:"btn btn-primary"},"Impersonate")])])])]))}};const kn=vn;var hn=kn;const mn=(0,s.Lk)("h1",{class:"mt-4"},"Scores",-1),yn=["href"],Ln={class:"table"},fn=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"Racer"),(0,s.Lk)("th",{scope:"col"},"Points Earned"),(0,s.Lk)("th",{scope:"col"},"How Earned")])],-1),bn={key:0},_n=["src"],wn={key:0},Cn={key:0},En={key:1},xn={key:0},Rn={key:0},An={key:0},Xn={key:1},Sn={class:"border-bottom border-2"},In=(0,s.Lk)("th",{scope:"row"},"Total",-1),Tn=(0,s.Lk)("td",null,null,-1);var Kn={__name:"DetailScoresView",setup(e){const t=k(),a=(0,c.KR)(t.league),l=(0,s.EW)((()=>{const e=new URLSearchParams(window.location.search),a=e.get("userId"),l=t.players.find((e=>(console.log(e.player_strava_id),e.player_strava_id==a)));return l})),r=(0,c.KR)([]),n=(0,c.KR)(new Map),o=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});r.value=t.data;let l=Map.groupBy(r.value,(({stage:e})=>e));l.forEach(((e,t,a)=>{a.set(t,Map.groupBy(e,(({racer:e})=>e)))})),n.value=l},i=(0,s.EW)((()=>Map.groupBy(t.race.days,(({url:e})=>e)))),u=t.getLeaguePlayers;return(0,s.sV)((async()=>{await u(a.value.id),await t.getRace(),await o()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[mn,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value.stage_scores,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[(0,s.Lk)("h2",null,[(0,s.Lk)("a",{href:e.stage_url,target:"prosite"},(0,d.v_)(i.value.get(e.stage_url)[0].name),9,yn)]),(0,s.Lk)("table",Ln,[fn,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.racers,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.url},[(0,s.Lk)("td",null,[(0,s.Lk)("b",null,(0,d.v_)(t.name),1),n.value.get(e.stage_url)?((0,s.uX)(),(0,s.CE)("span",bn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value.get(e.stage_url).get(t.url),(e=>((0,s.uX)(),(0,s.CE)("span",{key:e},[["white","yellow","polkadot","green","1","2","3","youth#1","youth#2","youth#3","gc#1","gc#2","gc#3"].includes(e.category)?((0,s.uX)(),(0,s.CE)("img",{key:0,src:"/"+e.category.replace("#","_")+".png",style:{width:"20px",height:"20px"}},null,8,_n)):(0,s.Q3)("",!0)])))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,[n.value.get(e.stage_url)?((0,s.uX)(),(0,s.CE)("div",wn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value.get(e.stage_url).get(t.url),(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?0!==e.point?((0,s.uX)(),(0,s.CE)("span",En,(0,d.v_)(e.point),1)):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",Cn,(0,d.v_)(e.point),1))])))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,[n.value.get(e.stage_url)?((0,s.uX)(),(0,s.CE)("div",xn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value.get(e.stage_url).get(t.url),(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[["white","yellow","polkadot","green"].includes(e.category)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Rn,[e.category.includes("#")?((0,s.uX)(),(0,s.CE)("div",An,[(0,s.Lk)("span",null,(0,d.v_)(e.category.split("#")[0])+" "+(0,d.v_)(isNaN(e.category.split("#")[1])?e.category.split("#")[1]:e.category.split("#")[1]+(e.category.split("#")[1]%10==1&&e.category.split("#")[1]%100!=11?"st":e.category.split("#")[1]%10==2&&e.category.split("#")[1]%100!=12?"nd":e.category.split("#")[1]%10==3&&e.category.split("#")[1]%100!=13?"rd":"th")),1)])):((0,s.uX)(),(0,s.CE)("div",Xn,[(0,s.Lk)("span",null,(0,d.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1)]))]))])))),128))])):(0,s.Q3)("",!0)])])))),128)),(0,s.Lk)("tr",Sn,[In,(0,s.Lk)("td",null,(0,d.v_)(e.total_score),1),Tn])])])])))),128))]))}};const Fn=Kn;var Pn=Fn;const $n={class:"mt-4"},Bn={class:"d-flex justify-content-center mt-3"},Dn={class:"list-group"},Mn={class:"d-flex align-items-center"},qn={class:"d-flex flex-column align-items-center"},jn=["src"],zn={class:"text-muted text-center",style:{"font-size":"13px"}},Wn={class:"content-wrapper"},Vn={class:"card-title px-2"},Nn=["href"],On={key:0,class:"card-text px-2"},Hn={key:1,class:"card-text px-2"},Qn={class:"list-group"},Un={class:"d-flex align-items-center"},Jn={class:"d-flex flex-column align-items-center"},Yn=["src"],Gn={class:"text-muted text-center",style:{"font-size":"13px"}},Zn={class:"content-wrapper"},eo={class:"card-title px-2"},to=["href"],ao={key:0,class:"card-text px-2"},lo={key:1,class:"card-text px-2"};var ro={__name:"RosterViewOnly",setup(e){const t=k(),a=(0,s.EW)((()=>{const e=new URLSearchParams(window.location.search),a=e.get("userId"),l=t.players.find((e=>(console.log(e.player_strava_id),e.player_strava_id==a)));return l.active_racers=l.active_racers?l.active_racers:[],l.bench_racers_racers=l.bench_racers_racers?l.bench_racers_racers:[],l}));return(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("h1",$n,(0,d.v_)(a.value.player_nickname),1),(0,s.Lk)("div",Bn,[(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",Dn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value.active_racers,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,s.Lk)("div",Mn,[(0,s.Lk)("div",qn,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,jn),(0,s.Lk)("p",zn,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",Wn,[(0,s.Lk)("h5",Vn,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,Nn)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",On,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",Hn,"None"))])])])))),128))])])])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("div",null,[(0,s.Lk)("ul",Qn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value.bench_racers,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center"},[(0,s.Lk)("div",Un,[(0,s.Lk)("div",Jn,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Yn),(0,s.Lk)("p",Gn,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",Zn,[(0,s.Lk)("h5",eo,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,to)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",ao,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",lo,"None"))])])])))),128))])])])])])])]))}};const so=(0,U.A)(ro,[["__scopeId","data-v-30f47d4a"]]);var no=so;const oo=(0,s.Lk)("h1",{class:"mt-4"},"Full Scores",-1),io=(0,s.Lk)("span",null,"* available racers",-1),uo={class:"table"},co=(0,s.Lk)("th",{scope:"col"},"Racer",-1),po=(0,s.Lk)("th",{scope:"col"},"Total",-1),go={style:{"vertical-align":"middle"}},vo={style:{"vertical-align":"middle"}},ko={key:0},ho=["src"],mo=(0,s.Lk)("img",{src:"/blank.png",style:{width:"1px",height:"20px"}},null,-1),yo={key:0},Lo=["data-bs-target"],fo=["id"],bo={key:0},_o={key:0},wo={key:1};var Co={__name:"FullScoresView",setup(e){const t=k(),a=(0,c.KR)(t.league),l=(0,c.KR)([]),r=(0,c.KR)(new Map),n=(0,c.KR)([]),o=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});l.value=t.data;let s=Map.groupBy(l.value,(({racer:e})=>e)),o=new Map;s.forEach(((e,t)=>{o.set(t,e.reduce(((e,t)=>e+t.point),0))}));let i=Array.from(o,(e=>({url:e[0],point:e[1]})));i.sort(((e,t)=>t.point-e.point)),n.value=i,s.forEach(((e,t,a)=>{let l=Map.groupBy(e,(({stage:e})=>e));a.set(t,l)})),r.value=s},i=(0,s.EW)((()=>{let e=t.race.days.slice().filter((e=>"Restday"!=e.name));return e.sort(((e,t)=>e.seq-t.seq)),e.forEach((e=>{e.shortname=e.url.substring(e.url.lastIndexOf("-")+1)})),e})),u=v(),g=(0,s.EW)((()=>{let e=Map.groupBy(u.allRacers,(({url:e})=>e));return e})),h=t.getLeaguePlayers;return(0,s.sV)((async()=>{await u.getRacerlist(a.value.active_race_url),await h(a.value.id),await t.getRace(),await o()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[oo,(0,s.eW)(),io,(0,s.Lk)("table",uo,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[co,po,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>((0,s.uX)(),(0,s.CE)("th",{key:e,scope:"col"},(0,d.v_)(e.shortname),1)))),128))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e},[(0,s.Lk)("td",go,[(0,s.Lk)("b",null,(0,d.v_)(g.value.get(e.url)[0].name)+" "+(0,d.v_)(g.value.get(e.url)[0].player?"":"*"),1)]),(0,s.Lk)("td",vo,[(0,s.Lk)("b",null,(0,d.v_)(e.point),1)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((t,a)=>((0,s.uX)(),(0,s.CE)("td",{key:a},[r.value.get(e.url).get(t.url)?((0,s.uX)(),(0,s.CE)("div",ko,[(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value.get(e.url).get(t.url),(e=>((0,s.uX)(),(0,s.CE)("span",{key:e},[["white","yellow","polkadot","green","1","2","3","youth#1","youth#2","youth#3","gc#1","gc#2","gc#3"].includes(e.category)?((0,s.uX)(),(0,s.CE)("img",{key:0,src:"/"+e.category.replace("#","_")+".png",style:{width:"20px",height:"20px"}},null,8,ho)):(0,s.Q3)("",!0)])))),128)),mo]),0!=r.value.get(e.url).get(t.url).reduce(((e,t)=>e+t.point),0)?((0,s.uX)(),(0,s.CE)("div",yo,[(0,s.Lk)("a",{href:"#","data-bs-toggle":"collapse","data-bs-target":"#collapse"+e.url+t.url},(0,d.v_)(r.value.get(e.url).get(t.url).reduce(((e,t)=>e+t.point),0)),9,Lo)])):(0,s.Q3)("",!0),(0,s.Lk)("div",{id:"collapse"+e.url+t.url,class:"collapse"},[(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value.get(e.url).get(t.url),((e,t)=>((0,s.uX)(),(0,s.CE)("span",{key:t},[["white","yellow","polkadot","green"].includes(e.category)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",bo,[e.category.includes("#")?((0,s.uX)(),(0,s.CE)("div",_o,[(0,s.Lk)("span",null,(0,d.v_)(e.point)+" - "+(0,d.v_)(e.category.split("#")[0])+" "+(0,d.v_)(isNaN(e.category.split("#")[1])?e.category.split("#")[1]:e.category.split("#")[1]+(e.category.split("#")[1]%10==1&&e.category.split("#")[1]%100!=11?"st":e.category.split("#")[1]%10==2&&e.category.split("#")[1]%100!=12?"nd":e.category.split("#")[1]%10==3&&e.category.split("#")[1]%100!=13?"rd":"th")),1)])):((0,s.uX)(),(0,s.CE)("div",wo,[(0,s.Lk)("span",null,(0,d.v_)(e.point)+" - "+(0,d.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1)]))]))])))),128))])],8,fo)])):(0,s.Q3)("",!0)])))),128))])))),128))])])]))}};const Eo=Co;var xo=Eo;const Ro=(0,s.Lk)("h1",null,"Race Maintenance",-1),Ao=(0,s.Lk)("label",{for:"raceurl"},"URL:",-1),Xo=["disabled"],So=["disabled"],Io=(0,s.Lk)("br",null,null,-1),To=["value"],Ko=["disabled"],Fo=(0,s.Lk)("th",null,"Race Name",-1),Po=(0,s.Lk)("th",null,"Race URL",-1),$o=(0,s.Lk)("th",null,"Race Start Date",-1),Bo=(0,s.Lk)("th",null,"Racers",-1),Do=(0,s.Lk)("th",null,"Racer Specialties",-1),Mo=(0,s.Lk)("th",null,"Youth Racers",-1),qo=(0,s.Lk)("th",null,"Stages",-1);var jo={__name:"RaceMaintenanceView",setup(e){const t=(0,c.KR)([]),a=(0,c.KR)({}),r=(0,c.KR)(""),n=async()=>{const e=localStorage.getItem("token"),a=await p.A.get("https://www.tourdefantasy.com/race",{headers:{Authorization:`Bearer ${e}`}});t.value=a.data.slice().sort(((e,t)=>Date.parse(t.start_date)-Date.parse(e.start_date)))},o=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/pcs?url=${r.value}`,{headers:{Authorization:`Bearer ${e}`}});let l=document.createElement("html");l.innerHTML=t.data;let s={days:[]};s.name=l.querySelector("div.main").textContent,s.url=r.value,l.querySelectorAll("div").forEach((e=>{"Startdate:"===e.textContent&&(s.start_date=e.nextSibling.nextSibling.textContent)}));let n={};l.querySelectorAll("h3").forEach((e=>{"Stages"===e.textContent&&(n=e.nextSibling.nextSibling)})),n.querySelector("table.basic").querySelectorAll("tbody tr").forEach(((e,t)=>{if("sum"===e.className)return;let a={};a.name=e.children[3].textContent,a.seq=t,a.url=e.children[3].firstChild.href,a.url&&(a.url=a.url.replace(document.location.origin,"https://www.procyclingstats.com")),s.days.push(a)})),l.innerHTML="<html></html>",a.value=s,r.value=""},i=()=>{console.log("selected")},u=()=>{p.A.put("https://www.tourdefantasy.com/race/raceinfo",a.value).then((function(e){alert(e.status)})),n()},g=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/pcs?url=${a.value.url}/startlist/top-competitors`,{headers:{Authorization:`Bearer ${e}`}});let l=document.createElement("html");l.innerHTML=t.data;let r=[];l.querySelector("table.basic").querySelectorAll("tbody tr").forEach((e=>{let t={};t.name=e.children[1].children[1].text,t.ranking=e.children[0].innerText,t.url=e.children[1].children[1].href,t.url&&(t.url=t.url.replace(document.location.origin,"https://www.procyclingstats.com")),t.nationality=e.children[1].children[0].className.split(" ")[1],t.race=a.value.url,r.push(t)})),l.innerHTML="<html></html>",p.A.put("https://www.tourdefantasy.com/racer/racerlist",r).then((function(e){console.log(e)}));const s=await p.A.get(`https://www.tourdefantasy.com/pcs?url=${a.value.url}/startlist/best-per-specialty`,{headers:{Authorization:`Bearer ${e}`}});l=document.createElement("html"),l.innerHTML=s.data,r=[],l.querySelectorAll("table.basic").forEach((e=>{let t=e.parentElement.previousSibling.previousSibling.textContent,l=a.value.url;e.querySelectorAll("tbody tr").forEach((e=>{let a={};a.racer=e.children[1].children[1].href,a.racer&&(a.racer=a.racer.replace(document.location.origin,"https://www.procyclingstats.com")),a.race=l,a.specialty=t,r.push(a)}))})),p.A.put("https://www.tourdefantasy.com/racer/racerspecialties",r).then((function(e){console.log(e)}));const n=await p.A.get(`https://www.tourdefantasy.com/pcs?url=${a.value.url}/startlist/youngest-oldest`,{headers:{Authorization:`Bearer ${e}`}});l=document.createElement("html"),l.innerHTML=n.data,r=[],l.querySelector("table.basic").querySelectorAll("tbody tr").forEach((e=>{let t={};t.racer=e.children[1].children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=a.value.url,t.specialty="Youth",r.push(t)})),p.A.put("https://www.tourdefantasy.com/racer/racerspecialties",r).then((function(e){console.log(e)}));const o=await p.A.get(`https://www.tourdefantasy.com/pcs?url=${a.value.url}/startlist`,{headers:{Authorization:`Bearer ${e}`}});l=document.createElement("html"),l.innerHTML=o.data;const i=[];l.querySelectorAll("div .ridersCont").forEach((e=>{const t=e.querySelector("div .team").href.replace(document.location.origin,"https://www.procyclingstats.com"),l=e.querySelector("div .team").innerHTML,r=e.previousSibling.querySelector("img").src.replace(document.location.origin,"https://www.procyclingstats.com");console.log(t+" "+r),e.querySelectorAll("li").forEach((e=>{let s={};s.race=a.value.url,s.bib=e.querySelector(".bib").innerHTML,s.racer=e.querySelector("a").href.replace(document.location.origin,"https://www.procyclingstats.com"),s.team=t,s.teamname=l,s.teamimg=r,i.push(s)}))})),console.log(i),p.A.put("https://www.tourdefantasy.com/racer/racerteamandbib",i).then((function(e){console.log(e)})),alert("updated")};return(0,s.sV)((()=>{n()})),(e,n)=>((0,s.uX)(),(0,s.CE)("div",null,[Ro,Ao,(0,s.bo)((0,s.Lk)("input",{type:"text",size:"70",id:"raceurl","onUpdate:modelValue":n[0]||(n[0]=e=>r.value=e)},null,512),[[l.Jo,r.value]]),(0,s.Lk)("button",{type:"button",onClick:o,disabled:!r.value}," Read Race",8,Xo),(0,s.Lk)("button",{type:"button",onClick:u,disabled:t.value.includes(a.value)}," Save Race",8,So),(0,s.eW)(),Io,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>a.value=e),onChange:i},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e=>((0,s.uX)(),(0,s.CE)("option",{value:e,key:e},(0,d.v_)(e.name),9,To)))),128))],544),[[l.u1,a.value]]),(0,s.Lk)("button",{type:"button",onClick:g,disabled:!a.value||!t.value.includes(a.value)}," Update Race Details ",8,Ko),(0,s.Lk)("table",null,[(0,s.Lk)("tr",null,[Fo,(0,s.Lk)("td",null,(0,d.v_)(a.value.name),1)]),(0,s.Lk)("tr",null,[Po,(0,s.Lk)("td",null,(0,d.v_)(a.value.url),1)]),(0,s.Lk)("tr",null,[$o,(0,s.Lk)("td",null,(0,d.v_)(a.value.start_date),1)]),(0,s.Lk)("tr",null,[Bo,(0,s.Lk)("td",null,(0,d.v_)(a.value.url)+"/startlist/top-competitors",1)]),(0,s.Lk)("tr",null,[Do,(0,s.Lk)("td",null,(0,d.v_)(a.value.url)+"/startlist/best-per-specialty",1)]),(0,s.Lk)("tr",null,[Mo,(0,s.Lk)("td",null,(0,d.v_)(a.value.url)+"/startlist/youngest-oldest",1)]),(0,s.Lk)("tr",null,[qo,(0,s.Lk)("td",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value.days,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},[(0,s.Lk)("b",null,(0,d.v_)(e.name),1),(0,s.eW)(" "+(0,d.v_)(e.url),1)])))),128))])])])]))}};const zo=jo;var Wo=zo;const Vo=(0,s.Lk)("h1",null,"Automation Center",-1),No=["value"],Oo={key:0},Ho=["id","value"],Qo=["for"],Uo=["onChange","value"],Jo={key:1},Yo=["id","value"],Go=["for"],Zo=["onChange","value"];var ei={__name:"AutomationCenterView",setup(e){const t=j(),a=(0,c.KR)([]),r=(0,c.KR)({}),n=(0,c.KR)({}),o=async()=>{const e=localStorage.getItem("token"),t=await p.A.get("https://www.tourdefantasy.com/league",{headers:{Authorization:`Bearer ${e}`}});a.value=t.data},i=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/race/url?url=${r.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});let a=t.data;a.days.sort(((e,t)=>e.seq-t.seq)),n.value=a},u=(0,s.EW)((()=>{if(!n.value.days)return[];let e=[{leagueId:r.value.id,name:"Draft",time:new Date(Date.parse(n.value.start_date)-288e5),path:"/rundraft"}];return n.value.days.forEach(((t,a)=>{t.url&&e.push({leagueId:r.value.id,name:"Score",time:new Date(Date.parse(n.value.start_date)+36e5*(24*a+12)),path:"/runscore",data:{stageURL:t.url}}),e.push({leagueId:r.value.id,name:"Trade",time:new Date(Date.parse(n.value.start_date)+36e5*(24*a+19)),path:"/runtrade"})})),e})),g=(e,t)=>{t.time.setHours(e.target.value.slice(0,2)),t.time.setMinutes(e.target.value.slice(3)),console.log(t.time)};return(0,s.sV)((()=>{o()})),(e,o)=>((0,s.uX)(),(0,s.CE)("div",null,[Vo,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),onChange:i},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("option",{value:e,key:e},(0,d.v_)(e.name),9,No)))),128))],544),[[l.u1,r.value]]),(0,s.Lk)("button",{type:"button",onClick:o[1]||(o[1]=(...e)=>(0,c.R1)(t).flip&&(0,c.R1)(t).flip(...e))},(0,d.v_)((0,c.R1)(t).isAutoMode?"Stop":"Start"),1),(0,c.R1)(t).isAutoMode?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Oo,[(0,s.Lk)("h2",null,(0,d.v_)(n.value.name),1),(0,s.Lk)("div",null,"Start Date: "+(0,d.v_)(n.value.start_date),1),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,((e,a)=>((0,s.uX)(),(0,s.CE)("li",{key:a},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:a,value:e,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,c.R1)(t).tasks=e)},null,8,Ho),[[l.lH,(0,c.R1)(t).tasks]]),(0,s.Lk)("label",{for:a},[(0,s.Lk)("b",null,(0,d.v_)(e.name),1),(0,s.eW)(" - "+(0,d.v_)(e.time.toLocaleDateString()),1)],8,Qo),(0,s.eW)("   "),(0,s.Lk)("input",{type:"time",onChange:t=>g(t,e),value:e.time.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})},null,40,Uo)])))),128))])])),(0,c.R1)(t).isAutoMode?((0,s.uX)(),(0,s.CE)("div",Jo,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,c.R1)(t).tasks,((e,a)=>((0,s.uX)(),(0,s.CE)("li",{key:a},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:a,value:e,"onUpdate:modelValue":o[3]||(o[3]=e=>(0,c.R1)(t).tasks=e)},null,8,Yo),[[l.lH,(0,c.R1)(t).tasks]]),(0,s.Lk)("label",{for:a},[(0,s.Lk)("b",null,(0,d.v_)(e.name),1),(0,s.eW)(" - "+(0,d.v_)(e.time.toLocaleDateString()),1)],8,Go),(0,s.eW)("   "),(0,s.Lk)("input",{type:"time",onChange:t=>g(t,e),value:e.time.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})},null,40,Zo)])))),128))])])):(0,s.Q3)("",!0)]))}};const ti=ei;var ai=ti;const li=(0,s.Lk)("h1",{class:"mt-4"},"Create League",-1),ri={class:"row gx-5 mb-3"},si={class:"col"},ni=(0,s.Lk)("label",{for:"exampleInputPassword1",class:"form-label"},"League Name",-1),oi={class:"container px-4 text-center"},ii={class:"row gx-t"},ui=(0,s.Lk)("label",{for:"raceselect",class:"form-label"},"Race",-1),ci=["value"],di={class:"row gx-5 mb-3"},pi={class:"col"},gi=(0,s.Lk)("label",{for:"inputPassword",class:"form-label"},"League Password",-1),vi={class:"row gx-5 mb-3"},ki={class:"col"},hi=(0,s.Lk)("label",{for:"playernickname",class:"form-label"},"Your Nickname",-1),mi={class:"row gx-5"},yi={class:"col"};var Li={__name:"CreateLeagueView",setup(e){const t=(0,q.rd)(),a=k(),r=(0,c.KR)(""),n=(0,c.KR)(""),o=(0,c.KR)(""),i=(0,c.KR)([]),u=(0,c.KR)({}),g=async()=>{let e={name:n.value,password:r.value,active_race_url:u.value.url,activeRace:u.value.name,admin:"ltseng",players:[]};const l=localStorage.getItem("token"),s=await p.A.post("https://www.tourdefantasy.com/league/create-league",e,{headers:{Authorization:`Bearer ${l}`}});console.log(s),await a.join(r.value,o.value),t.push({name:"LeagueHome"})},v=async()=>{const e=localStorage.getItem("token"),t=await p.A.get("https://www.tourdefantasy.com/race",{headers:{Authorization:`Bearer ${e}`}});i.value=t.data.slice().sort(((e,t)=>Date.parse(t.start_date)-Date.parse(e.start_date))),u.value=i.value[0]};return(0,s.sV)((()=>{v()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[li,(0,s.Lk)("form",null,[(0,s.Lk)("div",ri,[(0,s.Lk)("div",si,[ni,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),class:"form-control",id:"exampleInputPassword1"},null,512),[[l.Jo,n.value]])])]),(0,s.Lk)("div",oi,[(0,s.Lk)("div",ii,[ui,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),id:"raceselect"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>((0,s.uX)(),(0,s.CE)("option",{value:e,key:e},(0,d.v_)(e.name),9,ci)))),128))],512),[[l.u1,u.value]])]),(0,s.Lk)("div",di,[(0,s.Lk)("div",pi,[gi,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),class:"form-control",id:"inputPassword","aria-describedby":"emailHelp"},null,512),[[l.Jo,r.value]])])]),(0,s.Lk)("div",vi,[(0,s.Lk)("div",ki,[hi,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.value=e),class:"form-control",id:"playernickname","aria-describedby":"emailHelp"},null,512),[[l.Jo,o.value]])])]),(0,s.Lk)("div",mi,[(0,s.Lk)("div",yi,[(0,s.Lk)("button",{onClick:(0,l.D$)(g,["prevent"]),class:"btn btn-success"},"Create")])])])])]))}};const fi=Li;var bi=fi;const _i=(0,s.Lk)("h1",{class:"mt-4"}," Past announcements",-1),wi={class:"container w-75"},Ci=["innerHTML"];var Ei={__name:"NewsfeedView",setup(e){const t=k(),a=(0,s.EW)((()=>t.announcements.slice().reverse()));return(0,s.sV)((()=>{t.getAllAnnouncements()})),(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[_i,(0,s.Lk)("div",wi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"alert alert-success alert-dismissible fade show",role:"alert"},[(0,s.Lk)("span",{innerHTML:e.message},null,8,Ci)])))),128))])],64))}};const xi=Ei;var Ri=xi;const Ai=e=>((0,s.Qi)("data-v-3d042a38"),e=e(),(0,s.jt)(),e),Xi=Ai((()=>(0,s.Lk)("h2",{class:"mt-4"},"My Team",-1))),Si={key:0,class:"alert alert-success alert-dismissible fade show"},Ii={class:"d-flex justify-content-center mt-3"},Ti={class:"d-flex flex-wrap justify-content-center mx-2"},Ki={class:"d-flex align-items-center"},Fi={class:"d-flex flex-column align-items-center"},Pi=["src"],$i={class:"text-muted text-center",style:{"font-size":"13px"}},Bi={class:"content-wrapper"},Di={class:"card-title"},Mi=["href"],qi={key:0,class:"card-text"},ji={key:1,class:"card-text"},zi=Ai((()=>(0,s.Lk)("h2",{class:"mt-4"},"Available Racers",-1))),Wi=["id","value"],Vi=["for"],Ni={class:"px-2"},Oi=Ai((()=>(0,s.Lk)("label",null," Search",-1))),Hi={class:"d-flex justify-content-center mt-3"},Qi=["disabled"],Ui={class:"d-flex flex-wrap justify-content-center mt-3 mx-2"},Ji=["onClick"],Yi={class:"d-flex align-items-center"},Gi={class:"d-flex flex-column align-items-center"},Zi=["src"],eu={class:"text-muted text-center",style:{"font-size":"13px"}},tu={class:"content-wrapper"},au={class:"card-title px-2"},lu=["href"],ru={key:0,class:"card-text px-2"},su={key:1,class:"card-text px-2"};var nu={__name:"LiveDraftView",setup(e){const t=k(),a=v(),r=(0,s.EW)((()=>a.allRacers.filter((e=>!e.player&&(0===o.value.length||o.value.every((t=>e.specialties.includes(t)))))).filter((e=>e.name.toLowerCase().includes(i.value.toLowerCase()))))),n=["GC","TT","Sprinter","One day races","Hills","Climber","Youth"],o=(0,c.KR)([]),i=(0,c.KR)(""),u=(0,s.EW)((()=>new Map(a.allRacers.slice().map((e=>[e.url,e]))))),g=(0,s.EW)((()=>a.allRacers.filter((e=>e.player==t.leaguePlayer.player_strava_id)))),h=(0,c.KR)(null),m=e=>{h.value=e},y=(0,c.KR)(0),L=async()=>{await p.A.post("https://www.tourdefantasy.com/livedraft/draftracer",{league_id:t.league.id,player_id:t.leaguePlayer.player_strava_id,racer_url:h.value.url,seq:y.value}).then((function(e){console.log(e)})),h.value=null},f=(0,c.KR)([]),b=(0,s.EW)((()=>-1!=f.value.indexOf(y.value))),_=new AbortController,w=async()=>{try{console.log("Sending request");const e=await fetch(`https://www.tourdefantasy.com/livedraft/stream/${t.league.id}`,{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token"),Accept:"text/event-stream","Content-Type":"application/json"},signal:_.signal});if(e.body){const a=e.body.getReader(),l=new TextDecoder("utf-8");for(;;){const{done:e,value:r}=await a.read();if(e)break;const s=l.decode(r,{stream:!0});console.log(s);const n=t.parseChunk(s);n.forEach((e=>{console.log(e.eventType);const t=JSON.parse(e.data);"draft_position"===e.eventType?f.value=t:(y.value=t.slice(-1)[0].seq+1,t.slice().forEach((e=>{u.value.get(e.racer_url).player=e.player_id})),h.value&&u.value.get(h.value.url).player&&(h.value=null))}))}}console.log("Request sent")}catch(e){console.log(e)}};return(0,s.sV)((()=>{a.getRacerlist(t.league.active_race_url),w()})),(0,s.hi)((()=>{_.abort()})),(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[Xi,b.value?((0,s.uX)(),(0,s.CE)("div",Si," Your Turn")):(0,s.Q3)("",!0),(0,s.Lk)("div",Ii,[(0,s.Lk)("div",Ti,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"card mb-3 mx-2 p-2",style:{width:"18rem"}},[(0,s.Lk)("div",Ki,[(0,s.Lk)("div",Fi,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Pi),(0,s.Lk)("p",$i,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",Bi,[(0,s.Lk)("h5",Di,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,Mi)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",qi,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",ji,"None"))])])])))),128))])]),zi,((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(n,(e=>(0,s.Lk)("span",{key:e,class:"px-2"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:e,value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e)},null,8,Wi),[[l.lH,o.value]]),(0,s.Lk)("label",{for:e}," "+(0,d.v_)(e),9,Vi)]))),64)),(0,s.Lk)("span",Ni,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},null,512),[[l.Jo,i.value]]),Oi]),(0,s.Lk)("div",Hi,[(0,s.Lk)("button",{type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=e=>L()),disabled:!h.value||!b.value},"Submit "+(0,d.v_)(y.value+1),9,Qi)]),(0,s.Lk)("div",Ui,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e,onClick:t=>m(e),class:(0,d.C4)(["card mb-3 mx-2 p-2",{"border-success-thick":h.value===e}]),style:{width:"18rem",cursor:"pointer"}},[(0,s.Lk)("div",Yi,[(0,s.Lk)("div",Gi,[(0,s.Lk)("img",{src:e.teamimg?e.teamimg:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image",style:{width:"50px",height:"50px"}},null,8,Zi),(0,s.Lk)("p",eu,"#"+(0,d.v_)(e.bib),1)]),(0,s.Lk)("div",tu,[(0,s.Lk)("h5",au,[(0,s.Lk)("a",{href:e.url,target:"prosite"},(0,d.v_)(e.name),9,lu)]),e.specialties.length>0?((0,s.uX)(),(0,s.CE)("p",ru,(0,d.v_)(e.specialties.join(", ")),1)):((0,s.uX)(),(0,s.CE)("p",su,"None"))])])],10,Ji)))),128))])],64))}};const ou=(0,U.A)(nu,[["__scopeId","data-v-3d042a38"]]);var iu=ou,uu=a(2445);const cu=e=>((0,s.Qi)("data-v-52c073fd"),e=e(),(0,s.jt)(),e),du=cu((()=>(0,s.Lk)("h2",null,"Teams",-1))),pu=["disabled"],gu=["disabled"],vu=["id","value"],ku=["for"],hu=cu((()=>(0,s.Lk)("h2",null,"Available Racers",-1)));var mu={__name:"RunLiveDraftView",setup(e){const t=k(),a=v(),r=(0,s.EW)((()=>a.allRacers.filter((e=>!e.player)))),n=(0,s.EW)((()=>new Map(a.allRacers.slice().map((e=>[e.url,e]))))),o=(0,s.EW)((()=>Map.groupBy(a.allRacers.slice(),(({player:e})=>e)))),i=(0,c.KR)(0),u=(0,s.EW)((()=>{const e=i.value,a=t.league.players.length;return e==12*a?-1:Math.floor(e/a)%2==0?e%a:a-e%a-1})),g=(0,c.KR)(!1),h=async()=>{if(console.log(a.allRacers.length+" "+r.value.length),a.allRacers.length==r.value.length){t.shuffle(),t.players.forEach((e=>{e.active_racers=[],e.bench_racers=[]}));const e=localStorage.getItem("token");await p.A.put("https://www.tourdefantasy.com/league/draftresult",t.players,{headers:{Authorization:`Bearer ${e}`}}),t.league.players=t.players.map((({player_strava_id:e})=>e))}g.value=!0},m=(0,c.KR)([]),y=async()=>{console.log(m.value),console.log(t.league.players[u.value]),m.value.includes(t.league.players[u.value])&&await p.A.post("https://www.tourdefantasy.com/livedraft/draftracer",{league_id:t.league.id,player_id:t.league.players[u.value],racer_url:r.value[0].url,seq:i.value}).then((function(e){console.log(e)}))},L=async()=>{t.players.forEach((e=>{const t=o.value.get(e.player_strava_id);e.active_racers=t.slice(0,8),e.bench_racers=t.slice(8)})),t.submitDraft(),t.league.players=t.players.map((({player_strava_id:e})=>e)),f.abort()},f=new AbortController,b=()=>{const e=localStorage.getItem("token");p.A.get(`https://www.tourdefantasy.com/livedraft/stream/${t.league.id}`,{headers:{Accept:"text/event-stream",Authorization:`Bearer ${e}`},responseType:"stream",adapter:"fetch",signal:f.signal}).then((async e=>{console.log("axios got a response");const t=e.data,a=t.pipeThrough(new uu.A).getReader();for(;;){const{value:e,done:t}=await a.read();if(t)break;const l=JSON.parse(e.data);"draft_position"===e.type||(i.value=l.slice(-1)[0].seq+1,l.slice().forEach((e=>{n.value.get(e.racer_url).player=e.player_id})),l.length>0&&(g.value=!0),y())}})).catch((function(e){console.log(e)}))};return(0,s.sV)((()=>{a.getRacerlist(t.league.active_race_url),b()})),(0,s.hi)((()=>{f.abort()})),(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[du,(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>h()),disabled:g.value}," Initialize Live Draft ",8,pu),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>L()),disabled:-1!=u.value}," Submit Draft Results",8,gu),(0,s.Lk)("table",null,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,c.R1)(t).players,((e,t)=>((0,s.uX)(),(0,s.CE)("td",{key:e,class:(0,d.C4)({"border-success-thick":t===u.value})},[(0,s.Lk)("div",null,(0,d.v_)(e.player_nickname),1),(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:e.id,value:e.player_strava_id,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),onChange:a[3]||(a[3]=e=>y())},null,40,vu),[[l.lH,m.value]]),(0,s.Lk)("label",{for:e.id},"auto",8,ku),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value.get(e.player_strava_id),(e=>((0,s.uX)(),(0,s.CE)("div",{key:e},(0,d.v_)(e.name),1)))),128))],2)))),128))])])]),hu,(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,d.v_)(e.name),1)))),128))])],64))}};const yu=(0,U.A)(mu,[["__scopeId","data-v-52c073fd"]]);var Lu=yu;const fu=(0,s.Lk)("h1",{class:"mt-4"},"League Maintenance",-1),bu={class:"mx-auto",style:{width:"400px"}},_u=(0,s.Lk)("td",null,"Id",-1),wu=(0,s.Lk)("td",null,"Name",-1),Cu=(0,s.Lk)("td",null,"Password",-1),Eu=(0,s.Lk)("td",null,"Active Race",-1),xu=["href"],Ru=(0,s.Lk)("h1",{class:"mt-4"},"League Players",-1),Au={class:"table mt-4"},Xu=["onUpdate:modelValue"],Su=["onUpdate:modelValue"];var Iu={__name:"LeagueMaintenanceView",setup(e){const t=k(),a=(0,c.KR)(t.league),r=(0,s.EW)((()=>t.players.slice())),n=t.getLeaguePlayers,o=()=>{console.log(a.value),p.A.put(`https://www.tourdefantasy.com/league/update-league/${a.value.id}`,a.value).then((function(e){console.log(e)}))},i=async()=>{const e=localStorage.getItem("token"),t=await p.A.get(`https://www.tourdefantasy.com/racer/race?race_url=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}}),l=new Map(t.data.map((e=>[e.url,e])));r.value.forEach((t=>{const a=[];t.active_racers.forEach((e=>{a.push(l.get(e.url))}));const r=[];t.bench_racers.forEach((e=>{r.push(l.get(e.url))})),t.activeRacers=a,t.active_racers=a,t.benchRacers=r,t.bench_racers=r;const s=p.A.put("https://www.tourdefantasy.com/league/leagueplayers",t,{headers:{Authorization:`Bearer ${e}`}});console.log(s)}))};return(0,s.sV)((()=>{n(a.value.id),t.getRace()})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[fu,(0,s.Lk)("table",bu,[(0,s.Lk)("tr",null,[_u,(0,s.Lk)("td",null,(0,d.v_)(a.value.id),1)]),(0,s.Lk)("tr",null,[wu,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.name=e)},null,512),[[l.Jo,a.value.name]])])]),(0,s.Lk)("tr",null,[Cu,(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.password=e)},null,512),[[l.Jo,a.value.password]])])]),(0,s.Lk)("tr",null,[Eu,(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:a.value.active_race_url,target:"prosite"},(0,d.v_)(a.value.activeRace),9,xu)])])]),(0,s.Lk)("button",{onClick:o},"Update League"),Ru,(0,s.Lk)("button",{onClick:i},"Update Players"),(0,s.Lk)("table",Au,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("th",{key:e.player_strava_id},(0,d.v_)(e.player_nickname),1)))),128))])]),(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("td",{key:e},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.active_racers,((t,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:a,"onUpdate:modelValue":t=>e.active_racers[a].url=t,size:"50"},null,8,Xu)),[[l.Jo,e.active_racers[a].url]]))),128))])))),128))]),(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("td",{key:e},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.bench_racers,((t,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:a,"onUpdate:modelValue":t=>e.bench_racers[a].url=t,size:"50"},null,8,Su)),[[l.Jo,e.bench_racers[a].url]]))),128))])))),128))])])])]))}};const Tu=Iu;var Ku=Tu;const Fu=[{path:"/leaguecenter",name:"LeagueMaintenanceView",component:Ku},{path:"/runlivedraft",name:"RunLiveDraftView",component:Lu},{path:"/livedraft",name:"LiveDraftView",component:iu},{path:"/newsfeed",name:"NewsfeedView",component:Ri},{path:"/createleague",name:"CreateLeagueView",component:bi},{path:"/autocenter",name:"AutomationCenterView",component:ai},{path:"/racecenter",name:"RaceMaintenanceView",component:Wo},{path:"/leaguepreview",name:"LeaguePreview",component:ol,meta:{public:!0}},{path:"/fullscores",name:"FullScoreView",component:xo},{path:"/rosterview",name:"RosterView",component:no},{path:"/detailscore",name:"DetailScore",component:Pn},{path:"/bypass",name:"ByPass",component:hn,meta:{public:!0}},{path:"/runscore",name:"RunScore",component:sn},{path:"/runtrade",name:"RunTrade",component:Ms},{path:"/trade",name:"Trade",component:As},{path:"/rundraft",name:"RunDraft",component:yr},{path:"/roster",name:"Roster",component:nr},{path:"/draftlist",name:"DraftList",component:xl},{path:"/joinleague",name:"JoinLeague",component:mt},{path:"/leaguehome",name:"LeagueHome",component:zt},{path:"/profile",name:"Profile",component:rt},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,1666)),meta:{public:!0}},{path:"/",name:"Login",component:ue,meta:{public:!0}},{path:"/callback",name:"Callback",component:ke,meta:{public:!0}},{path:"/activities",name:"Activities",component:fe},{path:"/routes",name:"Routes",component:xe},{path:"/stats",name:"Stats",component:De},{path:"/logout",name:"logout",component:Ve,meta:{public:!0}}],Pu=(0,q.aE)({history:(0,q.LA)("/"),routes:Fu});Pu.beforeEach(((e,t,a)=>{const l=g();console.log("to: "+e.path),console.log("private? "+!e.meta.public+" auth? "+!l.isAuthenticated),e.meta.public||l.isAuthenticated?a():a("/")}));var $u=Pu;const Bu=(0,r.Ey)();(0,l.Ef)(Y).use(Bu).use($u).mount("#app")}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var s=t[l]={exports:{}};return e[l].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,s){if(!l){var n=1/0;for(c=0;c<e.length;c++){l=e[c][0],r=e[c][1],s=e[c][2];for(var o=!0,i=0;i<l.length;i++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](l[i])}))?l.splice(i--,1):(o=!1,s<n&&(n=s));if(o){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[l,r,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/about.d7ac3ec0.js"}}(),function(){a.miniCssF=function(e){return"css/about.9d0e1022.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="TourDeFantasy:";a.l=function(l,r,s,n){if(e[l])e[l].push(r);else{var o,i;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==l||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(i=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+s),o.src=l),e[l]=[r];var p=function(t,a){o.onerror=o.onload=null,clearTimeout(g);var r=e[l];if(delete e[l],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(a)})),t)return t(a)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),i&&document.head.appendChild(o)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,l,r,s){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",a.nc&&(n.nonce=a.nc);var o=function(a){if(n.onerror=n.onload=null,"load"===a.type)r();else{var l=a&&a.type,o=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+l+": "+o+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=l,i.request=o,n.parentNode&&n.parentNode.removeChild(n),s(i)}};return n.onerror=n.onload=o,n.href=t,l?l.parentNode.insertBefore(n,l.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var r=a[l],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}var n=document.getElementsByTagName("style");for(l=0;l<n.length;l++){r=n[l],s=r.getAttribute("data-href");if(s===e||s===t)return r}},l=function(l){return new Promise((function(r,s){var n=a.miniCssF(l),o=a.p+n;if(t(n,o))return r();e(l,o,null,r,s)}))},r={524:0};a.f.miniCss=function(e,t){var a={594:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=l(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,l){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)l.push(r[2]);else{var s=new Promise((function(a,l){r=e[t]=[a,l]}));l.push(r[2]=s);var n=a.p+a.u(t),o=new Error,i=function(l){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var s=l&&("load"===l.type?"missing":l.type),n=l&&l.target&&l.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",o.name="ChunkLoadError",o.type=s,o.request=n,r[1](o)}};a.l(n,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,s,n=l[0],o=l[1],i=l[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(i)var c=i(a)}for(t&&t(l);u<n.length;u++)s=n[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},l=self["webpackChunkTourDeFantasy"]=self["webpackChunkTourDeFantasy"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(647)}));l=a.O(l)})();
//# sourceMappingURL=app.fc3622d6.js.map