(function(){"use strict";var e={2030:function(e,t,a){var l=a(5130),r=a(3367),n=a(6768);const s={id:"app"},o={id:"footer"},i=(0,n.Lk)("img",{src:"api_logo_cptblWith_strava_horiz_light.png",width:"10%/"},null,-1);function u(e,t,a,l,r,u){const c=(0,n.g2)("NavBar"),d=(0,n.g2)("router-view"),g=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",s,[(0,n.bF)(c)]),(0,n.bF)(d),(0,n.Lk)("div",o,[(0,n.bF)(g,{to:"/bypass"},{default:(0,n.k6)((()=>[i])),_:1})])],64)}const c={class:"navbar navbar-expand-lg bg-dark border-bottom border-body","data-bs-theme":"dark"},d={class:"container-fluid"},g=(0,n.Lk)("a",{class:"navbar-brand",href:"#"},"TourDeFantasy",-1),p=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1),k={class:"collapse navbar-collapse",id:"navbarSupportedContent"},v={class:"navbar-nav me-auto mb-2 mb-lg-0"},m={class:"nav-item"},h={key:0,class:"nav-item"},L={key:1,class:"nav-item"},y={key:2,class:"nav-item"},f={key:3,class:"nav-item"},_={key:4,class:"nav-item dropdown"},b=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Profile ",-1),w={class:"dropdown-menu"},E={key:5,class:"nav-item dropdown"},C=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Admin ",-1),R={class:"dropdown-menu"},X={class:"nav-item"},A={key:6,class:"nav-item"};function I(e,t,a,l,r,s){const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("nav",c,[(0,n.Lk)("div",d,[g,p,(0,n.Lk)("div",k,[(0,n.Lk)("ul",v,[(0,n.Lk)("li",m,[(0,n.bF)(o,{class:"nav-link",to:"/leaguehome"},{default:(0,n.k6)((()=>[(0,n.eW)("Home")])),_:1})]),r.authStore.isAuthenticated&&r.leagueStore.leaguePlayer.active_racers?((0,n.uX)(),(0,n.CE)("li",h,[(0,n.bF)(o,{class:"nav-link",to:"/roster"},{default:(0,n.k6)((()=>[(0,n.eW)("Roster")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&new Date("June 28, 2024 21:00:00")>new Date?((0,n.uX)(),(0,n.CE)("li",L,[(0,n.bF)(o,{class:"nav-link",to:"/draftlist"},{default:(0,n.k6)((()=>[(0,n.eW)("Draft")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",y,[(0,n.bF)(o,{class:"nav-link",to:"/fullscores"},{default:(0,n.k6)((()=>[(0,n.eW)("Full Scores")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&[13,14,15,16,17,18,19,20,21].includes((new Date).getHours())?((0,n.uX)(),(0,n.CE)("li",f,[(0,n.bF)(o,{class:"nav-link",to:"/trade"},{default:(0,n.k6)((()=>[(0,n.eW)("Trade")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&"impersonate"!=r.authStore.user.username?((0,n.uX)(),(0,n.CE)("li",_,[b,(0,n.Lk)("ul",w,[(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/joinleague"},{default:(0,n.k6)((()=>[(0,n.eW)("Update Nickname")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/profile"},{default:(0,n.k6)((()=>[(0,n.eW)("Info")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/stats"},{default:(0,n.k6)((()=>[(0,n.eW)("Stats")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/activities"},{default:(0,n.k6)((()=>[(0,n.eW)("Activities")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/routes"},{default:(0,n.k6)((()=>[(0,n.eW)("Routes")])),_:1})])])])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&r.authStore.user.roles.includes("admin")?((0,n.uX)(),(0,n.CE)("li",E,[C,(0,n.Lk)("ul",R,[(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/rundraft"},{default:(0,n.k6)((()=>[(0,n.eW)("Run Draft")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/runtrade"},{default:(0,n.k6)((()=>[(0,n.eW)("Run Trade")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/runscore"},{default:(0,n.k6)((()=>[(0,n.eW)("Run Score")])),_:1})])])])):(0,n.Q3)("",!0),(0,n.Lk)("li",X,[(0,n.bF)(o,{class:"nav-link",to:"/about"},{default:(0,n.k6)((()=>[(0,n.eW)("Rules")])),_:1})]),r.authStore.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",A,[(0,n.bF)(o,{class:"nav-link",to:"/logout"},{default:(0,n.k6)((()=>[(0,n.eW)("Logout")])),_:1})])):(0,n.Q3)("",!0)])])])])}var S=a(4373);const x=(0,r.nY)("auth",{state:()=>({user:{},isAuthenticated:!1}),actions:{async login(e){if(e){console.log("requesting jwt "+e);const t=await S.A.get(`https://www.tourdefantasy.com/callback?code=${e}`),{access_token:a}=t.data;localStorage.setItem("token",a)}const t=localStorage.getItem("token");console.log("getting user info "+t);const a=await S.A.get("https://www.tourdefantasy.com/user/me",{headers:{Authorization:`Bearer ${t}`}});this.user=a.data,this.isAuthenticated=!0},async impersonate(e){if(e){const t=await S.A.put(`https://www.tourdefantasy.com/bypass?user_id=${e}`,{}),{access_token:a}=t.data;localStorage.setItem("token",a)}const t=localStorage.getItem("token");console.log("getting user info "+t);const a=await S.A.get("https://www.tourdefantasy.com/user/me",{headers:{Authorization:`Bearer ${t}`}});this.user=a.data,this.isAuthenticated=!0},logout(){this.user={},this.isAuthenticated=!1,localStorage.removeItem("token")}}});a(4114),a(7072),a(4979),a(1678);const P=(0,r.nY)("racer",{state:()=>({allRacers:[],racers:[],draftList:[]}),actions:{async getRacerlist(e){const t=localStorage.getItem("token"),a=await S.A.get(`https://www.tourdefantasy.com/racer/race?race_url=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.allRacers=a.data},async loadDraftlist(e){const t=localStorage.getItem("token"),a=await S.A.get(`https://www.tourdefantasy.com/racer/draftlist?race_url=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.racers=a.data},async updateDraftlist(e){const t=localStorage.getItem("token");await S.A.put(`https://www.tourdefantasy.com/racer/draftlist?race_url=${e}`,this.racers,{headers:{Authorization:`Bearer ${t}`}})},async getAllDraftlist(e){const t=localStorage.getItem("token"),a=await S.A.get(`https://www.tourdefantasy.com/racer/alldraftlists?league_id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),l=F(),r=l.players,n=a.data;n.forEach((e=>{e.racer_list.forEach((e=>{e.player=null}))})),this.draftList=[],r.forEach((e=>{this.draftList.push(n.find((t=>t.user_strava_id==e.player_strava_id)))}))},insertBefore(e,t){let a=this.racers.find((t=>t.name==e)),l=this.racers.find((e=>e.name==t)),r=this.racers.indexOf(l),n=this.racers.indexOf(a);console.log(a+" "+l+" "+r+" "+n),this.racers.splice(n,1),this.racers.splice(r,0,a)},move(e,t){if(0==e&&"up"==t)return;if(e==this.racers.length-1&&"up"!=t)return;let a=this.racers.splice(e,1);"top"==t?this.racers.splice(0,0,a[0]):this.racers.splice("up"==t?e-1:e+1,0,a[0])}}}),F=(0,r.nY)("league",{state:()=>({league:{},players:[],race:{},leaguePlayer:{},tradeList:[],scoresForStage:[],stagePlayers:[],announcements:[]}),actions:{getPlayerByStravaId(e){return this.players.find((t=>t.player_strava_id==e))},getPlayerPositionByStravaId(e){return this.players.indexOf(this.players.find((t=>t.player_strava_id==e)))},shuffle(){let e=this.players.length;while(0!=e){let t=Math.floor(Math.random()*e);e--,[this.players[e],this.players[t]]=[this.players[t],this.players[e]]}},async submitDraft(){const e=localStorage.getItem("token");await S.A.put("https://www.tourdefantasy.com/league/draftresult",this.players.slice().reverse(),{headers:{Authorization:`Bearer ${e}`}})},async join(e,t){if(e){const a=localStorage.getItem("token"),l=await S.A.put(`https://www.tourdefantasy.com/league/join?code=${e}&nickname=${t}`,{},{headers:{Authorization:`Bearer ${a}`}});this.league=l.data}},async getRace(){const e=localStorage.getItem("token"),t=await S.A.get(`https://www.tourdefantasy.com/race/url?url=${this.league.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});this.race=t.data},getStageNameByURL(e){let t=this.race.days.find((e=>{e.url}));return t?t.name:"--"},async getRaceScoreByStage(e){const t=localStorage.getItem("token"),a=await S.A.get(`https://www.tourdefantasy.com/racerScore/search?stage=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.scoresForStage=a.data;let l=Map.groupBy(this.scoresForStage,(({racer:e})=>e));const r=P();let n=this.players.slice();n.forEach((t=>{t.stage_scores&&t.stage_scores.find((t=>t.stage_url==e))?t.stageRacers=t.stage_scores.find((t=>t.stage_url==e)).racers.slice():t.stageRacers=t.active_racers.slice(),t.stageRacers.forEach((e=>{e.scores=null,l.has(e.url)&&(e.scores=l.get(e.url),l.delete(e.url))}))}));const s={player_nickname:"N/A",stageRacers:[]};l.forEach(((e,t)=>{let a=structuredClone(r.allRacers.find((e=>e.url==t)));a.scores=e,s.stageRacers.push(a)})),n.push(s);let o=[0,0,20,30,50];n.forEach((e=>{e.stageScore=0,e.jerseys=[],e.stageRacers.forEach((t=>{t.scores&&t.scores.forEach((t=>{e.stageScore+=t.point,0==t.point&&e.jerseys.push(t.category)}))})),e.stageScore+=o[e.jerseys.length]})),this.stagePlayers=n},async submitStageScore(e){let t=0,a=null;this.players.forEach((l=>{let r={stage_url:e,total_score:l.stageScore,racers:l.stageRacers};l.stageScore>t&&(t=l.stageScore,a=l.player_nickname),l.stage_scores||(l.stage_scores=[]);let n=l.stage_scores.findIndex((t=>t.stage_url==e));-1!=n?l.stage_scores.splice(n,1,r):l.stage_scores.push(r),l.current_score=l.stage_scores.reduce(((e,{total_score:t})=>e+t),0);const s=localStorage.getItem("token");S.A.put("https://www.tourdefantasy.com/league/leagueplayers",l,{headers:{Authorization:`Bearer ${s}`}}),l.stageScore=0,l.stageRacers=[]})),console.log(this.race.days);let l="New scores are in! <strong>"+a+"</strong> scored "+t;const r=localStorage.getItem("token");await S.A.post("https://www.tourdefantasy.com/league/announcement",{message:l,expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${r}`}})},async loadLeague(e){const t=localStorage.getItem("token"),a=await S.A.get(`https://www.tourdefantasy.com/league/id/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.league=a.data},async getLeaguePlayers(e){const t=localStorage.getItem("token"),a=await S.A.get(`https://www.tourdefantasy.com/league/${e}/players`,{headers:{Authorization:`Bearer ${t}`}}),l=x();this.leaguePlayer=a.data.find((e=>e.player_strava_id==l.user.strava_id)),console.log("PLAYER: "+this.leaguePlayer.active_racers);let r=[a.data.length];a.data.forEach((e=>{r[this.league.players.indexOf(e.player_strava_id)]=e,e.stage_scores.sort(((e,t)=>parseInt(t.stage_url.substring(t.stage_url.lastIndexOf("-")+1))-parseInt(e.stage_url.substring(e.stage_url.lastIndexOf("-")+1))))})),this.players=r},moveRoaster(e,t){let a=this.leaguePlayer.active_racers.concat(this.leaguePlayer.bench_racers),l=a.find((t=>t.name==e));this.leaguePlayer.active_racers?this.leaguePlayer.active_racers=this.leaguePlayer.active_racers.filter((t=>(console.log(t.name==e),t.name!==e))):this.leaguePlayer.active_racers=[],this.leaguePlayer.bench_racers?this.leaguePlayer.bench_racers=this.leaguePlayer.bench_racers.filter((t=>t.name!==e)):this.leaguePlayer.bench_racers=[],"active"==t?this.leaguePlayer.active_racers.push(l):this.leaguePlayer.bench_racers.push(l)},async submitRoaster(){const e=localStorage.getItem("token"),t=await S.A.put("https://www.tourdefantasy.com/league/leagueplayers",this.leaguePlayer,{headers:{Authorization:`Bearer ${e}`}});console.log("submit roaster: "+t),await S.A.post("https://www.tourdefantasy.com/league/announcement",{message:"<strong>"+this.leaguePlayer.player_nickname+"</strong> updated roster!",expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${e}`}}),200==t.status&&alert("Roster change successful.")},async submitTrade(e,t){e.player=this.leaguePlayer.player_strava_id.toString();const a=localStorage.getItem("token"),l=await S.A.post("https://www.tourdefantasy.com/league/trade",{fromRacer:e,toRacer:t},{headers:{Authorization:`Bearer ${a}`}});this.tradeList=l.data,await S.A.post("https://www.tourdefantasy.com/league/announcement",{message:"<strong>"+this.leaguePlayer.player_nickname+"</strong> submitted a trade request!",expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${a}`}})},async getTradeRequests(){const e=localStorage.getItem("token"),t=await S.A.get(`https://www.tourdefantasy.com/league/traderequests?raceurl=${this.league.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});let a=t.data.slice();a.sort(((e,t)=>{let a=e.toRacer.ranking-t.toRacer.ranking;if(0==a){let a=this.players.indexOf(this.players.find((e=>e.player_strava_id==t.player_strava_id))),l=this.players.indexOf(this.players.find((t=>t.player_strava_id==e.player_strava_id)));return l-a}return a}));const l=[],r=[];a.forEach((e=>{-1==l.findIndex((t=>t.url==e.toRacer.url))&&-1==r.indexOf(e.player_strava_id)&&(l.push(e.toRacer),r.push(e.player_strava_id),e.selected=!0)})),this.tradeList=a},async cancelTradeRequest(e){const t=localStorage.getItem("token");await S.A.delete(`https://www.tourdefantasy.com/league/canceltrade?id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),await this.getTradeRequests()},async completeTradeRequests(){let e=[],t=this.tradeList.filter((e=>e.selected));t.forEach((t=>{let a=this.players.find((e=>e.player_strava_id==t.player_strava_id)),l=-1==a.active_racers.findIndex((e=>e.url==t.fromRacer.url))?a.bench_racers:a.active_racers;l.splice(l.findIndex((e=>e.url==t.fromRacer.url)),1,t.toRacer),e.push(a)})),e.sort(((e,t)=>{this.league.players.indexOf(t.player_strava_id),this.league.players.indexOf(e.player_strava_id)})),e.forEach((e=>{this.players.splice(this.players.indexOf(e),1),this.players.push(e)}));const a=localStorage.getItem("token");await S.A.put("https://www.tourdefantasy.com/league/completetrade",{accepted:t,players:this.players},{headers:{Authorization:`Bearer ${a}`}});let l=t.length>0?"Trade results: <br>":"No trade completed.";t.forEach((e=>{l=l.concat("<strong>"+this.getPlayerByStravaId(e.player_strava_id).player_nickname+"</strong> acquired <strong>"+e.toRacer.name+"</strong><br>")})),await S.A.post("https://www.tourdefantasy.com/league/announcement",{message:l,expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${a}`}})},async getAnnouncements(){const e=localStorage.getItem("token"),t=await S.A.get(`https://www.tourdefantasy.com/league/newannouncements?league_id=${this.league.id}&expiration=${Date.now()}`,{headers:{Authorization:`Bearer ${e}`}});this.announcements=t.data}}});var T={name:"NavBar",data(){return{authStore:x(),leagueStore:F()}}},D=a(1241);const $=(0,D.A)(T,[["render",I]]);var K=$,B={name:"App",components:{NavBar:K}};const j=(0,D.A)(B,[["render",u]]);var W=j,N=a(1387);const z=e=>((0,n.Qi)("data-v-23c4ca94"),e=e(),(0,n.jt)(),e),O={id:"intro",class:"bg-image shadow-2-strong"},M={class:"container d-flex align-items-center justify-content-center text-center h-100"},Q={class:"card text-bg-dark w-50 w-md-50"},V=z((()=>(0,n.Lk)("h2",{class:"card-header"},"Sign In",-1))),q={class:"card-body"},H=z((()=>(0,n.Lk)("img",{src:"btn_strava_connectwith_orange.png",class:"img-fluid"},null,-1))),J=[H];function U(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",O,[(0,n.Lk)("div",M,[(0,n.Lk)("div",Q,[V,(0,n.Lk)("div",q,[(0,n.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>s.login&&s.login(...e))},J)])])])])])}var Y={async created(){const e=localStorage.getItem("token");if(e){console.log("getting user info "+e);try{const e=x(),t=F();await e.login(),e.user.current_league_id?(await t.loadLeague(e.user.current_league_id),this.$router.push({name:"LeagueHome"})):this.$router.push({name:"JoinLeague"})}catch(t){console.error("Error during auto login:",t),localStorage.removeItem("token")}}},methods:{login(){window.location.href="https://www.tourdefantasy.com/login"}}};const G=(0,D.A)(Y,[["render",U],["__scopeId","data-v-23c4ca94"]]);var Z=G;const ee=(0,n.Lk)("p",null,"Logging in...",-1),te=[ee];function ae(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,te)}a(4603),a(7566),a(8721);var le={async created(){const e=new URLSearchParams(window.location.search),t=e.get("code");if(t)try{const e=x(),a=F();await e.login(t),e.user.current_league_id?(await a.loadLeague(e.user.current_league_id),this.$router.push({name:"LeagueHome"})):this.$router.push({name:"JoinLeague"})}catch(a){console.error("Error during callback:",a)}}};const re=(0,D.A)(le,[["render",ae]]);var ne=re,se=a(4232);const oe=(0,n.Lk)("h1",null,"My Activities",-1);function ie(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[oe,(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.activities,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id},(0,se.v_)(e.name),1)))),128))])])}var ue={data(){return{activities:[]}},async created(){const e=localStorage.getItem("token");if(e)try{const t=await S.A.get("https://www.tourdefantasy.com/activities",{headers:{Authorization:`Bearer ${e}`}});this.activities=t.data}catch(t){console.error("Error fetching activities:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const ce=(0,D.A)(ue,[["render",ie]]);var de=ce;const ge=(0,n.Lk)("h1",null,"My Routes",-1),pe=(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Distance"),(0,n.Lk)("th",null,"Elevation")],-1);function ke(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[ge,(0,n.Lk)("table",null,[pe,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.routes,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,se.v_)(e.name),1),(0,n.Lk)("td",null,(0,se.v_)(e.distance),1),(0,n.Lk)("td",null,(0,se.v_)(e.elevation_gain),1)])))),128))])])}var ve={data(){return{routes:[]}},async created(){const e=localStorage.getItem("token");if(e)try{const t=await S.A.get("https://www.tourdefantasy.com/routes",{headers:{Authorization:`Bearer ${e}`}});this.routes=t.data}catch(t){console.error("Error fetching routes:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const me=(0,D.A)(ve,[["render",ke]]);var he=me;const Le=(0,n.Lk)("h1",null,"My Stats",-1),ye=(0,n.Lk)("td",null,"Longest distance",-1),fe=(0,n.Lk)("td",null,"Most elevation",-1);function _e(e,t,a,l,r,s){const o=(0,n.g2)("RideTotal");return(0,n.uX)(),(0,n.CE)("div",null,[Le,(0,n.bF)(o,{title:"All Time",rideTotals:r.allTimeTotals},null,8,["rideTotals"]),(0,n.bF)(o,{title:"Last 4 Weeks",rideTotals:r.recentTotals},null,8,["rideTotals"]),(0,n.bF)(o,{title:"This year",rideTotals:r.yearTotals},null,8,["rideTotals"]),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[ye,(0,n.Lk)("td",null,(0,se.v_)(r.stats.biggest_ride_distance),1)]),(0,n.Lk)("tr",null,[fe,(0,n.Lk)("td",null,(0,se.v_)(r.stats.biggest_climb_elevation_gain),1)])])])}const be=(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Activities"),(0,n.Lk)("th",null,"Distance"),(0,n.Lk)("th",null,"Elev Gain"),(0,n.Lk)("th",null,"Time")],-1);function we(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h3",null,(0,se.v_)(a.title),1),(0,n.Lk)("table",null,[be,(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,se.v_)(a.rideTotals.count),1),(0,n.Lk)("td",null,(0,se.v_)(a.rideTotals.distance),1),(0,n.Lk)("td",null,(0,se.v_)(a.rideTotals.elevation_gain),1),(0,n.Lk)("td",null,(0,se.v_)(a.rideTotals.moving_time),1)])])])}var Ee={props:{title:String,rideTotals:Object}};const Ce=(0,D.A)(Ee,[["render",we]]);var Re=Ce,Xe={data(){return{stats:{},allTimeTotals:{},recentTotals:{},yearTotals:{}}},components:{RideTotal:Re},async created(){const e=localStorage.getItem("token");if(e)try{const t=await S.A.get("https://www.tourdefantasy.com/stats",{headers:{Authorization:`Bearer ${e}`}});this.stats=t.data,this.allTimeTotals=t.data.all_ride_totals,this.recentTotals=t.data.recent_ride_totals,this.yearTotals=t.data.ytd_ride_totals}catch(t){console.error("Error fetching stats:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const Ae=(0,D.A)(Xe,[["render",_e]]);var Ie=Ae;const Se=(0,n.Lk)("p",null,"Logging out...",-1),xe=[Se];function Pe(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,xe)}var Fe={async created(){const e=x();e.logout(),this.$router.push({name:"Login"})}};const Te=(0,D.A)(Fe,[["render",Pe]]);var De=Te,$e=a(144);const Ke=(0,n.Lk)("h1",null,"My Profile",-1),Be=(0,n.Lk)("td",null,"User Name",-1),je=(0,n.Lk)("td",null,"First Name",-1),We=(0,n.Lk)("td",null,"Last Name",-1),Ne=(0,n.Lk)("td",null,"Location",-1),ze=(0,n.Lk)("td",null,"Roles",-1),Oe=(0,n.Lk)("td",null,"Roles",-1),Me=["id","value"],Qe=["for"],Ve=(0,n.Lk)("td",null,"Profile Pic",-1),qe=["src"];var He={__name:"ProfileView",setup(e){const t=x(),a=(0,$e.KR)(t.user),r=["user","super","admin"];return(0,n.sV)((()=>{})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Ke,(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[Be,(0,n.Lk)("td",null,(0,se.v_)(a.value.username),1)]),(0,n.Lk)("tr",null,[je,(0,n.Lk)("td",null,(0,se.v_)(a.value.firstname),1)]),(0,n.Lk)("tr",null,[We,(0,n.Lk)("td",null,(0,se.v_)(a.value.lastname),1)]),(0,n.Lk)("tr",null,[Ne,(0,n.Lk)("td",null,(0,se.v_)(a.value.city)+", "+(0,se.v_)(a.value.state),1)]),(0,n.Lk)("tr",null,[ze,(0,n.Lk)("td",null,(0,se.v_)(a.value.roles),1)]),(0,n.Lk)("tr",null,[Oe,(0,n.Lk)("td",null,[(0,n.Lk)("ul",null,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(r,(e=>(0,n.Lk)("li",{key:e.id},[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:e,value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.roles=e),disabled:"disabled"},null,8,Me),[[l.lH,a.value.roles]]),(0,n.Lk)("label",{for:e.id},(0,se.v_)(e),9,Qe)]))),64))])])]),(0,n.Lk)("tr",null,[Ve,(0,n.Lk)("td",null,[(0,n.Lk)("img",{src:a.value.profile_pic},null,8,qe)])])])]))}};const Je=He;var Ue=Je;const Ye=(0,n.Lk)("h1",{class:"mt-4"},"Join League",-1),Ge={class:"container px-4 text-center"},Ze={class:"row gx-5 mb-3"},et={class:"col"},tt=(0,n.Lk)("label",{for:"inputPassword",class:"form-label"},"League Password",-1),at={class:"row gx-5 mb-3"},lt={class:"col"},rt=(0,n.Lk)("label",{for:"exampleInputPassword1",class:"form-label"},"Nickname",-1),nt={class:"row gx-5"},st={class:"col"};var ot={__name:"JoinLeagueView",setup(e){const t=x(),a=(0,N.rd)(),r=(0,$e.KR)(t.user),s=(0,$e.KR)(""),o=(0,$e.KR)(""),i=async()=>{const e=F();console.log("router: "+a),await e.join(s.value,o.value,r.value.strava_id),a.push({name:"LeagueHome"})};return(0,n.sV)((()=>{})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Ye,(0,n.Lk)("form",null,[(0,n.Lk)("div",Ge,[(0,n.Lk)("div",Ze,[(0,n.Lk)("div",et,[tt,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),class:"form-control",id:"inputPassword","aria-describedby":"emailHelp"},null,512),[[l.Jo,s.value]])])]),(0,n.Lk)("div",at,[(0,n.Lk)("div",lt,[rt,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),class:"form-control",id:"exampleInputPassword1"},null,512),[[l.Jo,o.value]])])]),(0,n.Lk)("div",nt,[(0,n.Lk)("div",st,[(0,n.Lk)("button",{onClick:(0,l.D$)(i,["prevent"]),class:"btn btn-success"},"Join")])])])])]))}};const it=ot;var ut=it;const ct={class:"mt-4"},dt=(0,n.Lk)("button",{type:"button",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," League Info ",-1),gt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},pt={class:"modal-dialog"},kt={class:"modal-content"},vt=(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"League Info"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),mt={class:"modal-body"},ht=(0,n.Lk)("td",null,"Id",-1),Lt=(0,n.Lk)("td",null,"Name",-1),yt=(0,n.Lk)("td",null,"Password",-1),ft=(0,n.Lk)("td",null,"Active Race",-1),_t=["href"],bt=(0,n.Lk)("h3",{class:"mt-4"},"Newsfeed",-1),wt={class:"container w-75 h-50"},Et={class:"announcements-container"},Ct=["innerHTML"],Rt={class:"table mt-4"},Xt=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Username"),(0,n.Lk)("th",{scope:"col"},"Points")])],-1),At={key:0},It={key:1};var St={__name:"LeagueHome",setup(e){const t=F(),a=(0,$e.KR)(t.league),l=(0,n.EW)((()=>{let e=t.players.slice();return e.sort(((e,t)=>t.current_score-e.current_score)),e})),r=(0,n.EW)((()=>t.announcements.slice().reverse())),s=t.getLeaguePlayers;return(0,n.sV)((()=>{s(a.value.id),t.getRace(),t.getAnnouncements()})),(e,s)=>{const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h1",ct,(0,se.v_)(a.value.name),1),dt,(0,n.Lk)("div",gt,[(0,n.Lk)("div",pt,[(0,n.Lk)("div",kt,[vt,(0,n.Lk)("div",mt,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[ht,(0,n.Lk)("td",null,(0,se.v_)(a.value.id),1)]),(0,n.Lk)("tr",null,[Lt,(0,n.Lk)("td",null,(0,se.v_)(a.value.name),1)]),(0,n.Lk)("tr",null,[yt,(0,n.Lk)("td",null,(0,se.v_)(a.value.password),1)]),(0,n.Lk)("tr",null,[ft,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:a.value.active_race_url,target:"prosite"},(0,se.v_)(a.value.activeRace),9,_t)])])])])])])]),bt,(0,n.Lk)("div",wt,[(0,n.Lk)("div",Et,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"alert alert-warning alert-dismissible fade show",role:"alert"},[(0,n.Lk)("span",{innerHTML:e.message},null,8,Ct)])))),128))])]),(0,n.Lk)("table",Rt,[Xt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value,((e,a)=>((0,n.uX)(),(0,n.CE)("tr",{key:e.player_strava_id},[(0,n.Lk)("td",null,(0,se.v_)(a+1),1),e.player_strava_id!=(0,$e.R1)(t).leaguePlayer.player_strava_id?((0,n.uX)(),(0,n.CE)("td",At,[(0,n.bF)(o,{to:{path:"/rosterview",query:{userId:e.player_strava_id}}},{default:(0,n.k6)((()=>[(0,n.eW)((0,se.v_)(e.player_nickname),1)])),_:2},1032,["to"])])):((0,n.uX)(),(0,n.CE)("td",It,[(0,n.bF)(o,{to:{path:"/roster"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,se.v_)(e.player_nickname),1)])),_:2},1024)])),(0,n.Lk)("td",null,[(0,n.bF)(o,{to:{path:"/detailscore",query:{userId:e.player_strava_id}}},{default:(0,n.k6)((()=>[(0,n.eW)((0,se.v_)(e.current_score),1)])),_:2},1032,["to"])])])))),128))])])])}}};const xt=St;var Pt=xt;const Ft=e=>((0,n.Qi)("data-v-05887c48"),e=e(),(0,n.jt)(),e),Tt=Ft((()=>(0,n.Lk)("h1",{class:"mt-4"},"Draft List",-1))),Dt={class:"d-flex justify-content-center mt-3"},$t={class:"list-group"},Kt=["onDragstart","onDragenter"],Bt={class:"d-flex align-items-center flex-grow-1"},jt=Ft((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),Wt={class:"content-wrapper"},Nt=["href"],zt={key:0},Ot={key:1},Mt={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},Qt={class:"border-end"},Vt=["onClick","disabled"],qt=["onClick","disabled"],Ht=["onClick","disabled"];var Jt={__name:"DraftListView",setup(e){const t=F(),a=P(),r=(0,$e.KR)(t.league),s=(0,n.EW)((()=>a.racers)),o=a.loadDraftlist,i=(0,$e.KR)("");function u(e,t){i.value=t.name}function c(e,t){console.log("start dragging "+t.name),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("racerName",t.name)}function d(e){let t=e.dataTransfer.getData("racerName");i.value!=t&&a.insertBefore(t,i.value),i.value="",e.preventDefault()}function g(){a.updateDraftlist(r.value.active_race_url)}return(0,n.sV)((()=>{o(r.value.active_race_url)})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Tt,(0,n.eW)(" "+(0,se.v_)(i.value)+" ",1),(0,n.Lk)("div",Dt,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:g},"Save")])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",{onDrop:t[0]||(t[0]=e=>d(e)),class:"drop-zone",onDragover:t[1]||(t[1]=(0,l.D$)((()=>{}),["prevent"]))},[(0,n.Lk)("ul",$t,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"list-group-item d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>c(t,e),onDragenter:t=>u(t,e)},[(0,n.Lk)("div",Bt,[jt,(0,n.Lk)("div",Wt,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,Nt),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",zt,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Ot," None"))])]),(0,n.Lk)("div",Mt,[(0,n.Lk)("div",Qt,[(0,n.Lk)("button",{onClick:e=>(0,$e.R1)(a).move(t,"up"),type:"button",class:"btn btn-success",disabled:0===t},"↑",8,Vt)]),(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:e=>(0,$e.R1)(a).move(t,"down"),type:"button",class:"btn btn-success",disabled:t===s.value.length-1},"↓",8,qt)]),(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:e=>(0,$e.R1)(a).move(t,"top"),type:"button",class:"btn btn-success",disabled:0===t},"top",8,Ht)])])],40,Kt)))),128))])],32)])])])])]))}};const Ut=(0,D.A)(Jt,[["__scopeId","data-v-05887c48"]]);var Yt=Ut;const Gt=e=>((0,n.Qi)("data-v-45cac7d8"),e=e(),(0,n.jt)(),e),Zt=Gt((()=>(0,n.Lk)("h1",{class:"mt-4"},"My Roster",-1))),ea={class:"d-flex justify-content-center mt-3"},ta=["disabled"],aa={class:"list-group"},la=["onDragstart"],ra={class:"d-flex align-items-center"},na=Gt((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),sa={class:"content-wrapper"},oa=["href"],ia={key:0},ua={key:1},ca={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},da=["onClick"],ga={class:"list-group"},pa=["onDragstart"],ka={class:"d-flex align-items-center"},va=Gt((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),ma={class:"content-wrapper"},ha=["href"],La={key:0},ya={key:1},fa={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},_a={class:"border-end"},ba=["onClick"];var wa={__name:"RosterView",setup(e){const t=F(),a=(0,n.EW)((()=>t.leaguePlayer.active_racers)),r=(0,n.EW)((()=>t.leaguePlayer.bench_racers));function s(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("racerName",t.name)}function o(e,a){const l=e.dataTransfer.getData("racerName");t.moveRoaster(l,a),e.preventDefault()}return(e,i)=>{const u=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[Zt,(0,n.Lk)("div",ea,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:i[0]||(i[0]=e=>(0,$e.R1)(t).submitRoaster()),disabled:8!=a.value.length||(new Date).getHours()>5&&(new Date).getHours()<13},"Save",8,ta),(0,n.bF)(u,{class:"btn btn-outline-success btn-lg mb-3",to:"/trade"},{default:(0,n.k6)((()=>[(0,n.eW)("Trade")])),_:1})])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",{onDrop:i[1]||(i[1]=e=>o(e,"active")),onDragover:i[2]||(i[2]=(0,l.D$)((()=>{}),["prevent"]))},[(0,n.Lk)("ul",aa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>s(t,e)},[(0,n.Lk)("div",ra,[na,(0,n.Lk)("div",sa,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,oa),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",ia,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",ua," None"))])]),(0,n.Lk)("div",ca,[(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:a=>(0,$e.R1)(t).moveRoaster(e.name,"bench"),type:"button",class:"btn btn-success"},"↓",8,da)])])],40,la)))),128))])],32)])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",{onDrop:i[3]||(i[3]=e=>o(e,"bench")),class:"drop-zone",onDragover:i[4]||(i[4]=(0,l.D$)((()=>{}),["prevent"]))},[(0,n.Lk)("ul",ga,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>s(t,e)},[(0,n.Lk)("div",ka,[va,(0,n.Lk)("div",ma,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,ha),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",La,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",ya," None"))])]),(0,n.Lk)("div",fa,[(0,n.Lk)("div",_a,[(0,n.Lk)("button",{onClick:a=>(0,$e.R1)(t).moveRoaster(e.name,"active"),type:"button",class:"btn btn-success"},"↑",8,ba)])])],40,pa)))),128))])],32)])])])])])}}};const Ea=(0,D.A)(wa,[["__scopeId","data-v-45cac7d8"]]);var Ca=Ea;const Ra=e=>((0,n.Qi)("data-v-b3c3a2f2"),e=e(),(0,n.jt)(),e),Xa=Ra((()=>(0,n.Lk)("h1",null,"League",-1))),Aa=Ra((()=>(0,n.Lk)("td",null,"League Id",-1))),Ia=Ra((()=>(0,n.Lk)("td",null,"League Name",-1))),Sa=Ra((()=>(0,n.Lk)("td",null,"Active Race",-1))),xa=["href"],Pa=Ra((()=>(0,n.Lk)("h2",null,"Player Draft Lists",-1))),Fa=["disabled"],Ta=["disabled"];var Da={__name:"RunDraftView",setup(e){const t=F(),a=P(),l=(0,$e.KR)(t.league),r=(0,n.EW)((()=>t.players)),s=(0,n.EW)((()=>a.draftList)),o=a.getAllDraftlist;function i(){t.shuffle(),o(l.value.id),u.value=1}(0,n.sV)((()=>{o(l.value.id)}));const u=(0,$e.KR)(1);function c(){if(13==u.value)return;const e=s.value,t=u.value%2==1?e:e.slice().reverse();t.forEach((e=>{let a=e.racer_list.find((e=>!e.player));t.forEach((t=>{let l=t.racer_list.find((e=>e.name==a.name));l.player=e.user_strava_id.toString()}))})),u.value++}function d(){const e=r.value,a=s.value;e.forEach(((e,t)=>{const l=a[t].racer_list.filter((t=>t.player==e.player_strava_id));console.log(e.player_nickname+": "+l.length),e.active_racers=l.slice(0,8),e.bench_racers=l.slice(8)})),t.submitDraft()}function g(e,t){return e.player?e.player==t.user_strava_id?"own":"taken":""}return(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Xa,(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[Aa,(0,n.Lk)("td",null,(0,se.v_)(l.value.id),1)]),(0,n.Lk)("tr",null,[Ia,(0,n.Lk)("td",null,(0,se.v_)(l.value.name),1)]),(0,n.Lk)("tr",null,[Sa,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:l.value.active_race_url,target:"prosite"},(0,se.v_)(l.value.activeRace),9,xa)])])]),Pa,(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>i())},"Randomize Draft Order "),(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>c()),disabled:u.value>12},"Draft! "+(0,se.v_)(u.value),9,Fa),(0,n.Lk)("button",{onClick:t[2]||(t[2]=e=>d()),disabled:13!=u.value},"Submit Draft Result",8,Ta),(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("th",{key:e.player_strava_id},(0,se.v_)(e.player_nickname),1)))),128))])]),(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,(e=>((0,n.uX)(),(0,n.CE)("td",{key:e},[(0,n.Lk)("div",null,(0,se.v_)(e.user_strava_id),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.racer_list,(t=>((0,n.uX)(),(0,n.CE)("div",{key:t},[(0,n.Lk)("span",{class:(0,se.C4)(g(t,e))},(0,se.v_)(t.name),3),(0,n.Lk)("span",null,"["+(0,se.v_)(t.player)+"]",1)])))),128))])))),128))])])])]))}};const $a=(0,D.A)(Da,[["__scopeId","data-v-b3c3a2f2"]]);var Ka=$a;const Ba=e=>((0,n.Qi)("data-v-c76741a2"),e=e(),(0,n.jt)(),e),ja={class:"d-flex justify-content-center mt-4"},Wa={key:0},Na=Ba((()=>(0,n.Lk)("h1",null,"Trade Requests",-1))),za={class:"list-group"},Oa={class:"d-flex align-items-center flex-grow-1"},Ma=Ba((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),Qa={class:"content-wrapper"},Va=["href"],qa={key:0},Ha={key:1},Ja={class:"text-end ms-3"},Ua=Ba((()=>(0,n.Lk)("div",null,"Requested by:",-1))),Ya={class:"fw-bold"},Ga={class:"ms-5"},Za=["onClick"],el={key:0},tl=Ba((()=>(0,n.Lk)("h1",{class:"text-center"},"Trade",-1))),al={class:"container mt-3"},ll={class:"row justify-content-center align-items-center"},rl={class:"col-md-6"},nl={class:"text-center mb-3"},sl={class:"text-center"},ol=["disabled"],il={class:"container"},ul={class:"row"},cl={class:"col-md-6"},dl=Ba((()=>(0,n.Lk)("h2",null,"Your Roster",-1))),gl={class:"list-group"},pl=["onClick"],kl={class:"d-flex align-items-center flex-grow-1"},vl=Ba((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),ml={class:"content-wrapper"},hl=["href"],Ll={key:0},yl={key:1},fl=["onClick"],_l={class:"d-flex align-items-center flex-grow-1"},bl=Ba((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),wl={class:"content-wrapper"},El=["href"],Cl={key:0},Rl={key:1},Xl={class:"col-md-6"},Al=Ba((()=>(0,n.Lk)("h2",null,"Available Racers",-1))),Il={class:"list-group"},Sl=["onClick"],xl={class:"d-flex align-items-center flex-grow-1"},Pl=Ba((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),Fl={class:"content-wrapper"},Tl=["href"],Dl={key:0},$l={key:1};var Kl={__name:"TradeView",setup(e){const t=F(),a=(0,$e.KR)(t.league),r=(0,n.EW)((()=>t.leaguePlayer.active_racers)),s=(0,n.EW)((()=>t.leaguePlayer.bench_racers)),o=P(),i=(0,n.EW)((()=>o.allRacers.filter((e=>!e.player)))),u=(0,$e.KR)({}),c=(0,$e.KR)({});function d(e){u.value=e}function g(e){c.value=e}const p=(0,n.EW)((()=>t.tradeList.slice().filter((e=>e.player_strava_id==t.leaguePlayer.player_strava_id)))),k=(0,n.EW)((()=>-1!=t.tradeList.findIndex((e=>e.player_strava_id==t.leaguePlayer.player_strava_id))));return(0,n.sV)((async()=>{await o.getRacerlist(a.value.active_race_url),await t.getTradeRequests()})),(e,a)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",ja,[k.value?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",Wa,[Na,(0,n.Lk)("ul",za,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(p.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",Oa,[Ma,(0,n.Lk)("div",Qa,[(0,n.Lk)("a",{href:e.toRacer.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.toRacer.name),1)],8,Va),e.toRacer.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",qa,(0,se.v_)(e.toRacer.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Ha,"None"))])]),(0,n.Lk)("div",Ja,[Ua,(0,n.Lk)("div",Ya,(0,se.v_)((0,$e.R1)(t).getPlayerByStravaId(e.player_strava_id).player_nickname),1)]),(0,n.Lk)("div",Ga,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:a=>(0,$e.R1)(t).cancelTradeRequest(e.id)}," Cancel ",8,Za)])])))),128))])],512)),[[l.aG,p.value.length]]):(0,n.Q3)("",!0)]),k.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",el,[tl,(0,n.Lk)("div",null,"Your current trade priority is "+(0,se.v_)((0,$e.R1)(t).league.players.indexOf((0,$e.R1)(t).leaguePlayer.player_strava_id)+1)+" of "+(0,se.v_)((0,$e.R1)(t).league.players.length),1),(0,n.Lk)("div",al,[(0,n.Lk)("div",ll,[(0,n.Lk)("div",rl,[(0,n.Lk)("div",nl,[(0,n.Lk)("div",null,[(0,n.Lk)("strong",null,(0,se.v_)(u.value.name)+" >> "+(0,se.v_)(c.value.name),1)])]),(0,n.Lk)("div",sl,[(0,n.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:a[0]||(a[0]=e=>(0,$e.R1)(t).submitTrade(u.value,c.value)),disabled:!(u.value.name&&c.value.name)},"Submit",8,ol)])])])]),(0,n.Lk)("div",il,[(0,n.Lk)("div",ul,[(0,n.Lk)("div",cl,[dl,(0,n.Lk)("ul",gl,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.name,class:(0,se.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":u.value===e}]),onClick:t=>d(e)},[(0,n.Lk)("div",kl,[vl,(0,n.Lk)("div",ml,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,hl),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Ll,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",yl,"None"))])])],10,pl)))),128)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.name,class:(0,se.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":u.value===e}]),onClick:t=>d(e)},[(0,n.Lk)("div",_l,[bl,(0,n.Lk)("div",wl,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,El),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Cl,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Rl,"None"))])])],10,fl)))),128))])]),(0,n.Lk)("div",Xl,[Al,(0,n.Lk)("ul",Il,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.name,class:(0,se.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":c.value===e}]),onClick:t=>g(e)},[(0,n.Lk)("div",xl,[Pl,(0,n.Lk)("div",Fl,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,Tl),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Dl,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",$l,"None"))])])],10,Sl)))),128))])])])])]))],64))}};const Bl=(0,D.A)(Kl,[["__scopeId","data-v-c76741a2"]]);var jl=Bl;const Wl=e=>((0,n.Qi)("data-v-62e75c50"),e=e(),(0,n.jt)(),e),Nl=Wl((()=>(0,n.Lk)("h1",null,"Run Trade",-1))),zl=Wl((()=>(0,n.Lk)("td",null,"League Id",-1))),Ol=Wl((()=>(0,n.Lk)("td",null,"League Name",-1))),Ml=Wl((()=>(0,n.Lk)("td",null,"Active Race",-1))),Ql=["href"],Vl=Wl((()=>(0,n.Lk)("td",null,[(0,n.Lk)("h2",null,"Trade Requests")],-1))),ql=Wl((()=>(0,n.Lk)("span",null," >> ",-1)));var Hl={__name:"RunTrade",setup(e){const t=F(),a=(0,$e.KR)(t.league),l=(0,n.EW)((()=>t.tradeList));return(0,n.sV)((()=>{t.getTradeRequests()})),(e,r)=>((0,n.uX)(),(0,n.CE)("div",null,[Nl,(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[zl,(0,n.Lk)("td",null,(0,se.v_)(a.value.id),1)]),(0,n.Lk)("tr",null,[Ol,(0,n.Lk)("td",null,(0,se.v_)(a.value.name),1)]),(0,n.Lk)("tr",null,[Ml,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:a.value.active_race_url,target:"prosite"},(0,se.v_)(a.value.activeRace),9,Ql)])]),(0,n.Lk)("tr",null,[Vl,(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>(0,$e.R1)(t).completeTradeRequests&&(0,$e.R1)(t).completeTradeRequests(...e))}," Finalize Trade ")])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,se.C4)(e.selected?"own":"")},[(0,n.Lk)("span",null,(0,se.v_)(e.toRacer.name)+" ["+(0,se.v_)(e.toRacer.ranking)+"]",1),(0,n.eW)(),ql,(0,n.Lk)("span",null,(0,se.v_)(e.fromRacer.name)+" ["+(0,se.v_)(e.fromRacer.ranking)+"]",1),(0,n.eW)(" by "),(0,n.Lk)("span",null,(0,se.v_)((0,$e.R1)(t).getPlayerByStravaId(e.player_strava_id).player_nickname),1),(0,n.Lk)("span",null," ["+(0,se.v_)((0,$e.R1)(t).getPlayerPositionByStravaId(e.player_strava_id))+"]",1)],2)))),128))])])])]))}};const Jl=(0,D.A)(Hl,[["__scopeId","data-v-62e75c50"]]);var Ul=Jl;const Yl=(0,n.Lk)("h1",null,"Score by Stage",-1),Gl=["value"],Zl=(0,n.Lk)("h2",null,"Racer Scores",-1),er={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},tr={class:"modal-dialog"},ar={class:"modal-content"},lr=(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"League Info"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),rr={class:"modal-body"},nr=(0,n.Lk)("td",null,"Id",-1),sr=(0,n.Lk)("td",null,"Name",-1),or=(0,n.Lk)("td",null,"Password",-1),ir=(0,n.Lk)("td",null,"Active Race",-1),ur=["href"],cr={class:"table"},dr=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"Cat"),(0,n.Lk)("th",{scope:"col"},"Racer"),(0,n.Lk)("th",{scope:"col"},"Points")])],-1),gr=(0,n.Lk)("h2",null,"Player scores",-1),pr={style:{color:"red"}};var kr={__name:"RunScoresView",setup(e){const t=F(),a=P(),r=(0,$e.KR)(t.league),s=t.getLeaguePlayers,o=(0,$e.KR)(t.race.days),i=(0,$e.KR)("https://www.procyclingstats.com/race/tour-de-france/2024/stage-1"),u=t.getRaceScoreByStage,c=(0,n.EW)((()=>t.scoresForStage.slice().sort(((e,t)=>t.point-e.point))));return(0,n.sV)((async()=>{await a.getRacerlist(r.value.active_race_url),await s(r.value.id),await t.getRace()})),(e,a)=>((0,n.uX)(),(0,n.CE)("div",null,[Yl,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),onChange:a[1]||(a[1]=e=>(0,$e.R1)(u)(i.value))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.value,(e=>((0,n.uX)(),(0,n.CE)("option",{value:e.url,key:e},(0,se.v_)(e.name),9,Gl)))),128))],544),[[l.u1,i.value]]),Zl,(0,n.Lk)("div",er,[(0,n.Lk)("div",tr,[(0,n.Lk)("div",ar,[lr,(0,n.Lk)("div",rr,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[nr,(0,n.Lk)("td",null,(0,se.v_)(r.value.id),1)]),(0,n.Lk)("tr",null,[sr,(0,n.Lk)("td",null,(0,se.v_)(r.value.name),1)]),(0,n.Lk)("tr",null,[or,(0,n.Lk)("td",null,(0,se.v_)(r.value.password),1)]),(0,n.Lk)("tr",null,[ir,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:r.value.active_race_url,target:"prosite"},(0,se.v_)(r.value.activeRace),9,ur)])])])])])])]),(0,n.Lk)("table",cr,[dr,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.value,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e},[(0,n.Lk)("td",null,(0,se.v_)(e.category),1),(0,n.Lk)("td",null,(0,se.v_)(e.racer),1),(0,n.Lk)("td",null,(0,se.v_)(e.point),1)])))),128))])]),gr,(0,n.Lk)("button",{onClick:a[2]||(a[2]=e=>(0,$e.R1)(t).submitStageScore(i.value))},"Submit"),(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,$e.R1)(t).stagePlayers,(e=>((0,n.uX)(),(0,n.CE)("th",{key:e},(0,se.v_)(e.player_nickname),1)))),128))])]),(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,$e.R1)(t).stagePlayers,(e=>((0,n.uX)(),(0,n.CE)("td",{key:e},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.stageRacers,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.Lk)("div",null,[(0,n.Lk)("b",null,(0,se.v_)(e.name),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.scores,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},(0,se.v_)(e.category)+": "+(0,se.v_)(e.point),1)))),128))])))),128)),(0,n.Lk)("div",pr,(0,se.v_)(e.stageScore),1),(0,n.Lk)("div",null,(0,se.v_)(e.jerseys),1)])))),128))])])])]))}};const vr=kr;var mr=vr;const hr=(0,n.Lk)("h1",null,"By Pass",-1),Lr={class:"container px-4 text-center"},yr={class:"row gx-5 mb-3"},fr={class:"col"},_r=(0,n.Lk)("label",{for:"inputPassword",class:"form-label"},"User Id",-1),br={class:"row gx-5"},wr={class:"col"};var Er={__name:"ByPass",setup(e){const t=x(),a=F(),r=(0,N.rd)(),s=(0,$e.KR)(""),o=async()=>{await t.impersonate(s.value),t.user.current_league_id?(await a.loadLeague(t.user.current_league_id),r.push({name:"LeagueHome"})):r.push({name:"JoinLeague"})};return(0,n.sV)((()=>{})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[hr,(0,n.Lk)("form",null,[(0,n.Lk)("div",Lr,[(0,n.Lk)("div",yr,[(0,n.Lk)("div",fr,[_r,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),class:"form-control",id:"inputPassword","aria-describedby":"emailHelp"},null,512),[[l.Jo,s.value]])])])]),(0,n.Lk)("div",br,[(0,n.Lk)("div",wr,[(0,n.Lk)("button",{onClick:(0,l.D$)(o,["prevent"]),class:"btn btn-primary"},"Impersonate")])])])]))}};const Cr=Er;var Rr=Cr;const Xr=(0,n.Lk)("h1",{class:"mt-4"},"Scores",-1),Ar=["href"],Ir={class:"table"},Sr=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"Racer"),(0,n.Lk)("th",{scope:"col"},"Points Earned"),(0,n.Lk)("th",{scope:"col"},"How Earned")])],-1),xr={key:0},Pr={key:0},Fr=(0,n.Lk)("img",{src:"/white.png",alt:"White Jersey",style:{width:"20px",height:"20px"}},null,-1),Tr=[Fr],Dr={key:1},$r=(0,n.Lk)("img",{src:"/yellow.png",alt:"Yellow Jersey",style:{width:"20px",height:"20px"}},null,-1),Kr=[$r],Br={key:2},jr=(0,n.Lk)("img",{src:"/green.png",alt:"Green Jersey",style:{width:"20px",height:"20px"}},null,-1),Wr=[jr],Nr={key:3},zr=(0,n.Lk)("img",{src:"/polkadot.png",alt:"Polka-dot Jersey",style:{width:"20px",height:"20px"}},null,-1),Or=[zr],Mr={key:0},Qr={key:0},Vr={key:1},qr={key:0},Hr={key:0},Jr={class:"border-bottom border-2"},Ur=(0,n.Lk)("th",{scope:"row"},"Total",-1),Yr=(0,n.Lk)("td",null,null,-1);var Gr={__name:"DetailScoresView",setup(e){const t=F(),a=(0,$e.KR)(t.league),l=(0,n.EW)((()=>{const e=new URLSearchParams(window.location.search),a=e.get("userId"),l=t.players.find((e=>(console.log(e.player_strava_id),e.player_strava_id==a)));return l})),r=(0,$e.KR)([]),s=(0,$e.KR)(new Map),o=async()=>{const e=localStorage.getItem("token"),t=await S.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});r.value=t.data;let l=Map.groupBy(r.value,(({stage:e})=>e));l.forEach(((e,t,a)=>{a.set(t,Map.groupBy(e,(({racer:e})=>e)))})),s.value=l},i=(0,n.EW)((()=>Map.groupBy(t.race.days,(({url:e})=>e)))),u=t.getLeaguePlayers;return(0,n.sV)((async()=>{await u(a.value.id),await t.getRace(),await o()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Xr,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value.stage_scores,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.Lk)("h2",null,[(0,n.Lk)("a",{href:e.stage_url,target:"prosite"},(0,se.v_)(i.value.get(e.stage_url)[0].name),9,Ar)]),(0,n.Lk)("table",Ir,[Sr,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.racers,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.url},[(0,n.Lk)("td",null,[(0,n.Lk)("b",null,(0,se.v_)(t.name),1),s.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("span",xr,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("span",{key:e},["white"===e.category?((0,n.uX)(),(0,n.CE)("span",Pr,Tr)):(0,n.Q3)("",!0),"yellow"===e.category?((0,n.uX)(),(0,n.CE)("span",Dr,Kr)):(0,n.Q3)("",!0),"green"===e.category?((0,n.uX)(),(0,n.CE)("span",Br,Wr)):(0,n.Q3)("",!0),"polkadot"===e.category?((0,n.uX)(),(0,n.CE)("span",Nr,Or)):(0,n.Q3)("",!0)])))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[s.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("div",Mr,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?0!==e.point?((0,n.uX)(),(0,n.CE)("span",Vr,(0,se.v_)(e.point),1)):(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Qr,(0,se.v_)(e.point),1))])))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[s.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("div",qr,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Hr,(0,se.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1))])))),128))])):(0,n.Q3)("",!0)])])))),128)),(0,n.Lk)("tr",Jr,[Ur,(0,n.Lk)("td",null,(0,se.v_)(e.total_score),1),Yr])])])])))),128))]))}};const Zr=Gr;var en=Zr;const tn=e=>((0,n.Qi)("data-v-adda267c"),e=e(),(0,n.jt)(),e),an={class:"mt-4"},ln={class:"d-flex justify-content-center mt-3"},rn={class:"list-group"},nn={class:"d-flex align-items-center"},sn=tn((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),on={class:"content-wrapper"},un=["href"],cn={key:0},dn={key:1},gn={class:"list-group"},pn={class:"d-flex align-items-center"},kn=tn((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),vn={class:"content-wrapper"},mn=["href"],hn={key:0},Ln={key:1},yn=tn((()=>(0,n.Lk)("div",{class:"btn-group ms-2",role:"group","aria-label":"Basic example"},null,-1)));var fn={__name:"RosterViewOnly",setup(e){const t=F(),a=(0,n.EW)((()=>{const e=new URLSearchParams(window.location.search),a=e.get("userId"),l=t.players.find((e=>(console.log(e.player_strava_id),e.player_strava_id==a)));return l}));return(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h1",an,(0,se.v_)(a.value.player_nickname),1),(0,n.Lk)("div",ln,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",null,[(0,n.Lk)("ul",rn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value.active_racers,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",nn,[sn,(0,n.Lk)("div",on,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,un),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",cn,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",dn," None"))])])])))),128))])])])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",null,[(0,n.Lk)("ul",gn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value.bench_racers,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",pn,[kn,(0,n.Lk)("div",vn,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,se.v_)(e.name),1)],8,mn),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",hn,(0,se.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Ln," None"))])]),yn])))),128))])])])])])])]))}};const _n=(0,D.A)(fn,[["__scopeId","data-v-adda267c"]]);var bn=_n;const wn=(0,n.Lk)("h1",{class:"mt-4"},"Full Scores",-1),En=(0,n.Lk)("span",null,"* available racers",-1),Cn={class:"table"},Rn=(0,n.Lk)("th",{scope:"col"},"Racer",-1),Xn=(0,n.Lk)("th",{scope:"col"},"Total",-1),An={style:{"vertical-align":"middle"}},In={style:{"vertical-align":"middle"}},Sn={key:0},xn=["src","alt"],Pn=(0,n.Lk)("img",{src:"/blank.png",style:{width:"1px",height:"20px"}},null,-1),Fn={key:0},Tn=["data-bs-target"],Dn=["id"],$n={key:0};var Kn={__name:"FullScoresView",setup(e){const t=F(),a=(0,$e.KR)(t.league),l=(0,$e.KR)([]),r=(0,$e.KR)(new Map),s=(0,$e.KR)([]),o=async()=>{const e=localStorage.getItem("token"),t=await S.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});l.value=t.data;let n=Map.groupBy(l.value,(({racer:e})=>e)),o=new Map;n.forEach(((e,t)=>{o.set(t,e.reduce(((e,t)=>e+t.point),0))}));let i=Array.from(o,(e=>({url:e[0],point:e[1]})));i.sort(((e,t)=>t.point-e.point)),s.value=i,n.forEach(((e,t,a)=>{let l=Map.groupBy(e,(({stage:e})=>e));a.set(t,l)})),r.value=n},i=(0,n.EW)((()=>{let e=t.race.days.slice().filter((e=>"Restday"!=e.name));return e.sort(((e,t)=>e.seq-t.seq)),e.forEach((e=>{e.shortname=e.url.substring(e.url.lastIndexOf("-")+1)})),e})),u=P(),c=(0,n.EW)((()=>{let e=Map.groupBy(u.allRacers,(({url:e})=>e));return e})),d=t.getLeaguePlayers;return(0,n.sV)((async()=>{await u.getRacerlist(a.value.active_race_url),await d(a.value.id),await t.getRace(),await o()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[wn,(0,n.eW)(),En,(0,n.Lk)("table",Cn,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[Rn,Xn,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("th",{key:e,scope:"col"},(0,se.v_)(e.shortname),1)))),128))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e},[(0,n.Lk)("td",An,[(0,n.Lk)("b",null,(0,se.v_)(c.value.get(e.url)[0].name)+" "+(0,se.v_)(c.value.get(e.url)[0].player?"":"*"),1)]),(0,n.Lk)("td",In,[(0,n.Lk)("b",null,(0,se.v_)(e.point),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:a},[r.value.get(e.url).get(t.url)?((0,n.uX)(),(0,n.CE)("div",Sn,[(0,n.Lk)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value.get(e.url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("span",{key:e},[["white","yellow","polkadot","green","1","2","3"].includes(e.category)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:"/"+e.category+".png",alt:e.category+" jersey",style:{width:"20px",height:"20px"}},null,8,xn)):(0,n.Q3)("",!0)])))),128)),Pn]),0!=r.value.get(e.url).get(t.url).reduce(((e,t)=>e+t.point),0)?((0,n.uX)(),(0,n.CE)("div",Fn,[(0,n.Lk)("a",{href:"#","data-bs-toggle":"collapse","data-bs-target":"#collapse"+e.url+t.url},(0,se.v_)(r.value.get(e.url).get(t.url).reduce(((e,t)=>e+t.point),0)),9,Tn)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{id:"collapse"+e.url+t.url,class:"collapse"},[(0,n.Lk)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value.get(e.url).get(t.url),((e,t)=>((0,n.uX)(),(0,n.CE)("span",{key:t},[["white","yellow","polkadot","green"].includes(e.category)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",$n,[(0,n.Lk)("span",null,(0,se.v_)(e.point)+" - "+(0,se.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1)]))])))),128))])],8,Dn)])):(0,n.Q3)("",!0)])))),128))])))),128))])])]))}};const Bn=Kn;var jn=Bn;const Wn=[{path:"/fullscores",name:"FullScoreView",component:jn},{path:"/rosterview",name:"RosterView",component:bn},{path:"/detailscore",name:"DetailScore",component:en},{path:"/bypass",name:"ByPass",component:Rr,meta:{public:!0}},{path:"/runscore",name:"RunScore",component:mr},{path:"/runtrade",name:"RunTrade",component:Ul},{path:"/trade",name:"Trade",component:jl},{path:"/rundraft",name:"RunDraft",component:Ka},{path:"/roster",name:"Roster",component:Ca},{path:"/draftlist",name:"DraftList",component:Yt},{path:"/joinleague",name:"JoinLeague",component:ut},{path:"/leaguehome",name:"LeagueHome",component:Pt},{path:"/profile",name:"Profile",component:Ue},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,3607)),meta:{public:!0}},{path:"/",name:"Login",component:Z,meta:{public:!0}},{path:"/callback",name:"Callback",component:ne,meta:{public:!0}},{path:"/activities",name:"Activities",component:de},{path:"/routes",name:"Routes",component:he},{path:"/stats",name:"Stats",component:Ie},{path:"/logout",name:"logout",component:De,meta:{public:!0}}],Nn=(0,N.aE)({history:(0,N.LA)("/"),routes:Wn});Nn.beforeEach(((e,t,a)=>{const l=x();console.log("to: "+e.path),console.log("private? "+!e.meta.public+" auth? "+!l.isAuthenticated),e.meta.public||l.isAuthenticated?a():a("/")}));var zn=Nn;const On=(0,r.Ey)();(0,l.Ef)(W).use(On).use(zn).mount("#app")}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,n){if(!l){var s=1/0;for(c=0;c<e.length;c++){l=e[c][0],r=e[c][1],n=e[c][2];for(var o=!0,i=0;i<l.length;i++)(!1&n||s>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[i])}))?l.splice(i--,1):(o=!1,n<s&&(s=n));if(o){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/about.33534aef.js"}}(),function(){a.miniCssF=function(e){return"css/about.c430cbe5.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="TourDeFantasy:";a.l=function(l,r,n,s){if(e[l])e[l].push(r);else{var o,i;if(void 0!==n)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==l||d.getAttribute("data-webpack")==t+n){o=d;break}}o||(i=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+n),o.src=l),e[l]=[r];var g=function(t,a){o.onerror=o.onload=null,clearTimeout(p);var r=e[l];if(delete e[l],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=g.bind(null,o.onerror),o.onload=g.bind(null,o.onload),i&&document.head.appendChild(o)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,l,r,n){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",a.nc&&(s.nonce=a.nc);var o=function(a){if(s.onerror=s.onload=null,"load"===a.type)r();else{var l=a&&a.type,o=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+l+": "+o+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=l,i.request=o,s.parentNode&&s.parentNode.removeChild(s),n(i)}};return s.onerror=s.onload=o,s.href=t,l?l.parentNode.insertBefore(s,l.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var r=a[l],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var s=document.getElementsByTagName("style");for(l=0;l<s.length;l++){r=s[l],n=r.getAttribute("data-href");if(n===e||n===t)return r}},l=function(l){return new Promise((function(r,n){var s=a.miniCssF(l),o=a.p+s;if(t(s,o))return r();e(l,o,null,r,n)}))},r={524:0};a.f.miniCss=function(e,t){var a={594:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=l(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,l){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)l.push(r[2]);else{var n=new Promise((function(a,l){r=e[t]=[a,l]}));l.push(r[2]=n);var s=a.p+a.u(t),o=new Error,i=function(l){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var n=l&&("load"===l.type?"missing":l.type),s=l&&l.target&&l.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}};a.l(s,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,n,s=l[0],o=l[1],i=l[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(i)var c=i(a)}for(t&&t(l);u<s.length;u++)n=s[u],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},l=self["webpackChunkTourDeFantasy"]=self["webpackChunkTourDeFantasy"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(2030)}));l=a.O(l)})();
//# sourceMappingURL=app.2edb9dce.js.map