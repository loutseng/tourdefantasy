(function(){"use strict";var e={835:function(e,t,a){var l=a(5130),r=a(3367),n=a(6768);const s={id:"app"},o={id:"footer"},u=(0,n.Lk)("img",{src:"api_logo_cptblWith_strava_horiz_light.png",width:"10%/"},null,-1);function i(e,t,a,l,r,i){const c=(0,n.g2)("NavBar"),d=(0,n.g2)("AutoBot"),g=(0,n.g2)("router-view"),p=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",s,[(0,n.bF)(c),(0,n.bF)(d)]),(0,n.bF)(g),(0,n.Lk)("div",o,[(0,n.bF)(p,{to:"/bypass"},{default:(0,n.k6)((()=>[u])),_:1})])],64)}const c={class:"navbar navbar-expand-lg bg-dark border-bottom border-body","data-bs-theme":"dark"},d={class:"container-fluid"},g=(0,n.Lk)("a",{class:"navbar-brand",href:"#"},"TourDeFantasy",-1),p=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1),k={class:"collapse navbar-collapse",id:"navbarSupportedContent"},v={class:"navbar-nav me-auto mb-2 mb-lg-0"},h={class:"nav-item"},m={class:"nav-item"},y={key:0,class:"nav-item"},L={key:1,class:"nav-item"},f={key:2,class:"nav-item"},b={key:3,class:"nav-item"},_={key:4,class:"nav-item dropdown"},w=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Profile ",-1),C={class:"dropdown-menu"},E={key:5,class:"nav-item dropdown"},R=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Admin ",-1),A={class:"dropdown-menu"},S={class:"nav-item"},X={key:6,class:"nav-item"};function x(e,t,a,l,r,s){const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("nav",c,[(0,n.Lk)("div",d,[g,p,(0,n.Lk)("div",k,[(0,n.Lk)("ul",v,[(0,n.Lk)("li",h,[(0,n.bF)(o,{class:"nav-link",to:"/leaguehome"},{default:(0,n.k6)((()=>[(0,n.eW)("Home")])),_:1})]),(0,n.Lk)("li",m,[(0,n.bF)(o,{class:"nav-link",to:"/leaguepreview"},{default:(0,n.k6)((()=>[(0,n.eW)("League Preview")])),_:1})]),r.authStore.isAuthenticated&&r.leagueStore.leaguePlayer.active_racers?((0,n.uX)(),(0,n.CE)("li",y,[(0,n.bF)(o,{class:"nav-link",to:"/roster"},{default:(0,n.k6)((()=>[(0,n.eW)("Roster")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&new Date("June 28, 2024 21:00:00")>new Date?((0,n.uX)(),(0,n.CE)("li",L,[(0,n.bF)(o,{class:"nav-link",to:"/draftlist"},{default:(0,n.k6)((()=>[(0,n.eW)("Draft")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",f,[(0,n.bF)(o,{class:"nav-link",to:"/fullscores"},{default:(0,n.k6)((()=>[(0,n.eW)("Full Scores")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&[13,14,15,16,17,18,19,20,21].includes((new Date).getHours())?((0,n.uX)(),(0,n.CE)("li",b,[(0,n.bF)(o,{class:"nav-link",to:"/trade"},{default:(0,n.k6)((()=>[(0,n.eW)("Trade")])),_:1})])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&"impersonate"!=r.authStore.user.username?((0,n.uX)(),(0,n.CE)("li",_,[w,(0,n.Lk)("ul",C,[(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/joinleague"},{default:(0,n.k6)((()=>[(0,n.eW)("Update Nickname")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/profile"},{default:(0,n.k6)((()=>[(0,n.eW)("Info")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/stats"},{default:(0,n.k6)((()=>[(0,n.eW)("Stats")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/activities"},{default:(0,n.k6)((()=>[(0,n.eW)("Activities")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/routes"},{default:(0,n.k6)((()=>[(0,n.eW)("Routes")])),_:1})])])])):(0,n.Q3)("",!0),r.authStore.isAuthenticated&&r.authStore.user.roles.includes("admin")?((0,n.uX)(),(0,n.CE)("li",E,[R,(0,n.Lk)("ul",A,[(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/racecenter"},{default:(0,n.k6)((()=>[(0,n.eW)("Race Center")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/rundraft"},{default:(0,n.k6)((()=>[(0,n.eW)("Run Draft")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/runtrade"},{default:(0,n.k6)((()=>[(0,n.eW)("Run Trade")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/runscore"},{default:(0,n.k6)((()=>[(0,n.eW)("Run Score")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(o,{class:"dropdown-item",to:"/autocenter"},{default:(0,n.k6)((()=>[(0,n.eW)("Automation Center")])),_:1})])])])):(0,n.Q3)("",!0),(0,n.Lk)("li",S,[(0,n.bF)(o,{class:"nav-link",to:"/about"},{default:(0,n.k6)((()=>[(0,n.eW)("Rules")])),_:1})]),r.authStore.isAuthenticated?((0,n.uX)(),(0,n.CE)("li",X,[(0,n.bF)(o,{class:"nav-link",to:"/logout"},{default:(0,n.k6)((()=>[(0,n.eW)("Logout")])),_:1})])):(0,n.Q3)("",!0)])])])])}var I=a(4373);const T=(0,r.nY)("auth",{state:()=>({user:{},isAuthenticated:!1}),actions:{async login(e){if(e){console.log("requesting jwt "+e);const t=await I.A.get(`https://www.tourdefantasy.com/callback?code=${e}`),{access_token:a}=t.data;localStorage.setItem("token",a)}const t=localStorage.getItem("token");console.log("getting user info "+t);const a=await I.A.get("https://www.tourdefantasy.com/user/me",{headers:{Authorization:`Bearer ${t}`}});this.user=a.data,this.isAuthenticated=!0},async impersonate(e){if(e){const t=await I.A.put(`https://www.tourdefantasy.com/bypass?user_id=${e}`,{}),{access_token:a}=t.data;localStorage.setItem("token",a)}const t=localStorage.getItem("token");console.log("getting user info "+t);const a=await I.A.get("https://www.tourdefantasy.com/user/me",{headers:{Authorization:`Bearer ${t}`}});this.user=a.data,this.isAuthenticated=!0},logout(){this.user={},this.isAuthenticated=!1,localStorage.removeItem("token")}}});a(4114),a(7072),a(4979),a(1678);const F=(0,r.nY)("racer",{state:()=>({allRacers:[],racers:[],draftList:[]}),actions:{async getRacerlist(e){const t=localStorage.getItem("token"),a=await I.A.get(`https://www.tourdefantasy.com/racer/race?race_url=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.allRacers=a.data},async loadDraftlist(e){const t=localStorage.getItem("token"),a=await I.A.get(`https://www.tourdefantasy.com/racer/draftlist?race_url=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.racers=a.data},async updateDraftlist(e){const t=localStorage.getItem("token");await I.A.put(`https://www.tourdefantasy.com/racer/draftlist?race_url=${e}`,this.racers,{headers:{Authorization:`Bearer ${t}`}})},async getAllDraftlist(e){const t=localStorage.getItem("token"),a=await I.A.get(`https://www.tourdefantasy.com/racer/alldraftlists?league_id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),l=P(),r=l.players,n=a.data;n.forEach((e=>{e.racer_list.forEach((e=>{e.player=null}))})),this.draftList=[],r.forEach((e=>{this.draftList.push(n.find((t=>t.user_strava_id==e.player_strava_id)))}))},insertBefore(e,t){let a=this.racers.find((t=>t.name==e)),l=this.racers.find((e=>e.name==t)),r=this.racers.indexOf(l),n=this.racers.indexOf(a);console.log(a+" "+l+" "+r+" "+n),this.racers.splice(n,1),this.racers.splice(r,0,a)},move(e,t){if(0==e&&"up"==t)return;if(e==this.racers.length-1&&"up"!=t)return;let a=this.racers.splice(e,1);"top"==t?this.racers.splice(0,0,a[0]):this.racers.splice("up"==t?e-1:e+1,0,a[0])}}}),P=(0,r.nY)("league",{state:()=>({league:{},players:[],race:{},leaguePlayer:{},tradeList:[],scoresForStage:[],stagePlayers:[],announcements:[],allLeagues:[]}),actions:{async getLeagueList(){const e=localStorage.getItem("token"),t=await I.A.get("https://www.tourdefantasy.com/league",{headers:{Authorization:`Bearer ${e}`}});this.allLeagues=t.data},getPlayerByStravaId(e){return this.players.find((t=>t.player_strava_id==e))},getPlayerPositionByStravaId(e){return this.players.indexOf(this.players.find((t=>t.player_strava_id==e)))},shuffle(){let e=this.players.length;while(0!=e){let t=Math.floor(Math.random()*e);e--,[this.players[e],this.players[t]]=[this.players[t],this.players[e]]}},async submitDraft(){const e=localStorage.getItem("token");await I.A.put("https://www.tourdefantasy.com/league/draftresult",this.players.slice().reverse(),{headers:{Authorization:`Bearer ${e}`}})},async join(e,t){if(e){const a=localStorage.getItem("token"),l=await I.A.put(`https://www.tourdefantasy.com/league/join?code=${e}&nickname=${t}`,{},{headers:{Authorization:`Bearer ${a}`}});this.league=l.data}},async getRace(){const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/race/url?url=${this.league.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});this.race=t.data},getStageNameByURL(e){let t=this.race.days.find((e=>{e.url}));return t?t.name:"--"},async getRaceScoreByStage(e){const t=localStorage.getItem("token"),a=await I.A.get(`https://www.tourdefantasy.com/racerScore/search?stage=${e}`,{headers:{Authorization:`Bearer ${t}`}});this.scoresForStage=a.data;let l=Map.groupBy(this.scoresForStage,(({racer:e})=>e));const r=F();let n=this.players.slice();n.forEach((t=>{t.stage_scores&&t.stage_scores.find((t=>t.stage_url==e))?t.stageRacers=t.stage_scores.find((t=>t.stage_url==e)).racers.slice():t.stageRacers=t.active_racers.slice(),t.stageRacers.forEach((e=>{e.scores=null,l.has(e.url)&&(e.scores=l.get(e.url),l.delete(e.url))}))}));const s={player_nickname:"N/A",stageRacers:[]};l.forEach(((e,t)=>{let a=structuredClone(r.allRacers.find((e=>e.url==t)));a.scores=e,s.stageRacers.push(a)})),n.push(s);let o=[0,0,20,30,50];n.forEach((e=>{e.stageScore=0,e.jerseys=[],e.stageRacers.forEach((t=>{t.scores&&t.scores.forEach((t=>{e.stageScore+=t.point,0==t.point&&e.jerseys.push(t.category)}))})),e.stageScore+=o[e.jerseys.length]})),this.stagePlayers=n},async submitStageScore(e){let t=0,a=null;console.log("Calculating score for players: "+this.players),this.players.forEach((l=>{let r={stage_url:e,total_score:l.stageScore,racers:l.stageRacers};l.stageScore>t&&(t=l.stageScore,a=l.player_nickname),l.stage_scores||(l.stage_scores=[]);let n=l.stage_scores.findIndex((t=>t.stage_url==e));-1!=n?l.stage_scores.splice(n,1,r):l.stage_scores.push(r),l.current_score=l.stage_scores.reduce(((e,{total_score:t})=>e+t),0);const s=localStorage.getItem("token");I.A.put("https://www.tourdefantasy.com/league/leagueplayers",l,{headers:{Authorization:`Bearer ${s}`}}),l.stageScore=0,l.stageRacers=[]})),console.log(this.race.days);let l="New scores are in! <strong>"+a+"</strong> scored "+t;const r=localStorage.getItem("token");await I.A.post("https://www.tourdefantasy.com/league/announcement",{message:l,expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${r}`}})},async loadLeague(e){const t=localStorage.getItem("token"),a=await I.A.get(`https://www.tourdefantasy.com/league/id/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.league=a.data},async getLeaguePlayers(e){const t=localStorage.getItem("token"),a=await I.A.get(`https://www.tourdefantasy.com/league/${e}/players`,{headers:{Authorization:`Bearer ${t}`}}),l=T();this.leaguePlayer=a.data.find((e=>e.player_strava_id==l.user.strava_id)),console.log("PLAYER: "+this.leaguePlayer.active_racers);let r=[a.data.length];a.data.forEach((e=>{r[this.league.players.indexOf(e.player_strava_id)]=e,e.stage_scores&&e.stage_scores.sort(((e,t)=>parseInt(t.stage_url.substring(t.stage_url.lastIndexOf("-")+1))-parseInt(e.stage_url.substring(e.stage_url.lastIndexOf("-")+1))))})),this.players=r,console.log("Players retrieved: "+this.players)},moveRoaster(e,t){let a=this.leaguePlayer.active_racers.concat(this.leaguePlayer.bench_racers),l=a.find((t=>t.name==e));this.leaguePlayer.active_racers?this.leaguePlayer.active_racers=this.leaguePlayer.active_racers.filter((t=>(console.log(t.name==e),t.name!==e))):this.leaguePlayer.active_racers=[],this.leaguePlayer.bench_racers?this.leaguePlayer.bench_racers=this.leaguePlayer.bench_racers.filter((t=>t.name!==e)):this.leaguePlayer.bench_racers=[],"active"==t?this.leaguePlayer.active_racers.push(l):this.leaguePlayer.bench_racers.push(l)},async submitRoaster(){const e=localStorage.getItem("token"),t=await I.A.put("https://www.tourdefantasy.com/league/leagueplayers",this.leaguePlayer,{headers:{Authorization:`Bearer ${e}`}});console.log("submit roaster: "+t),await I.A.post("https://www.tourdefantasy.com/league/announcement",{message:"<strong>"+this.leaguePlayer.player_nickname+"</strong> updated roster!",expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${e}`}}),200==t.status&&alert("Roster change successful.")},async submitTrade(e,t){e.player=this.leaguePlayer.player_strava_id.toString();const a=localStorage.getItem("token"),l=await I.A.post("https://www.tourdefantasy.com/league/trade",{fromRacer:e,toRacer:t},{headers:{Authorization:`Bearer ${a}`}});this.tradeList=l.data,await I.A.post("https://www.tourdefantasy.com/league/announcement",{message:"<strong>"+this.leaguePlayer.player_nickname+"</strong> submitted a trade request!",expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${a}`}})},async getTradeRequests(){const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/league/traderequests?raceurl=${this.league.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});let a=t.data.slice();a.sort(((e,t)=>{let a=e.toRacer.ranking-t.toRacer.ranking;if(0==a){let a=this.players.indexOf(this.players.find((e=>e.player_strava_id==t.player_strava_id))),l=this.players.indexOf(this.players.find((t=>t.player_strava_id==e.player_strava_id)));return l-a}return a}));const l=[],r=[];a.forEach((e=>{-1==l.findIndex((t=>t.url==e.toRacer.url))&&-1==r.indexOf(e.player_strava_id)&&(l.push(e.toRacer),r.push(e.player_strava_id),e.selected=!0)})),this.tradeList=a},async cancelTradeRequest(e){const t=localStorage.getItem("token");await I.A.delete(`https://www.tourdefantasy.com/league/canceltrade?id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),await this.getTradeRequests()},async completeTradeRequests(){let e=[],t=this.tradeList.filter((e=>e.selected));t.forEach((t=>{let a=this.players.find((e=>e.player_strava_id==t.player_strava_id)),l=-1==a.active_racers.findIndex((e=>e.url==t.fromRacer.url))?a.bench_racers:a.active_racers;l.splice(l.findIndex((e=>e.url==t.fromRacer.url)),1,t.toRacer),e.push(a)})),e.sort(((e,t)=>{this.league.players.indexOf(t.player_strava_id),this.league.players.indexOf(e.player_strava_id)})),e.forEach((e=>{this.players.splice(this.players.indexOf(e),1),this.players.push(e)}));const a=localStorage.getItem("token");await I.A.put("https://www.tourdefantasy.com/league/completetrade",{accepted:t,players:this.players},{headers:{Authorization:`Bearer ${a}`}});let l=t.length>0?"Trade results: <br>":"No trade completed.";t.forEach((e=>{l=l.concat("<strong>"+this.getPlayerByStravaId(e.player_strava_id).player_nickname+"</strong> acquired <strong>"+e.toRacer.name+"</strong><br>")})),await I.A.post("https://www.tourdefantasy.com/league/announcement",{message:l,expiration:Date.now()+108e5,league_id:this.league.id},{headers:{Authorization:`Bearer ${a}`}})},async getAnnouncements(){const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/league/newannouncements?league_id=${this.league.id}&expiration=${Date.now()}`,{headers:{Authorization:`Bearer ${e}`}});this.announcements=t.data}}});var K={name:"NavBar",data(){return{authStore:T(),leagueStore:P()}}},$=a(1241);const B=(0,$.A)(K,[["render",x]]);var D=B,M=a(144),j=a(1387);const W=(0,r.nY)("auto",{state:()=>({tasks:[],currentTask:null,isAutoMode:!1}),actions:{flip(){this.isAutoMode=!this.isAutoMode},startTask(){if(this.currentTask)return null;let e=this.tasks.find((e=>!e.completed&&new Date>e.time));return e&&(this.currentTask=e,e.inProgress=!0),console.log("return "+e),e},completeTask(){this.currentTask.completed=!0,this.currentTask=null}}}),N={key:0,style:{color:"red"}},q=(0,n.Lk)("b",null,"Auto",-1),z=[q];var Q={__name:"AutoBot",setup(e){const t=W(),a=(0,j.rd)(),l=(0,M.KR)(0),r=()=>{if(t.isAutoMode){let e=t.startTask();console.log("found task: "+e),e&&a.push(e.path)}};return(0,n.sV)((async()=>{let e=setInterval(r,3e5);console.log(`autobot ${e} is loaded.`),l.value=e})),(e,a)=>(0,M.R1)(t).isAutoMode?((0,n.uX)(),(0,n.CE)("h1",N,z)):(0,n.Q3)("",!0)}};const V=Q;var O=V,H={name:"App",components:{NavBar:D,AutoBot:O}};const U=(0,$.A)(H,[["render",i]]);var J=U;const Y=e=>((0,n.Qi)("data-v-23c4ca94"),e=e(),(0,n.jt)(),e),G={id:"intro",class:"bg-image shadow-2-strong"},Z={class:"container d-flex align-items-center justify-content-center text-center h-100"},ee={class:"card text-bg-dark w-50 w-md-50"},te=Y((()=>(0,n.Lk)("h2",{class:"card-header"},"Sign In",-1))),ae={class:"card-body"},le=Y((()=>(0,n.Lk)("img",{src:"btn_strava_connectwith_orange.png",class:"img-fluid"},null,-1))),re=[le];function ne(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",G,[(0,n.Lk)("div",Z,[(0,n.Lk)("div",ee,[te,(0,n.Lk)("div",ae,[(0,n.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>s.login&&s.login(...e))},re)])])])])])}var se={async created(){const e=localStorage.getItem("token");if(e){console.log("getting user info "+e);try{const e=T(),t=P();await e.login(),e.user.current_league_id?(await t.loadLeague(e.user.current_league_id),this.$router.push({name:"LeagueHome"})):this.$router.push({name:"JoinLeague"})}catch(t){console.error("Error during auto login:",t),localStorage.removeItem("token")}}},methods:{login(){window.location.href="https://www.tourdefantasy.com/login"}}};const oe=(0,$.A)(se,[["render",ne],["__scopeId","data-v-23c4ca94"]]);var ue=oe;const ie=(0,n.Lk)("p",null,"Logging in...",-1),ce=[ie];function de(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,ce)}a(4603),a(7566),a(8721);var ge={async created(){const e=new URLSearchParams(window.location.search),t=e.get("code");if(t)try{const e=T(),a=P();await e.login(t),e.user.current_league_id?(await a.loadLeague(e.user.current_league_id),this.$router.push({name:"LeagueHome"})):this.$router.push({name:"JoinLeague"})}catch(a){console.error("Error during callback:",a)}}};const pe=(0,$.A)(ge,[["render",de]]);var ke=pe,ve=a(4232);const he=(0,n.Lk)("h1",null,"My Activities",-1);function me(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[he,(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.activities,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id},(0,ve.v_)(e.name),1)))),128))])])}var ye={data(){return{activities:[]}},async created(){const e=localStorage.getItem("token");if(e)try{const t=await I.A.get("https://www.tourdefantasy.com/activities",{headers:{Authorization:`Bearer ${e}`}});this.activities=t.data}catch(t){console.error("Error fetching activities:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const Le=(0,$.A)(ye,[["render",me]]);var fe=Le;const be=(0,n.Lk)("h1",null,"My Routes",-1),_e=(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Distance"),(0,n.Lk)("th",null,"Elevation")],-1);function we(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[be,(0,n.Lk)("table",null,[_e,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.routes,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,ve.v_)(e.name),1),(0,n.Lk)("td",null,(0,ve.v_)(e.distance),1),(0,n.Lk)("td",null,(0,ve.v_)(e.elevation_gain),1)])))),128))])])}var Ce={data(){return{routes:[]}},async created(){const e=localStorage.getItem("token");if(e)try{const t=await I.A.get("https://www.tourdefantasy.com/routes",{headers:{Authorization:`Bearer ${e}`}});this.routes=t.data}catch(t){console.error("Error fetching routes:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const Ee=(0,$.A)(Ce,[["render",we]]);var Re=Ee;const Ae=(0,n.Lk)("h1",null,"My Stats",-1),Se=(0,n.Lk)("td",null,"Longest distance",-1),Xe=(0,n.Lk)("td",null,"Most elevation",-1);function xe(e,t,a,l,r,s){const o=(0,n.g2)("RideTotal");return(0,n.uX)(),(0,n.CE)("div",null,[Ae,(0,n.bF)(o,{title:"All Time",rideTotals:r.allTimeTotals},null,8,["rideTotals"]),(0,n.bF)(o,{title:"Last 4 Weeks",rideTotals:r.recentTotals},null,8,["rideTotals"]),(0,n.bF)(o,{title:"This year",rideTotals:r.yearTotals},null,8,["rideTotals"]),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[Se,(0,n.Lk)("td",null,(0,ve.v_)(r.stats.biggest_ride_distance),1)]),(0,n.Lk)("tr",null,[Xe,(0,n.Lk)("td",null,(0,ve.v_)(r.stats.biggest_climb_elevation_gain),1)])])])}const Ie=(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Activities"),(0,n.Lk)("th",null,"Distance"),(0,n.Lk)("th",null,"Elev Gain"),(0,n.Lk)("th",null,"Time")],-1);function Te(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h3",null,(0,ve.v_)(a.title),1),(0,n.Lk)("table",null,[Ie,(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,ve.v_)(a.rideTotals.count),1),(0,n.Lk)("td",null,(0,ve.v_)(a.rideTotals.distance),1),(0,n.Lk)("td",null,(0,ve.v_)(a.rideTotals.elevation_gain),1),(0,n.Lk)("td",null,(0,ve.v_)(a.rideTotals.moving_time),1)])])])}var Fe={props:{title:String,rideTotals:Object}};const Pe=(0,$.A)(Fe,[["render",Te]]);var Ke=Pe,$e={data(){return{stats:{},allTimeTotals:{},recentTotals:{},yearTotals:{}}},components:{RideTotal:Ke},async created(){const e=localStorage.getItem("token");if(e)try{const t=await I.A.get("https://www.tourdefantasy.com/stats",{headers:{Authorization:`Bearer ${e}`}});this.stats=t.data,this.allTimeTotals=t.data.all_ride_totals,this.recentTotals=t.data.recent_ride_totals,this.yearTotals=t.data.ytd_ride_totals}catch(t){console.error("Error fetching stats:",t),this.$router.push({name:"Login"})}else this.$router.push({name:"Login"})}};const Be=(0,$.A)($e,[["render",xe]]);var De=Be;const Me=(0,n.Lk)("p",null,"Logging out...",-1),je=[Me];function We(e,t,a,l,r,s){return(0,n.uX)(),(0,n.CE)("div",null,je)}var Ne={async created(){const e=T();e.logout(),this.$router.push({name:"Login"})}};const qe=(0,$.A)(Ne,[["render",We]]);var ze=qe;const Qe=(0,n.Lk)("h1",null,"My Profile",-1),Ve=(0,n.Lk)("td",null,"User Name",-1),Oe=(0,n.Lk)("td",null,"First Name",-1),He=(0,n.Lk)("td",null,"Last Name",-1),Ue=(0,n.Lk)("td",null,"Location",-1),Je=(0,n.Lk)("td",null,"Roles",-1),Ye=(0,n.Lk)("td",null,"Roles",-1),Ge=["id","value"],Ze=["for"],et=(0,n.Lk)("td",null,"Profile Pic",-1),tt=["src"];var at={__name:"ProfileView",setup(e){const t=T(),a=(0,M.KR)(t.user),r=["user","super","admin"];return(0,n.sV)((()=>{})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Qe,(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[Ve,(0,n.Lk)("td",null,(0,ve.v_)(a.value.username),1)]),(0,n.Lk)("tr",null,[Oe,(0,n.Lk)("td",null,(0,ve.v_)(a.value.firstname),1)]),(0,n.Lk)("tr",null,[He,(0,n.Lk)("td",null,(0,ve.v_)(a.value.lastname),1)]),(0,n.Lk)("tr",null,[Ue,(0,n.Lk)("td",null,(0,ve.v_)(a.value.city)+", "+(0,ve.v_)(a.value.state),1)]),(0,n.Lk)("tr",null,[Je,(0,n.Lk)("td",null,(0,ve.v_)(a.value.roles),1)]),(0,n.Lk)("tr",null,[Ye,(0,n.Lk)("td",null,[(0,n.Lk)("ul",null,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(r,(e=>(0,n.Lk)("li",{key:e.id},[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:e,value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.roles=e),disabled:"disabled"},null,8,Ge),[[l.lH,a.value.roles]]),(0,n.Lk)("label",{for:e.id},(0,ve.v_)(e),9,Ze)]))),64))])])]),(0,n.Lk)("tr",null,[et,(0,n.Lk)("td",null,[(0,n.Lk)("img",{src:a.value.profile_pic},null,8,tt)])])])]))}};const lt=at;var rt=lt;const nt=(0,n.Lk)("h1",{class:"mt-4"},"Join League",-1),st={class:"container px-4 text-center"},ot={class:"row gx-5 mb-3"},ut={class:"col"},it=(0,n.Lk)("label",{for:"inputPassword",class:"form-label"},"League Password",-1),ct={class:"row gx-5 mb-3"},dt={class:"col"},gt=(0,n.Lk)("label",{for:"exampleInputPassword1",class:"form-label"},"Nickname",-1),pt={class:"row gx-5"},kt={class:"col"};var vt={__name:"JoinLeagueView",setup(e){const t=T(),a=(0,j.rd)(),r=(0,M.KR)(t.user),s=(0,M.KR)(""),o=(0,M.KR)(""),u=async()=>{const e=P();console.log("router: "+a),await e.join(s.value,o.value,r.value.strava_id),a.push({name:"LeagueHome"})};return(0,n.sV)((()=>{})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[nt,(0,n.Lk)("form",null,[(0,n.Lk)("div",st,[(0,n.Lk)("div",ot,[(0,n.Lk)("div",ut,[it,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),class:"form-control",id:"inputPassword","aria-describedby":"emailHelp"},null,512),[[l.Jo,s.value]])])]),(0,n.Lk)("div",ct,[(0,n.Lk)("div",dt,[gt,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),class:"form-control",id:"exampleInputPassword1"},null,512),[[l.Jo,o.value]])])]),(0,n.Lk)("div",pt,[(0,n.Lk)("div",kt,[(0,n.Lk)("button",{onClick:(0,l.D$)(u,["prevent"]),class:"btn btn-success"},"Join")])])])])]))}};const ht=vt;var mt=ht;const yt={class:"mt-4"},Lt=(0,n.Lk)("button",{type:"button",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," League Info ",-1),ft={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},bt={class:"modal-dialog"},_t={class:"modal-content"},wt=(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"League Info"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ct={class:"modal-body"},Et=(0,n.Lk)("td",null,"Id",-1),Rt=(0,n.Lk)("td",null,"Name",-1),At=(0,n.Lk)("td",null,"Password",-1),St=(0,n.Lk)("td",null,"Active Race",-1),Xt=["href"],xt=(0,n.Lk)("h3",{class:"mt-4"},"Newsfeed",-1),It={class:"container w-75 h-50"},Tt={class:"announcements-container"},Ft=["innerHTML"],Pt={class:"table mt-4"},Kt=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Username"),(0,n.Lk)("th",{scope:"col"},"Points")])],-1),$t={key:0},Bt={key:1};var Dt={__name:"LeagueHome",setup(e){const t=P(),a=(0,M.KR)(t.league),l=(0,n.EW)((()=>{let e=t.players.slice();return e.sort(((e,t)=>t.current_score-e.current_score)),e})),r=(0,n.EW)((()=>t.announcements.slice().reverse())),s=t.getLeaguePlayers;return(0,n.sV)((()=>{s(a.value.id),t.getRace(),t.getAnnouncements()})),(e,s)=>{const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h1",yt,(0,ve.v_)(a.value.name),1),Lt,(0,n.Lk)("div",ft,[(0,n.Lk)("div",bt,[(0,n.Lk)("div",_t,[wt,(0,n.Lk)("div",Ct,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[Et,(0,n.Lk)("td",null,(0,ve.v_)(a.value.id),1)]),(0,n.Lk)("tr",null,[Rt,(0,n.Lk)("td",null,(0,ve.v_)(a.value.name),1)]),(0,n.Lk)("tr",null,[At,(0,n.Lk)("td",null,(0,ve.v_)(a.value.password),1)]),(0,n.Lk)("tr",null,[St,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:a.value.active_race_url,target:"prosite"},(0,ve.v_)(a.value.activeRace),9,Xt)])])])])])])]),xt,(0,n.Lk)("div",It,[(0,n.Lk)("div",Tt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"alert alert-warning alert-dismissible fade show",role:"alert"},[(0,n.Lk)("span",{innerHTML:e.message},null,8,Ft)])))),128))])]),(0,n.Lk)("table",Pt,[Kt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value,((e,a)=>((0,n.uX)(),(0,n.CE)("tr",{key:e.player_strava_id},[(0,n.Lk)("td",null,(0,ve.v_)(a+1),1),e.player_strava_id!=(0,M.R1)(t).leaguePlayer.player_strava_id?((0,n.uX)(),(0,n.CE)("td",$t,[(0,n.bF)(o,{to:{path:"/rosterview",query:{userId:e.player_strava_id}}},{default:(0,n.k6)((()=>[(0,n.eW)((0,ve.v_)(e.player_nickname),1)])),_:2},1032,["to"])])):((0,n.uX)(),(0,n.CE)("td",Bt,[(0,n.bF)(o,{to:{path:"/roster"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,ve.v_)(e.player_nickname),1)])),_:2},1024)])),(0,n.Lk)("td",null,[(0,n.bF)(o,{to:{path:"/detailscore",query:{userId:e.player_strava_id}}},{default:(0,n.k6)((()=>[(0,n.eW)((0,ve.v_)(e.current_score),1)])),_:2},1032,["to"])])])))),128))])])])}}};const Mt=Dt;var jt=Mt;const Wt=e=>((0,n.Qi)("data-v-0eab2e45"),e=e(),(0,n.jt)(),e),Nt={key:0},qt={class:"table mt-4"},zt=Wt((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Username"),(0,n.Lk)("th",{scope:"col"},"Points")])],-1))),Qt=["data-bs-target"],Vt=["id"],Ot={class:"modal-dialog"},Ht={class:"modal-content"},Ut={class:"modal-header"},Jt={class:"modal-title fs-5",id:"exampleModalLabel"},Yt={class:"modal-body"},Gt={class:"d-flex justify-content-center mt-3"},Zt={class:"list-group"},ea={class:"d-flex align-items-center"},ta=Wt((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),aa={class:"content-wrapper"},la=["href"],ra={key:0},na={key:1},sa={class:"list-group"},oa={class:"d-flex align-items-center"},ua=Wt((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),ia={class:"content-wrapper"},ca=["href"],da={key:0},ga={key:1},pa=Wt((()=>(0,n.Lk)("div",{class:"btn-group ms-2",role:"group","aria-label":"Basic example"},null,-1))),ka=["data-bs-target"],va=["id"],ha={class:"modal-dialog"},ma={class:"modal-content"},ya={class:"modal-header"},La={class:"modal-title fs-5",id:"exampleModalLabel2"},fa=Wt((()=>(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),ba={class:"modal-body"},_a=["href"],wa={class:"table"},Ca=Wt((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"Racer"),(0,n.Lk)("th",{scope:"col"},"Points Earned"),(0,n.Lk)("th",{scope:"col"},"How Earned")])],-1))),Ea={key:0},Ra={key:0},Aa=Wt((()=>(0,n.Lk)("img",{src:"/white.png",alt:"White Jersey",style:{width:"20px",height:"20px"}},null,-1))),Sa=[Aa],Xa={key:1},xa=Wt((()=>(0,n.Lk)("img",{src:"/yellow.png",alt:"Yellow Jersey",style:{width:"20px",height:"20px"}},null,-1))),Ia=[xa],Ta={key:2},Fa=Wt((()=>(0,n.Lk)("img",{src:"/green.png",alt:"Green Jersey",style:{width:"20px",height:"20px"}},null,-1))),Pa=[Fa],Ka={key:3},$a=Wt((()=>(0,n.Lk)("img",{src:"/polkadot.png",alt:"Polka-dot Jersey",style:{width:"20px",height:"20px"}},null,-1))),Ba=[$a],Da={key:0},Ma={key:0},ja={key:1},Wa={key:0},Na={key:0},qa={class:"border-bottom border-2"},za=Wt((()=>(0,n.Lk)("th",{scope:"row"},"Total",-1))),Qa=Wt((()=>(0,n.Lk)("td",null,null,-1)));var Va={__name:"LeaguePreviewPopup",props:{leagueId:{type:String,required:!0}},setup(e){const t=(0,M.KR)([]),a=(0,M.KR)({}),l=(0,n.EW)((()=>{let e=t.value.slice();return e.sort(((e,t)=>t.current_score-e.current_score)),e})),r=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/league/id/${g.leagueId}`,{headers:{Authorization:`Bearer ${e}`}});a.value=t.data},s=async()=>{const e=localStorage.getItem("token"),a=await I.A.get(`https://www.tourdefantasy.com/league/${g.leagueId}/players`,{headers:{Authorization:`Bearer ${e}`}});t.value=a.data},o=(0,M.KR)([]),u=(0,M.KR)(new Map),i=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});o.value=t.data;let l=Map.groupBy(o.value,(({stage:e})=>e));l.forEach(((e,t,a)=>{a.set(t,Map.groupBy(e,(({racer:e})=>e)))})),u.value=l},c=(0,M.KR)(null),d=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/race/url?url=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});console.log(t.data),c.value=Map.groupBy(t.data.days,(({url:e})=>e))};(0,n.sV)((async()=>{console.log("Mounted"),await r(),await s(),await i(),await d()}));const g=e;return(e,t)=>c.value?((0,n.uX)(),(0,n.CE)("div",Nt,[(0,n.Lk)("table",qt,[zt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value,((a,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,(0,ve.v_)(l+1),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-link p-0 m-0","data-bs-toggle":"modal","data-bs-target":"#"+a.player_strava_id},(0,ve.v_)(a.player_nickname),9,Qt)]),(0,n.Lk)("div",{class:"modal fade",id:a.player_strava_id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,n.Lk)("div",Ot,[(0,n.Lk)("div",Ht,[(0,n.Lk)("div",Ut,[(0,n.Lk)("h1",Jt,(0,ve.v_)(a.player_nickname)+"'s Roster",1),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t)),"aria-label":"Close"})]),(0,n.Lk)("div",Yt,[(0,n.Lk)("div",Gt,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",null,[(0,n.Lk)("ul",Zt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.active_racers,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",ea,[ta,(0,n.Lk)("div",aa,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,la),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",ra,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",na," None"))])])])))),128))])])])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",null,[(0,n.Lk)("ul",sa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.bench_racers,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",oa,[ua,(0,n.Lk)("div",ia,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,ca),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",da,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",ga," None"))])]),pa])))),128))])])])])])])])])])],8,Vt),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-link p-0 m-0","data-bs-toggle":"modal","data-bs-target":"#"+a.id},(0,ve.v_)(a.current_score),9,ka)]),(0,n.Lk)("div",{class:"modal fade",id:a.id,tabindex:"-1","aria-labelledby":"exampleModalLabel2","aria-hidden":"true"},[(0,n.Lk)("div",ha,[(0,n.Lk)("div",ma,[(0,n.Lk)("div",ya,[(0,n.Lk)("h1",La,"Scores for "+(0,ve.v_)(a.player_nickname),1),fa]),(0,n.Lk)("div",ba,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.stage_scores,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.Lk)("h2",null,[(0,n.Lk)("a",{href:e.stage_url,target:"prosite"},(0,ve.v_)(c.value.get(e.stage_url)[0].name),9,_a)]),(0,n.Lk)("table",wa,[Ca,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.racers,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.url},[(0,n.Lk)("td",null,[(0,n.Lk)("b",null,(0,ve.v_)(t.name),1),u.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("span",Ea,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("span",{key:e},["white"===e.category?((0,n.uX)(),(0,n.CE)("span",Ra,Sa)):(0,n.Q3)("",!0),"yellow"===e.category?((0,n.uX)(),(0,n.CE)("span",Xa,Ia)):(0,n.Q3)("",!0),"green"===e.category?((0,n.uX)(),(0,n.CE)("span",Ta,Pa)):(0,n.Q3)("",!0),"polkadot"===e.category?((0,n.uX)(),(0,n.CE)("span",Ka,Ba)):(0,n.Q3)("",!0)])))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[u.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("div",Da,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?0!==e.point?((0,n.uX)(),(0,n.CE)("span",ja,(0,ve.v_)(e.point),1)):(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Ma,(0,ve.v_)(e.point),1))])))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[u.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("div",Wa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Na,(0,ve.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1))])))),128))])):(0,n.Q3)("",!0)])])))),128)),(0,n.Lk)("tr",qa,[za,(0,n.Lk)("td",null,(0,ve.v_)(e.total_score),1),Qa])])])])))),128))])])])],8,va)])))),128))])])])):(0,n.Q3)("",!0)}};const Oa=(0,$.A)(Va,[["__scopeId","data-v-0eab2e45"]]);var Ha=Oa;const Ua={class:"container mt-4"},Ja=(0,n.Lk)("h1",{class:"mt-4"},"Preview",-1),Ya={class:"row"},Ga={class:"card-body"},Za={class:"card-title"},el=(0,n.Lk)("td",null,"Active Race:",-1),tl=["href"],al=(0,n.Lk)("td",null,"Number of Players:",-1);var ll={__name:"LeaguePreview",setup(e){const t=P(),a=(0,n.EW)((()=>t.allLeagues));return(0,n.sV)((()=>{t.getLeagueList()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",Ua,[Ja,(0,n.Lk)("div",Ya,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"card",style:{width:"18rem"}},[(0,n.Lk)("div",Ga,[(0,n.Lk)("h5",Za,[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)]),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[el,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:e.active_race_url,target:"prosite"},(0,ve.v_)(e.activeRace),9,tl)])]),(0,n.Lk)("tr",null,[al,(0,n.Lk)("td",null,[(0,n.Lk)("p",null,(0,ve.v_)(e.players.length),1)])])]),(0,n.Lk)("div",null,[(0,n.bF)(Ha,{leagueId:e.id},null,8,["leagueId"])])])])))),128))])]))}};const rl=ll;var nl=rl;const sl=e=>((0,n.Qi)("data-v-05887c48"),e=e(),(0,n.jt)(),e),ol=sl((()=>(0,n.Lk)("h1",{class:"mt-4"},"Draft List",-1))),ul={class:"d-flex justify-content-center mt-3"},il={class:"list-group"},cl=["onDragstart","onDragenter"],dl={class:"d-flex align-items-center flex-grow-1"},gl=sl((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),pl={class:"content-wrapper"},kl=["href"],vl={key:0},hl={key:1},ml={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},yl={class:"border-end"},Ll=["onClick","disabled"],fl=["onClick","disabled"],bl=["onClick","disabled"];var _l={__name:"DraftListView",setup(e){const t=P(),a=F(),r=(0,M.KR)(t.league),s=(0,n.EW)((()=>a.racers)),o=a.loadDraftlist,u=(0,M.KR)("");function i(e,t){u.value=t.name}function c(e,t){console.log("start dragging "+t.name),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("racerName",t.name)}function d(e){let t=e.dataTransfer.getData("racerName");u.value!=t&&a.insertBefore(t,u.value),u.value="",e.preventDefault()}function g(){a.updateDraftlist(r.value.active_race_url)}return(0,n.sV)((()=>{o(r.value.active_race_url)})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[ol,(0,n.eW)(" "+(0,ve.v_)(u.value)+" ",1),(0,n.Lk)("div",ul,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:g},"Save")])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",{onDrop:t[0]||(t[0]=e=>d(e)),class:"drop-zone",onDragover:t[1]||(t[1]=(0,l.D$)((()=>{}),["prevent"]))},[(0,n.Lk)("ul",il,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"list-group-item d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>c(t,e),onDragenter:t=>i(t,e)},[(0,n.Lk)("div",dl,[gl,(0,n.Lk)("div",pl,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,kl),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",vl,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",hl," None"))])]),(0,n.Lk)("div",ml,[(0,n.Lk)("div",yl,[(0,n.Lk)("button",{onClick:e=>(0,M.R1)(a).move(t,"up"),type:"button",class:"btn btn-success",disabled:0===t},"↑",8,Ll)]),(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:e=>(0,M.R1)(a).move(t,"down"),type:"button",class:"btn btn-success",disabled:t===s.value.length-1},"↓",8,fl)]),(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:e=>(0,M.R1)(a).move(t,"top"),type:"button",class:"btn btn-success",disabled:0===t},"top",8,bl)])])],40,cl)))),128))])],32)])])])])]))}};const wl=(0,$.A)(_l,[["__scopeId","data-v-05887c48"]]);var Cl=wl;const El=e=>((0,n.Qi)("data-v-45cac7d8"),e=e(),(0,n.jt)(),e),Rl=El((()=>(0,n.Lk)("h1",{class:"mt-4"},"My Roster",-1))),Al={class:"d-flex justify-content-center mt-3"},Sl=["disabled"],Xl={class:"list-group"},xl=["onDragstart"],Il={class:"d-flex align-items-center"},Tl=El((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),Fl={class:"content-wrapper"},Pl=["href"],Kl={key:0},$l={key:1},Bl={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},Dl=["onClick"],Ml={class:"list-group"},jl=["onDragstart"],Wl={class:"d-flex align-items-center"},Nl=El((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),ql={class:"content-wrapper"},zl=["href"],Ql={key:0},Vl={key:1},Ol={class:"btn-group ms-2",role:"group","aria-label":"Basic example"},Hl={class:"border-end"},Ul=["onClick"];var Jl={__name:"RosterView",setup(e){const t=P(),a=(0,n.EW)((()=>t.leaguePlayer.active_racers)),r=(0,n.EW)((()=>t.leaguePlayer.bench_racers));function s(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("racerName",t.name)}function o(e,a){const l=e.dataTransfer.getData("racerName");t.moveRoaster(l,a),e.preventDefault()}return(e,u)=>{const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[Rl,(0,n.Lk)("div",Al,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:u[0]||(u[0]=e=>(0,M.R1)(t).submitRoaster()),disabled:8!=a.value.length||(new Date).getHours()>5&&(new Date).getHours()<13},"Save",8,Sl),(0,n.bF)(i,{class:"btn btn-outline-success btn-lg mb-3",to:"/trade"},{default:(0,n.k6)((()=>[(0,n.eW)("Trade")])),_:1})])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",{onDrop:u[1]||(u[1]=e=>o(e,"active")),onDragover:u[2]||(u[2]=(0,l.D$)((()=>{}),["prevent"]))},[(0,n.Lk)("ul",Xl,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>s(t,e)},[(0,n.Lk)("div",Il,[Tl,(0,n.Lk)("div",Fl,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,Pl),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Kl,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",$l," None"))])]),(0,n.Lk)("div",Bl,[(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:a=>(0,M.R1)(t).moveRoaster(e.name,"bench"),type:"button",class:"btn btn-success"},"↓",8,Dl)])])],40,xl)))),128))])],32)])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",{onDrop:u[3]||(u[3]=e=>o(e,"bench")),class:"drop-zone",onDragover:u[4]||(u[4]=(0,l.D$)((()=>{}),["prevent"]))},[(0,n.Lk)("ul",Ml,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center",draggable:"true",onDragstart:t=>s(t,e)},[(0,n.Lk)("div",Wl,[Nl,(0,n.Lk)("div",ql,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,zl),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Ql,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Vl," None"))])]),(0,n.Lk)("div",Ol,[(0,n.Lk)("div",Hl,[(0,n.Lk)("button",{onClick:a=>(0,M.R1)(t).moveRoaster(e.name,"active"),type:"button",class:"btn btn-success"},"↑",8,Ul)])])],40,jl)))),128))])],32)])])])])])}}};const Yl=(0,$.A)(Jl,[["__scopeId","data-v-45cac7d8"]]);var Gl=Yl;const Zl=e=>((0,n.Qi)("data-v-b3c3a2f2"),e=e(),(0,n.jt)(),e),er=Zl((()=>(0,n.Lk)("h1",null,"League",-1))),tr=Zl((()=>(0,n.Lk)("td",null,"League Id",-1))),ar=Zl((()=>(0,n.Lk)("td",null,"League Name",-1))),lr=Zl((()=>(0,n.Lk)("td",null,"Active Race",-1))),rr=["href"],nr=Zl((()=>(0,n.Lk)("h2",null,"Player Draft Lists",-1))),sr=["disabled"],or=["disabled"];var ur={__name:"RunDraftView",setup(e){const t=P(),a=F(),l=(0,M.KR)(t.league),r=(0,n.EW)((()=>t.players)),s=(0,n.EW)((()=>a.draftList)),o=a.getAllDraftlist;function u(){t.shuffle(),o(l.value.id),i.value=1}(0,n.sV)((()=>{o(l.value.id)}));const i=(0,M.KR)(1);function c(){if(13==i.value)return;const e=s.value,t=i.value%2==1?e:e.slice().reverse();t.forEach((e=>{let a=e.racer_list.find((e=>!e.player));t.forEach((t=>{let l=t.racer_list.find((e=>e.name==a.name));l.player=e.user_strava_id.toString()}))})),i.value++}function d(){const e=r.value,a=s.value;e.forEach(((e,t)=>{const l=a[t].racer_list.filter((t=>t.player==e.player_strava_id));console.log(e.player_nickname+": "+l.length),e.active_racers=l.slice(0,8),e.bench_racers=l.slice(8)})),t.submitDraft()}function g(e,t){return e.player?e.player==t.user_strava_id?"own":"taken":""}return(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[er,(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[tr,(0,n.Lk)("td",null,(0,ve.v_)(l.value.id),1)]),(0,n.Lk)("tr",null,[ar,(0,n.Lk)("td",null,(0,ve.v_)(l.value.name),1)]),(0,n.Lk)("tr",null,[lr,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:l.value.active_race_url,target:"prosite"},(0,ve.v_)(l.value.activeRace),9,rr)])])]),nr,(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>u())},"Randomize Draft Order "),(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>c()),disabled:i.value>12},"Draft! "+(0,ve.v_)(i.value),9,sr),(0,n.Lk)("button",{onClick:t[2]||(t[2]=e=>d()),disabled:13!=i.value},"Submit Draft Result",8,or),(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("th",{key:e.player_strava_id},(0,ve.v_)(e.player_nickname),1)))),128))])]),(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,(e=>((0,n.uX)(),(0,n.CE)("td",{key:e},[(0,n.Lk)("div",null,(0,ve.v_)(e.user_strava_id),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.racer_list,(t=>((0,n.uX)(),(0,n.CE)("div",{key:t},[(0,n.Lk)("span",{class:(0,ve.C4)(g(t,e))},(0,ve.v_)(t.name),3),(0,n.Lk)("span",null,"["+(0,ve.v_)(t.player)+"]",1)])))),128))])))),128))])])])]))}};const ir=(0,$.A)(ur,[["__scopeId","data-v-b3c3a2f2"]]);var cr=ir;const dr=e=>((0,n.Qi)("data-v-c76741a2"),e=e(),(0,n.jt)(),e),gr={class:"d-flex justify-content-center mt-4"},pr={key:0},kr=dr((()=>(0,n.Lk)("h1",null,"Trade Requests",-1))),vr={class:"list-group"},hr={class:"d-flex align-items-center flex-grow-1"},mr=dr((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),yr={class:"content-wrapper"},Lr=["href"],fr={key:0},br={key:1},_r={class:"text-end ms-3"},wr=dr((()=>(0,n.Lk)("div",null,"Requested by:",-1))),Cr={class:"fw-bold"},Er={class:"ms-5"},Rr=["onClick"],Ar={key:0},Sr=dr((()=>(0,n.Lk)("h1",{class:"text-center"},"Trade",-1))),Xr={class:"container mt-3"},xr={class:"row justify-content-center align-items-center"},Ir={class:"col-md-6"},Tr={class:"text-center mb-3"},Fr={class:"text-center"},Pr=["disabled"],Kr={class:"container"},$r={class:"row"},Br={class:"col-md-6"},Dr=dr((()=>(0,n.Lk)("h2",null,"Your Roster",-1))),Mr={class:"list-group"},jr=["onClick"],Wr={class:"d-flex align-items-center flex-grow-1"},Nr=dr((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),qr={class:"content-wrapper"},zr=["href"],Qr={key:0},Vr={key:1},Or=["onClick"],Hr={class:"d-flex align-items-center flex-grow-1"},Ur=dr((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),Jr={class:"content-wrapper"},Yr=["href"],Gr={key:0},Zr={key:1},en={class:"col-md-6"},tn=dr((()=>(0,n.Lk)("h2",null,"Available Racers",-1))),an={class:"list-group"},ln=["onClick"],rn={class:"d-flex align-items-center flex-grow-1"},nn=dr((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),sn={class:"content-wrapper"},on=["href"],un={key:0},cn={key:1};var dn={__name:"TradeView",setup(e){const t=P(),a=(0,M.KR)(t.league),r=(0,n.EW)((()=>t.leaguePlayer.active_racers)),s=(0,n.EW)((()=>t.leaguePlayer.bench_racers)),o=F(),u=(0,n.EW)((()=>o.allRacers.filter((e=>!e.player)))),i=(0,M.KR)({}),c=(0,M.KR)({});function d(e){i.value=e}function g(e){c.value=e}const p=(0,n.EW)((()=>t.tradeList.slice().filter((e=>e.player_strava_id==t.leaguePlayer.player_strava_id)))),k=(0,n.EW)((()=>-1!=t.tradeList.findIndex((e=>e.player_strava_id==t.leaguePlayer.player_strava_id))));return(0,n.sV)((async()=>{await o.getRacerlist(a.value.active_race_url),await t.getTradeRequests()})),(e,a)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",gr,[k.value?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",pr,[kr,(0,n.Lk)("ul",vr,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(p.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",hr,[mr,(0,n.Lk)("div",yr,[(0,n.Lk)("a",{href:e.toRacer.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.toRacer.name),1)],8,Lr),e.toRacer.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",fr,(0,ve.v_)(e.toRacer.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",br,"None"))])]),(0,n.Lk)("div",_r,[wr,(0,n.Lk)("div",Cr,(0,ve.v_)((0,M.R1)(t).getPlayerByStravaId(e.player_strava_id).player_nickname),1)]),(0,n.Lk)("div",Er,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:a=>(0,M.R1)(t).cancelTradeRequest(e.id)}," Cancel ",8,Rr)])])))),128))])],512)),[[l.aG,p.value.length]]):(0,n.Q3)("",!0)]),k.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Ar,[Sr,(0,n.Lk)("div",null,"Your current trade priority is "+(0,ve.v_)((0,M.R1)(t).league.players.indexOf((0,M.R1)(t).leaguePlayer.player_strava_id)+1)+" of "+(0,ve.v_)((0,M.R1)(t).league.players.length),1),(0,n.Lk)("div",Xr,[(0,n.Lk)("div",xr,[(0,n.Lk)("div",Ir,[(0,n.Lk)("div",Tr,[(0,n.Lk)("div",null,[(0,n.Lk)("strong",null,(0,ve.v_)(i.value.name)+" >> "+(0,ve.v_)(c.value.name),1)])]),(0,n.Lk)("div",Fr,[(0,n.Lk)("button",{class:"btn btn-success btn-lg mb-3 me-3",onClick:a[0]||(a[0]=e=>(0,M.R1)(t).submitTrade(i.value,c.value)),disabled:!(i.value.name&&c.value.name)},"Submit",8,Pr)])])])]),(0,n.Lk)("div",Kr,[(0,n.Lk)("div",$r,[(0,n.Lk)("div",Br,[Dr,(0,n.Lk)("ul",Mr,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.name,class:(0,ve.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":i.value===e}]),onClick:t=>d(e)},[(0,n.Lk)("div",Wr,[Nr,(0,n.Lk)("div",qr,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,zr),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Qr,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Vr,"None"))])])],10,jr)))),128)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.name,class:(0,ve.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":i.value===e}]),onClick:t=>d(e)},[(0,n.Lk)("div",Hr,[Ur,(0,n.Lk)("div",Jr,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,Yr),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Gr,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Zr,"None"))])])],10,Or)))),128))])]),(0,n.Lk)("div",en,[tn,(0,n.Lk)("ul",an,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.name,class:(0,ve.C4)(["list-group-item d-flex justify-content-between align-items-center",{"border-success-thick":c.value===e}]),onClick:t=>g(e)},[(0,n.Lk)("div",rn,[nn,(0,n.Lk)("div",sn,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,on),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",un,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",cn,"None"))])])],10,ln)))),128))])])])])]))],64))}};const gn=(0,$.A)(dn,[["__scopeId","data-v-c76741a2"]]);var pn=gn;const kn=e=>((0,n.Qi)("data-v-325c75a9"),e=e(),(0,n.jt)(),e),vn=kn((()=>(0,n.Lk)("h1",null,"Run Trade",-1))),hn=kn((()=>(0,n.Lk)("td",null,"League Id",-1))),mn=kn((()=>(0,n.Lk)("td",null,"League Name",-1))),yn=kn((()=>(0,n.Lk)("td",null,"Active Race",-1))),Ln=["href"],fn=kn((()=>(0,n.Lk)("td",null,[(0,n.Lk)("h2",null,"Trade Requests")],-1))),bn=kn((()=>(0,n.Lk)("span",null," >> ",-1)));var _n={__name:"RunTrade",setup(e){const t=P(),a=(0,M.KR)(t.league),l=(0,n.EW)((()=>t.tradeList)),r=W(),s=(0,j.rd)();return(0,n.sV)((async()=>{await t.getTradeRequests(),r.isAutoMode&&r.currentTask&&(t.tradeList.length>0&&await t.completeTradeRequests(),r.completeTask(),s.push("/autocenter"))})),(e,r)=>((0,n.uX)(),(0,n.CE)("div",null,[vn,(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[hn,(0,n.Lk)("td",null,(0,ve.v_)(a.value.id),1)]),(0,n.Lk)("tr",null,[mn,(0,n.Lk)("td",null,(0,ve.v_)(a.value.name),1)]),(0,n.Lk)("tr",null,[yn,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:a.value.active_race_url,target:"prosite"},(0,ve.v_)(a.value.activeRace),9,Ln)])]),(0,n.Lk)("tr",null,[fn,(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>(0,M.R1)(t).completeTradeRequests&&(0,M.R1)(t).completeTradeRequests(...e))}," Finalize Trade ")])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,ve.C4)(e.selected?"own":"")},[(0,n.Lk)("span",null,(0,ve.v_)(e.toRacer.name)+" ["+(0,ve.v_)(e.toRacer.ranking)+"]",1),(0,n.eW)(),bn,(0,n.Lk)("span",null,(0,ve.v_)(e.fromRacer.name)+" ["+(0,ve.v_)(e.fromRacer.ranking)+"]",1),(0,n.eW)(" by "),(0,n.Lk)("span",null,(0,ve.v_)((0,M.R1)(t).getPlayerByStravaId(e.player_strava_id).player_nickname),1),(0,n.Lk)("span",null," ["+(0,ve.v_)((0,M.R1)(t).getPlayerPositionByStravaId(e.player_strava_id))+"]",1)],2)))),128))])])])]))}};const wn=(0,$.A)(_n,[["__scopeId","data-v-325c75a9"]]);var Cn=wn;const En=(0,n.Lk)("h1",null,"Score by Stage",-1),Rn=["value"],An=(0,n.Lk)("h2",null,"Racer Scores",-1),Sn={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Xn={class:"modal-dialog"},xn={class:"modal-content"},In=(0,n.Lk)("div",{class:"modal-header"},[(0,n.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"League Info"),(0,n.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Tn={class:"modal-body"},Fn=(0,n.Lk)("td",null,"Id",-1),Pn=(0,n.Lk)("td",null,"Name",-1),Kn=(0,n.Lk)("td",null,"Password",-1),$n=(0,n.Lk)("td",null,"Active Race",-1),Bn=["href"],Dn={class:"table"},Mn=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"Cat"),(0,n.Lk)("th",{scope:"col"},"Racer"),(0,n.Lk)("th",{scope:"col"},"Points")])],-1),jn=(0,n.Lk)("h2",null,"Player scores",-1),Wn={style:{color:"red"}};var Nn={__name:"RunScoresView",setup(e){const t=P(),a=F(),r=(0,M.KR)(t.league),s=t.getLeaguePlayers,o=(0,M.KR)(t.race.days),u=(0,M.KR)(""),i=t.getRaceScoreByStage,c=(0,n.EW)((()=>t.scoresForStage.slice().sort(((e,t)=>t.point-e.point)))),d=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/pcs?url=${u.value}`,{headers:{Authorization:`Bearer ${e}`}});let a=document.createElement("html");a.innerHTML=t.data;let l=r.value.active_race_url,n=new Map;a.querySelectorAll(".restabs li").forEach((e=>n.set(e.childNodes[0].textContent,e.childNodes[0].getAttribute("data-id")))),n.get("Stage")||n.set("Stage",n.get(""));let s=[];a.querySelectorAll('div[data-id="'+n.get("Stage")+'"] table.results tbody tr').forEach((e=>{if(e.children[10].textContent){let t={};t.racer=e.children[6].firstChild.children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=l,t.category=e.firstChild.textContent,t.point=e.children[10].textContent,t.stage=u.value,s.push(t)}}));let o=11==a.querySelector('div[data-id="'+n.get("GC")+'"] table.results thead tr').childElementCount?4:6,c={};if(c.racer=a.querySelector('div[data-id="'+n.get("GC")+'"] table.results tbody tr').children[o].firstChild.children[1].href,c.racer&&(c.racer=c.racer.replace(document.location.origin,"https://www.procyclingstats.com")),c.race=l,c.category="yellow",c.point=0,c.stage=u.value,s.push(c),14==a.querySelector('div[data-id="'+n.get("GC")+'"] table.results thead tr').childElementCount){let e=[100,70,50,40,32,26,22,18,14,10,8,6,4,2,1];a.querySelector('div[data-id="'+n.get("GC")+'"] table.results').querySelectorAll("tbody tr").forEach(((t,a)=>{if(a<15){let r={};r.racer=t.children[o].firstChild.children[1].href,r.racer&&(r.racer=r.racer.replace(document.location.origin,"https://www.procyclingstats.com")),r.race=l,r.category="gc#"+(a+1),r.point=e[a],r.stage=u.value,s.push(r)}}))}o=9==a.querySelector('div[data-id="'+n.get("Points")+'"] table.results thead tr').childElementCount?4:6,a.querySelector('div[data-id="'+n.get("Points")+'"] table.results').querySelectorAll("tbody tr").forEach((e=>{if(e.lastChild.firstChild.textContent.indexOf("-")<0){let t={};t.racer=e.children[o].firstChild.children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=l,t.category="sprint",t.point=e.lastChild.firstChild.textContent.substring(1),t.stage=u.value,s.push(t)}})),c={},c.racer=a.querySelector('div[data-id="'+n.get("Points")+'"] table.results tbody tr').children[o].firstChild.children[1].href,c.racer&&(c.racer=c.racer.replace(document.location.origin,"https://www.procyclingstats.com")),c.race=l,c.category="green",c.point=0,c.stage=u.value,s.push(c),a.querySelector('div[data-id="'+n.get("KOM")+'"] table.results').querySelectorAll("tbody tr").forEach((e=>{if(e.lastChild.firstChild.textContent.indexOf("-")<0){let t={};t.racer=e.children[o].firstChild.children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=l,t.category="KOM",t.point=5*e.lastChild.firstChild.textContent.substring(1),t.stage=u.value,s.push(t)}})),c={},c.racer=a.querySelector('div[data-id="'+n.get("KOM")+'"] table.results tbody tr').children[o].firstChild.children[1].href,c.racer&&(c.racer=c.racer.replace(document.location.origin,"https://www.procyclingstats.com")),c.race=l,c.category="polkadot",c.point=0,c.stage=u.value,s.push(c),c={},c.racer=a.querySelector('div[data-id="'+n.get("Youth")+'"] table.results tbody tr').children[o].firstChild.children[1].href,c.racer&&(c.racer=c.racer.replace(document.location.origin,"https://www.procyclingstats.com")),c.race=l,c.category="white",c.point=0,c.stage=u.value,s.push(c),await I.A.put("https://www.tourdefantasy.com/racerScore/loadscores",s).then((function(e){console.log(e)})),i(u.value)},g=W(),p=(0,j.rd)();return(0,n.sV)((async()=>{await a.getRacerlist(r.value.active_race_url),await s(r.value.id),await t.getRace(),g.isAutoMode&&g.currentTask?(console.log("auto: "+g.currentTask),g.currentTask.data&&g.currentTask.data.stageURL&&(u.value=g.currentTask.data.stageURL,await i(u.value),await d(),await t.submitStageScore(u),g.completeTask(),p.push("/autocenter"))):(u.value=o.value[0].url,i(u.value))})),(e,a)=>((0,n.uX)(),(0,n.CE)("div",null,[En,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),onChange:a[1]||(a[1]=e=>(0,M.R1)(i)(u.value))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.value,(e=>((0,n.uX)(),(0,n.CE)("option",{value:e.url,key:e},(0,ve.v_)(e.name),9,Rn)))),128))],544),[[l.u1,u.value]]),(0,n.Lk)("button",{type:"button",onClick:d}," Retrieve Scores"),An,(0,n.Lk)("div",Sn,[(0,n.Lk)("div",Xn,[(0,n.Lk)("div",xn,[In,(0,n.Lk)("div",Tn,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[Fn,(0,n.Lk)("td",null,(0,ve.v_)(r.value.id),1)]),(0,n.Lk)("tr",null,[Pn,(0,n.Lk)("td",null,(0,ve.v_)(r.value.name),1)]),(0,n.Lk)("tr",null,[Kn,(0,n.Lk)("td",null,(0,ve.v_)(r.value.password),1)]),(0,n.Lk)("tr",null,[$n,(0,n.Lk)("td",null,[(0,n.Lk)("a",{href:r.value.active_race_url,target:"prosite"},(0,ve.v_)(r.value.activeRace),9,Bn)])])])])])])]),(0,n.Lk)("table",Dn,[Mn,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.value,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e},[(0,n.Lk)("td",null,(0,ve.v_)(e.category),1),(0,n.Lk)("td",null,(0,ve.v_)(e.racer),1),(0,n.Lk)("td",null,(0,ve.v_)(e.point),1)])))),128))])]),jn,(0,n.Lk)("button",{onClick:a[2]||(a[2]=e=>(0,M.R1)(t).submitStageScore(u.value))},"Submit"),(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,M.R1)(t).stagePlayers,(e=>((0,n.uX)(),(0,n.CE)("th",{key:e},(0,ve.v_)(e.player_nickname),1)))),128))])]),(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,M.R1)(t).stagePlayers,(e=>((0,n.uX)(),(0,n.CE)("td",{key:e},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.stageRacers,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.Lk)("div",null,[(0,n.Lk)("b",null,(0,ve.v_)(e.name),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.scores,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},(0,ve.v_)(e.category)+": "+(0,ve.v_)(e.point),1)))),128))])))),128)),(0,n.Lk)("div",Wn,(0,ve.v_)(e.stageScore),1),(0,n.Lk)("div",null,(0,ve.v_)(e.jerseys),1)])))),128))])])])]))}};const qn=Nn;var zn=qn;const Qn=(0,n.Lk)("h1",null,"By Pass",-1),Vn={class:"container px-4 text-center"},On={class:"row gx-5 mb-3"},Hn={class:"col"},Un=(0,n.Lk)("label",{for:"inputPassword",class:"form-label"},"User Id",-1),Jn={class:"row gx-5"},Yn={class:"col"};var Gn={__name:"ByPass",setup(e){const t=T(),a=P(),r=(0,j.rd)(),s=(0,M.KR)(""),o=async()=>{await t.impersonate(s.value),t.user.current_league_id?(await a.loadLeague(t.user.current_league_id),r.push({name:"LeagueHome"})):r.push({name:"JoinLeague"})};return(0,n.sV)((()=>{})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Qn,(0,n.Lk)("form",null,[(0,n.Lk)("div",Vn,[(0,n.Lk)("div",On,[(0,n.Lk)("div",Hn,[Un,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),class:"form-control",id:"inputPassword","aria-describedby":"emailHelp"},null,512),[[l.Jo,s.value]])])])]),(0,n.Lk)("div",Jn,[(0,n.Lk)("div",Yn,[(0,n.Lk)("button",{onClick:(0,l.D$)(o,["prevent"]),class:"btn btn-primary"},"Impersonate")])])])]))}};const Zn=Gn;var es=Zn;const ts=(0,n.Lk)("h1",{class:"mt-4"},"Scores",-1),as=["href"],ls={class:"table"},rs=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"Racer"),(0,n.Lk)("th",{scope:"col"},"Points Earned"),(0,n.Lk)("th",{scope:"col"},"How Earned")])],-1),ns={key:0},ss={key:0},os=(0,n.Lk)("img",{src:"/white.png",alt:"White Jersey",style:{width:"20px",height:"20px"}},null,-1),us=[os],is={key:1},cs=(0,n.Lk)("img",{src:"/yellow.png",alt:"Yellow Jersey",style:{width:"20px",height:"20px"}},null,-1),ds=[cs],gs={key:2},ps=(0,n.Lk)("img",{src:"/green.png",alt:"Green Jersey",style:{width:"20px",height:"20px"}},null,-1),ks=[ps],vs={key:3},hs=(0,n.Lk)("img",{src:"/polkadot.png",alt:"Polka-dot Jersey",style:{width:"20px",height:"20px"}},null,-1),ms=[hs],ys={key:0},Ls={key:0},fs={key:1},bs={key:0},_s={key:0},ws={class:"border-bottom border-2"},Cs=(0,n.Lk)("th",{scope:"row"},"Total",-1),Es=(0,n.Lk)("td",null,null,-1);var Rs={__name:"DetailScoresView",setup(e){const t=P(),a=(0,M.KR)(t.league),l=(0,n.EW)((()=>{const e=new URLSearchParams(window.location.search),a=e.get("userId"),l=t.players.find((e=>(console.log(e.player_strava_id),e.player_strava_id==a)));return l})),r=(0,M.KR)([]),s=(0,M.KR)(new Map),o=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});r.value=t.data;let l=Map.groupBy(r.value,(({stage:e})=>e));l.forEach(((e,t,a)=>{a.set(t,Map.groupBy(e,(({racer:e})=>e)))})),s.value=l},u=(0,n.EW)((()=>Map.groupBy(t.race.days,(({url:e})=>e)))),i=t.getLeaguePlayers;return(0,n.sV)((async()=>{await i(a.value.id),await t.getRace(),await o()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[ts,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value.stage_scores,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.Lk)("h2",null,[(0,n.Lk)("a",{href:e.stage_url,target:"prosite"},(0,ve.v_)(u.value.get(e.stage_url)[0].name),9,as)]),(0,n.Lk)("table",ls,[rs,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.racers,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.url},[(0,n.Lk)("td",null,[(0,n.Lk)("b",null,(0,ve.v_)(t.name),1),s.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("span",ns,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("span",{key:e},["white"===e.category?((0,n.uX)(),(0,n.CE)("span",ss,us)):(0,n.Q3)("",!0),"yellow"===e.category?((0,n.uX)(),(0,n.CE)("span",is,ds)):(0,n.Q3)("",!0),"green"===e.category?((0,n.uX)(),(0,n.CE)("span",gs,ks)):(0,n.Q3)("",!0),"polkadot"===e.category?((0,n.uX)(),(0,n.CE)("span",vs,ms)):(0,n.Q3)("",!0)])))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[s.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("div",ys,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?0!==e.point?((0,n.uX)(),(0,n.CE)("span",fs,(0,ve.v_)(e.point),1)):(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Ls,(0,ve.v_)(e.point),1))])))),128))])):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[s.value.get(e.stage_url)?((0,n.uX)(),(0,n.CE)("div",bs,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value.get(e.stage_url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[["white","yellow","green","polkadot"].includes(e.category)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",_s,(0,ve.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1))])))),128))])):(0,n.Q3)("",!0)])])))),128)),(0,n.Lk)("tr",ws,[Cs,(0,n.Lk)("td",null,(0,ve.v_)(e.total_score),1),Es])])])])))),128))]))}};const As=Rs;var Ss=As;const Xs=e=>((0,n.Qi)("data-v-adda267c"),e=e(),(0,n.jt)(),e),xs={class:"mt-4"},Is={class:"d-flex justify-content-center mt-3"},Ts={class:"list-group"},Fs={class:"d-flex align-items-center"},Ps=Xs((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),Ks={class:"content-wrapper"},$s=["href"],Bs={key:0},Ds={key:1},Ms={class:"list-group"},js={class:"d-flex align-items-center"},Ws=Xs((()=>(0,n.Lk)("div",{class:"image-parent"},[(0,n.Lk)("img",{src:"blank-profile-picture.png",class:"img-fluid",alt:"Racer Image"})],-1))),Ns={class:"content-wrapper"},qs=["href"],zs={key:0},Qs={key:1},Vs=Xs((()=>(0,n.Lk)("div",{class:"btn-group ms-2",role:"group","aria-label":"Basic example"},null,-1)));var Os={__name:"RosterViewOnly",setup(e){const t=P(),a=(0,n.EW)((()=>{const e=new URLSearchParams(window.location.search),a=e.get("userId"),l=t.players.find((e=>(console.log(e.player_strava_id),e.player_strava_id==a)));return l}));return(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("h1",xs,(0,ve.v_)(a.value.player_nickname),1),(0,n.Lk)("div",Is,[(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",null,[(0,n.Lk)("ul",Ts,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value.active_racers,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",Fs,[Ps,(0,n.Lk)("div",Ks,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,$s),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",Bs,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Ds," None"))])])])))),128))])])])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("div",null,[(0,n.Lk)("ul",Ms,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value.bench_racers,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id,class:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",js,[Ws,(0,n.Lk)("div",Ns,[(0,n.Lk)("a",{href:e.url,target:"prosite"},[(0,n.Lk)("strong",null,(0,ve.v_)(e.name),1)],8,qs),e.specialties.length>0?((0,n.uX)(),(0,n.CE)("p",zs,(0,ve.v_)(e.specialties.join(", ")),1)):((0,n.uX)(),(0,n.CE)("p",Qs," None"))])]),Vs])))),128))])])])])])])]))}};const Hs=(0,$.A)(Os,[["__scopeId","data-v-adda267c"]]);var Us=Hs;const Js=(0,n.Lk)("h1",{class:"mt-4"},"Full Scores",-1),Ys=(0,n.Lk)("span",null,"* available racers",-1),Gs={class:"table"},Zs=(0,n.Lk)("th",{scope:"col"},"Racer",-1),eo=(0,n.Lk)("th",{scope:"col"},"Total",-1),to={style:{"vertical-align":"middle"}},ao={style:{"vertical-align":"middle"}},lo={key:0},ro=["src","alt"],no=(0,n.Lk)("img",{src:"/blank.png",style:{width:"1px",height:"20px"}},null,-1),so={key:0},oo=["data-bs-target"],uo=["id"],io={key:0};var co={__name:"FullScoresView",setup(e){const t=P(),a=(0,M.KR)(t.league),l=(0,M.KR)([]),r=(0,M.KR)(new Map),s=(0,M.KR)([]),o=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/racerScore/search?race=${a.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});l.value=t.data;let n=Map.groupBy(l.value,(({racer:e})=>e)),o=new Map;n.forEach(((e,t)=>{o.set(t,e.reduce(((e,t)=>e+t.point),0))}));let u=Array.from(o,(e=>({url:e[0],point:e[1]})));u.sort(((e,t)=>t.point-e.point)),s.value=u,n.forEach(((e,t,a)=>{let l=Map.groupBy(e,(({stage:e})=>e));a.set(t,l)})),r.value=n},u=(0,n.EW)((()=>{let e=t.race.days.slice().filter((e=>"Restday"!=e.name));return e.sort(((e,t)=>e.seq-t.seq)),e.forEach((e=>{e.shortname=e.url.substring(e.url.lastIndexOf("-")+1)})),e})),i=F(),c=(0,n.EW)((()=>{let e=Map.groupBy(i.allRacers,(({url:e})=>e));return e})),d=t.getLeaguePlayers;return(0,n.sV)((async()=>{await i.getRacerlist(a.value.active_race_url),await d(a.value.id),await t.getRace(),await o()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[Js,(0,n.eW)(),Ys,(0,n.Lk)("table",Gs,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[Zs,eo,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,(e=>((0,n.uX)(),(0,n.CE)("th",{key:e,scope:"col"},(0,ve.v_)(e.shortname),1)))),128))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.value,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e},[(0,n.Lk)("td",to,[(0,n.Lk)("b",null,(0,ve.v_)(c.value.get(e.url)[0].name)+" "+(0,ve.v_)(c.value.get(e.url)[0].player?"":"*"),1)]),(0,n.Lk)("td",ao,[(0,n.Lk)("b",null,(0,ve.v_)(e.point),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:a},[r.value.get(e.url).get(t.url)?((0,n.uX)(),(0,n.CE)("div",lo,[(0,n.Lk)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value.get(e.url).get(t.url),(e=>((0,n.uX)(),(0,n.CE)("span",{key:e},[["white","yellow","polkadot","green","1","2","3"].includes(e.category)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:"/"+e.category+".png",alt:e.category+" jersey",style:{width:"20px",height:"20px"}},null,8,ro)):(0,n.Q3)("",!0)])))),128)),no]),0!=r.value.get(e.url).get(t.url).reduce(((e,t)=>e+t.point),0)?((0,n.uX)(),(0,n.CE)("div",so,[(0,n.Lk)("a",{href:"#","data-bs-toggle":"collapse","data-bs-target":"#collapse"+e.url+t.url},(0,ve.v_)(r.value.get(e.url).get(t.url).reduce(((e,t)=>e+t.point),0)),9,oo)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{id:"collapse"+e.url+t.url,class:"collapse"},[(0,n.Lk)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value.get(e.url).get(t.url),((e,t)=>((0,n.uX)(),(0,n.CE)("span",{key:t},[["white","yellow","polkadot","green"].includes(e.category)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",io,[(0,n.Lk)("span",null,(0,ve.v_)(e.point)+" - "+(0,ve.v_)(isNaN(e.category)?e.category:e.category+(e.category%10==1&&e.category%100!=11?"st":e.category%10==2&&e.category%100!=12?"nd":e.category%10==3&&e.category%100!=13?"rd":"th")),1)]))])))),128))])],8,uo)])):(0,n.Q3)("",!0)])))),128))])))),128))])])]))}};const go=co;var po=go;const ko=(0,n.Lk)("h1",null,"Race Maintenance",-1),vo=(0,n.Lk)("label",{for:"raceurl"},"URL:",-1),ho=["disabled"],mo=["disabled"],yo=(0,n.Lk)("br",null,null,-1),Lo=["value"],fo=["disabled"],bo=(0,n.Lk)("th",null,"Race Name",-1),_o=(0,n.Lk)("th",null,"Race URL",-1),wo=(0,n.Lk)("th",null,"Race Start Date",-1),Co=(0,n.Lk)("th",null,"Racers",-1),Eo=(0,n.Lk)("th",null,"Racer Specialties",-1),Ro=(0,n.Lk)("th",null,"Youth Racers",-1),Ao=(0,n.Lk)("th",null,"Stages",-1);var So={__name:"RaceMaintenanceView",setup(e){const t=(0,M.KR)([]),a=(0,M.KR)({}),r=(0,M.KR)(""),s=async()=>{const e=localStorage.getItem("token"),a=await I.A.get("https://www.tourdefantasy.com/race",{headers:{Authorization:`Bearer ${e}`}});t.value=a.data.slice().sort(((e,t)=>Date.parse(t.start_date)-Date.parse(e.start_date)))},o=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/pcs?url=${r.value}`,{headers:{Authorization:`Bearer ${e}`}});let l=document.createElement("html");l.innerHTML=t.data;let n={days:[]};n.name=l.querySelector("div.main").textContent,n.url=r.value,l.querySelectorAll("div").forEach((e=>{"Startdate:"===e.textContent&&(n.start_date=e.nextSibling.nextSibling.textContent)}));let s={};l.querySelectorAll("h3").forEach((e=>{"Stages"===e.textContent&&(s=e.nextSibling.nextSibling)})),s.querySelector("table.basic").querySelectorAll("tbody tr").forEach(((e,t)=>{if("sum"===e.className)return;let a={};a.name=e.children[3].textContent,a.seq=t,a.url=e.children[3].firstChild.href,a.url&&(a.url=a.url.replace(document.location.origin,"https://www.procyclingstats.com")),n.days.push(a)})),l.innerHTML="<html></html>",a.value=n,r.value=""},u=()=>{console.log("selected")},i=()=>{I.A.put("https://www.tourdefantasy.com/race/raceinfo",a.value).then((function(e){alert(e.status)})),s()},c=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/pcs?url=${a.value.url}/startlist/top-competitors`,{headers:{Authorization:`Bearer ${e}`}});let l=document.createElement("html");l.innerHTML=t.data;let r=[];l.querySelector("table.basic").querySelectorAll("tbody tr").forEach((e=>{let t={};t.name=e.children[1].children[1].text,t.ranking=e.children[0].innerText,t.url=e.children[1].children[1].href,t.url&&(t.url=t.url.replace(document.location.origin,"https://www.procyclingstats.com")),t.nationality=e.children[1].children[0].className.split(" ")[1],t.race=a.value.url,r.push(t)})),l.innerHTML="<html></html>",I.A.put("https://www.tourdefantasy.com/racer/racerlist",r).then((function(e){console.log(e)}));const n=await I.A.get(`https://www.tourdefantasy.com/pcs?url=${a.value.url}/startlist/best-per-specialty`,{headers:{Authorization:`Bearer ${e}`}});l=document.createElement("html"),l.innerHTML=n.data,r=[],l.querySelectorAll("table.basic").forEach((e=>{let t=e.parentElement.previousSibling.previousSibling.textContent,l=a.value.url;e.querySelectorAll("tbody tr").forEach((e=>{let a={};a.racer=e.children[1].children[1].href,a.racer&&(a.racer=a.racer.replace(document.location.origin,"https://www.procyclingstats.com")),a.race=l,a.specialty=t,r.push(a)}))})),I.A.put("https://www.tourdefantasy.com/racer/racerspecialties",r).then((function(e){console.log(e)}));const s=await I.A.get(`https://www.tourdefantasy.com/pcs?url=${a.value.url}/startlist/youngest-oldest`,{headers:{Authorization:`Bearer ${e}`}});l=document.createElement("html"),l.innerHTML=s.data,r=[],l.querySelector("table.basic").querySelectorAll("tbody tr").forEach((e=>{let t={};t.racer=e.children[1].children[1].href,t.racer&&(t.racer=t.racer.replace(document.location.origin,"https://www.procyclingstats.com")),t.race=a.value.url,t.specialty="Youth",r.push(t)})),I.A.put("https://www.tourdefantasy.com/racer/racerspecialties",r).then((function(e){console.log(e)})),alert("updated")};return(0,n.sV)((()=>{s()})),(e,s)=>((0,n.uX)(),(0,n.CE)("div",null,[ko,vo,(0,n.bo)((0,n.Lk)("input",{type:"text",size:"70",id:"raceurl","onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e)},null,512),[[l.Jo,r.value]]),(0,n.Lk)("button",{type:"button",onClick:o,disabled:!r.value}," Read Race",8,ho),(0,n.Lk)("button",{type:"button",onClick:i,disabled:t.value.includes(a.value)}," Save Race",8,mo),(0,n.eW)(),yo,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),onChange:u},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value,(e=>((0,n.uX)(),(0,n.CE)("option",{value:e,key:e},(0,ve.v_)(e.name),9,Lo)))),128))],544),[[l.u1,a.value]]),(0,n.Lk)("button",{type:"button",onClick:c,disabled:!a.value||!t.value.includes(a.value)}," Update Race Details ",8,fo),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[bo,(0,n.Lk)("td",null,(0,ve.v_)(a.value.name),1)]),(0,n.Lk)("tr",null,[_o,(0,n.Lk)("td",null,(0,ve.v_)(a.value.url),1)]),(0,n.Lk)("tr",null,[wo,(0,n.Lk)("td",null,(0,ve.v_)(a.value.start_date),1)]),(0,n.Lk)("tr",null,[Co,(0,n.Lk)("td",null,(0,ve.v_)(a.value.url)+"/startlist/top-competitors",1)]),(0,n.Lk)("tr",null,[Eo,(0,n.Lk)("td",null,(0,ve.v_)(a.value.url)+"/startlist/best-per-specialty",1)]),(0,n.Lk)("tr",null,[Ro,(0,n.Lk)("td",null,(0,ve.v_)(a.value.url)+"/startlist/youngest-oldest",1)]),(0,n.Lk)("tr",null,[Ao,(0,n.Lk)("td",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value.days,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.Lk)("b",null,(0,ve.v_)(e.name),1),(0,n.eW)(" "+(0,ve.v_)(e.url),1)])))),128))])])])]))}};const Xo=So;var xo=Xo;const Io=(0,n.Lk)("h1",null,"Automation Center",-1),To=["value"],Fo=["id","value"],Po=["for"];var Ko={__name:"AutomationCenterView",setup(e){const t=W(),a=(0,M.KR)([]),r=(0,M.KR)({}),s=(0,M.KR)({}),o=async()=>{const e=localStorage.getItem("token"),t=await I.A.get("https://www.tourdefantasy.com/league",{headers:{Authorization:`Bearer ${e}`}});a.value=t.data},u=async()=>{const e=localStorage.getItem("token"),t=await I.A.get(`https://www.tourdefantasy.com/race/url?url=${r.value.active_race_url}`,{headers:{Authorization:`Bearer ${e}`}});let a=t.data;a.days.sort(((e,t)=>e.seq-t.seq)),s.value=a},i=(0,n.EW)((()=>{if(!s.value.days)return[];let e=[{leagueId:r.value.id,name:"Draft",time:new Date(Date.parse(s.value.start_date)-288e5),path:"/rundraft"}];return s.value.days.forEach(((t,a)=>{t.url&&e.push({leagueId:r.value.id,name:"Score",time:new Date(Date.parse(s.value.start_date)+36e5*(24*a+12)),path:"/runscore",data:{stageURL:t.url}}),e.push({leagueId:r.value.id,name:"Trade",time:new Date(Date.parse(s.value.start_date)+36e5*(24*a+20)),path:"/runtrade"})})),e}));return(0,n.sV)((()=>{o()})),(e,o)=>((0,n.uX)(),(0,n.CE)("div",null,[Io,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),onChange:u},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(e=>((0,n.uX)(),(0,n.CE)("option",{value:e,key:e},(0,ve.v_)(e.name),9,To)))),128))],544),[[l.u1,r.value]]),(0,n.Lk)("button",{type:"button",onClick:o[1]||(o[1]=(...e)=>(0,M.R1)(t).flip&&(0,M.R1)(t).flip(...e))},(0,ve.v_)((0,M.R1)(t).isAutoMode?"Stop":"Start"),1),(0,n.Lk)("div",null,[(0,n.Lk)("h2",null,(0,ve.v_)(s.value.name),1),(0,n.Lk)("div",null,"Start Date: "+(0,ve.v_)(s.value.start_date),1),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e},[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:e,value:e,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,M.R1)(t).tasks=e)},null,8,Fo),[[l.lH,(0,M.R1)(t).tasks]]),(0,n.Lk)("label",{for:e},[(0,n.Lk)("b",null,(0,ve.v_)(e.name),1),(0,n.eW)(" - "+(0,ve.v_)(e.time.toLocaleDateString())+" "+(0,ve.v_)(e.time.toLocaleTimeString()),1)],8,Po)])))),128))])])]))}};const $o=Ko;var Bo=$o;const Do=[{path:"/autocenter",name:"AutomationCenterView",component:Bo},{path:"/racecenter",name:"RaceMaintenanceView",component:xo},{path:"/leaguepreview",name:"LeaguePreview",component:nl,meta:{public:!0}},{path:"/fullscores",name:"FullScoreView",component:po},{path:"/rosterview",name:"RosterView",component:Us},{path:"/detailscore",name:"DetailScore",component:Ss},{path:"/bypass",name:"ByPass",component:es,meta:{public:!0}},{path:"/runscore",name:"RunScore",component:zn},{path:"/runtrade",name:"RunTrade",component:Cn},{path:"/trade",name:"Trade",component:pn},{path:"/rundraft",name:"RunDraft",component:cr},{path:"/roster",name:"Roster",component:Gl},{path:"/draftlist",name:"DraftList",component:Cl},{path:"/joinleague",name:"JoinLeague",component:mt},{path:"/leaguehome",name:"LeagueHome",component:jt},{path:"/profile",name:"Profile",component:rt},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,3607)),meta:{public:!0}},{path:"/",name:"Login",component:ue,meta:{public:!0}},{path:"/callback",name:"Callback",component:ke,meta:{public:!0}},{path:"/activities",name:"Activities",component:fe},{path:"/routes",name:"Routes",component:Re},{path:"/stats",name:"Stats",component:De},{path:"/logout",name:"logout",component:ze,meta:{public:!0}}],Mo=(0,j.aE)({history:(0,j.LA)("/"),routes:Do});Mo.beforeEach(((e,t,a)=>{const l=T();console.log("to: "+e.path),console.log("private? "+!e.meta.public+" auth? "+!l.isAuthenticated),e.meta.public||l.isAuthenticated?a():a("/")}));var jo=Mo;const Wo=(0,r.Ey)();(0,l.Ef)(J).use(Wo).use(jo).mount("#app")}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,n){if(!l){var s=1/0;for(c=0;c<e.length;c++){l=e[c][0],r=e[c][1],n=e[c][2];for(var o=!0,u=0;u<l.length;u++)(!1&n||s>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[u])}))?l.splice(u--,1):(o=!1,n<s&&(s=n));if(o){e.splice(c--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/about.33534aef.js"}}(),function(){a.miniCssF=function(e){return"css/about.c430cbe5.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="TourDeFantasy:";a.l=function(l,r,n,s){if(e[l])e[l].push(r);else{var o,u;if(void 0!==n)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var d=i[c];if(d.getAttribute("src")==l||d.getAttribute("data-webpack")==t+n){o=d;break}}o||(u=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+n),o.src=l),e[l]=[r];var g=function(t,a){o.onerror=o.onload=null,clearTimeout(p);var r=e[l];if(delete e[l],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=g.bind(null,o.onerror),o.onload=g.bind(null,o.onload),u&&document.head.appendChild(o)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,l,r,n){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",a.nc&&(s.nonce=a.nc);var o=function(a){if(s.onerror=s.onload=null,"load"===a.type)r();else{var l=a&&a.type,o=a&&a.target&&a.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+l+": "+o+")");u.name="ChunkLoadError",u.code="CSS_CHUNK_LOAD_FAILED",u.type=l,u.request=o,s.parentNode&&s.parentNode.removeChild(s),n(u)}};return s.onerror=s.onload=o,s.href=t,l?l.parentNode.insertBefore(s,l.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var r=a[l],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var s=document.getElementsByTagName("style");for(l=0;l<s.length;l++){r=s[l],n=r.getAttribute("data-href");if(n===e||n===t)return r}},l=function(l){return new Promise((function(r,n){var s=a.miniCssF(l),o=a.p+s;if(t(s,o))return r();e(l,o,null,r,n)}))},r={524:0};a.f.miniCss=function(e,t){var a={594:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=l(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,l){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)l.push(r[2]);else{var n=new Promise((function(a,l){r=e[t]=[a,l]}));l.push(r[2]=n);var s=a.p+a.u(t),o=new Error,u=function(l){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var n=l&&("load"===l.type?"missing":l.type),s=l&&l.target&&l.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}};a.l(s,u,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,n,s=l[0],o=l[1],u=l[2],i=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(u)var c=u(a)}for(t&&t(l);i<s.length;i++)n=s[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},l=self["webpackChunkTourDeFantasy"]=self["webpackChunkTourDeFantasy"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(835)}));l=a.O(l)})();
//# sourceMappingURL=app.e0a2fc19.js.map